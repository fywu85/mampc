function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 26-Jun-2022 14:48:18.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.538969769082243;-7.90783436538401;-0.977304238895497;-20.7368572510006;-1.24089441979988;-28.1236733477122];
x1_step1.gain = [1.81393610359949;0.122239026161682;0.894505727370824;0.0413214883755997;0.948066863281678;0.03997546016413];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3883891136903341312;-1.9240764650176331862;2.2098424777954854825;-1.7832517431369208083;-1.1241685784887547328;0.54494385250706134372;0.90597841040655768818;-0.27693716923337008406;0.34563485587465897497;0.26580932718063043918;0.10675265119898033617;0.59624752335635089473;0.42694257541637664621;-0.99336618904420614928;-0.81479175962865590943;0.81543908005912213444;1.8034149718625751557;1.9284270946805521785;-2.3944834015487779233;2.6076964505112640857];
IW1_1 = [1.4010570137710318672 1.5972061450718675335 -0.13982014739329851061 -0.19471283427774077612 0.26808706023840028765 -0.43656272172377136309;1.026039343076509347 1.0982366814264947763 0.99864347648987605854 -0.92140916463694400029 0.48029197458729955272 -1.0628936624659364174;-0.79723173969542571182 0.81582107145002191739 -0.53145008415491667986 0.77153288743105874481 -0.79872915501833707808 0.81609321008190160995;0.44123225150255374061 0.42354112909132896059 -0.93259072985131208355 -0.73782494344846116796 0.51493593151088856708 1.3713272263880171842;0.85187398286733795327 1.28494396760115559 0.53270093552315944674 0.93357533046213780903 -0.36247251065081309562 -0.4929976206652993409;-0.67645026269004748798 -1.3723119365889775434 0.051481448518558466099 0.56670183356035319644 0.27618682933057958628 -1.2923886435913842785;-0.9772683241503651308 -0.89697347922220083127 0.35998039880721571793 1.0509641990278197898 0.59019863100225278263 -1.0340828316745001025;0.61339378866945459823 0.9934093220020417947 1.0214604939931875016 0.071118678083184547201 1.1498941826205402172 -0.047503813126121709198;0.72185349819755628697 0.17169231764539186202 -1.4856902070684585571 1.2095424374334875495 1.0529453807012891797 -1.0610349456595087325;-0.34285172803997909785 -0.57535920824876296553 0.91464218136386710167 -0.55959647225715614116 -1.2165124368869812965 -0.35618358539257849449;-0.18841050004397499884 -0.57035543636790153599 0.40256500207838086247 1.1076347743159427051 0.22566348629712362772 0.55283635530600061525;0.80419010297708737323 1.4140617238683759194 -0.75569004336757628071 -0.98032196847988539723 -0.53087530409170691215 -0.73958107268036443749;0.45864062473677580378 0.26312382901159875326 -0.042726962929450849893 -1.3990181185857191171 0.99282480902798531108 -0.65100341199589861763;-0.23460917757408777939 -1.4949916221066885669 -0.76617439834893941164 0.47187497192537325441 -0.091101124360388169299 1.3497084849926024308;-0.53221435991840082558 -0.50359102396632315912 1.308565077279681077 1.3203106527538435166 -0.29733947216185530049 -0.38930676365510635817;0.15973193791834025546 -0.70525401574159674034 -0.69375692952953382786 1.3206084596795752972 -0.79095804087125698434 0.76994570344245494287;0.23742958754174434133 -1.1230618482762448895 0.39328405029665958192 -0.032500210288391305491 -1.0294537404629329203 -0.70380535918042330668;0.5639231267873241471 -0.85339313339641897915 1.2826583580037342891 -0.010986655954204633395 -0.96538295433820775493 -0.26774614408922092768;-0.80139605156658710872 0.69005258752130949063 0.68310032284048682882 -1.1137606376002848751 0.045536526105937689957 -0.86634526120153620976;0.77464050110384352621 -1.181353082677545574 0.44330842348990245894 -0.46852539925025277201 -0.42468145837131460185 0.26486247743897645135];

% Layer 2
b2 = [-1.5199262023956745526;-1.2858366256032920383;-0.96970452372759441406;-0.72521286129200368542;0.20378761496560884869;-0.18486632930080657;-0.58280888471805669671;-1.0762872915853800571;-1.0930299940247096835;-1.7153133325019818134];
LW2_1 = [0.35253946893424537024 0.48064198479310393797 0.089217873573446557223 -0.12057544714266855979 0.064588489307178753585 0.53251131060885992241 -0.18190478375133947719 -0.52472022807671903077 -0.2544539485773639198 -0.23789056792287374686 -0.44042308212562403247 0.34553883168581395191 -0.18224125707360425142 0.22450820569437696106 0.13518071731726738482 -0.43528827761626703863 0.54807556393096934499 -0.021977792380251222337 -0.39226836331218084553 -0.36968375490384741688;0.067136460494576569169 -0.24905432286303910705 0.02337236030816806226 -0.26290100204142952123 -0.12103406794417860548 -0.36313814751413980852 -0.2949813928314098388 0.40798128137129419102 0.1622850891605527035 -0.081749192845234783245 -0.34035684667266857817 -0.030074665523943423795 0.17926774607600845513 0.42837735228062778781 -0.12130849250849970455 -0.26526885855400822445 -0.051980752985386007026 -0.19401053145092500563 -0.061895693843846473492 -0.44087993643743522698;0.56744092078427887937 -0.34441556898620612204 -0.32192515790927300756 0.36437391190107487615 0.059030909633251901769 0.58950787726668363309 0.54468418082349856491 -0.02980832358953443284 0.73113825921878294878 0.45984173628756824792 0.23368821651099780379 -0.29396653337823192009 -0.48784278716593720837 0.11077615117730460481 -0.17029550309531377161 -0.1530534604249042252 -0.3077743320526570292 -0.054915638378586657808 0.3524811881525251045 -0.15868462407264322112;0.22478336482949889952 -0.3634105068531260363 -0.31114736339045911961 -0.21868762529983137854 0.28073512664451505394 0.16508318462265836324 -0.068849364104201130066 -0.05473781513384260583 0.075516203992065961126 0.00064644418493868126448 -0.89921274023912345363 0.28162696632578515521 -0.017048023558436840863 -0.16534781427204464643 -0.21257805100014662281 -0.25267697969931901536 0.21816732343739195232 0.073867571243162052919 0.055855515922177391419 -0.16392890650342495373;-0.11970772845195125356 -0.177429745850833126 -0.29631530081457735371 0.26018334076076482519 0.086719987790950456286 -0.30445258267754271575 0.22530762552825531198 -0.022175980619441044983 -0.29941666440483238887 -0.50860434770693474515 -0.2812576001662507319 -0.23873790001572239849 0.31937667692116067375 0.53603113765553989101 -0.37676395785036131958 0.022982117897378258331 0.11371789874925040953 -0.01363458044395763312 -0.18496513173862988433 -0.083562587367338611588;-0.38572894241151178818 0.54220490929124942614 0.30298028362524670465 0.51623602151087455425 -0.25443897967483147804 0.021921913283467240469 -0.071453304297453557048 0.090397912472156907726 0.013005604516474603138 0.3046372830793266373 -0.73642360454261357461 -0.063959856193918918077 -0.031444596454333680058 -0.11238350579955515285 0.24224243624557459387 0.26058289501703540969 -0.076543035173402912408 0.022017080575045259311 0.041667795815939011328 -0.43705452226709856633;-0.41787408414506405085 0.19900208016677237155 -0.21128575980109762233 0.33018631714005930444 0.1151626171721291253 -0.24368058816713383807 -0.42996550492328283744 0.16820745224982228128 0.1600456824988678306 -0.014730163539163912412 0.37551406866045411448 -0.22833544509475700579 -0.50502590539954472781 0.46429269760279984203 0.50970213156075683258 -0.4680710136711864755 0.3843393663846931263 -0.52999276533293171454 0.39606920042598992016 -0.4883692950313951453;-0.17079300933865051992 0.26553767189398325144 -0.41563854071049693983 0.39541591103360845816 -0.13259676225080041512 -0.39368106728439550279 0.27328184654483927973 0.2251450031440735966 -0.21670856508902330839 -0.55009550321150468832 -0.10239644447553654383 -0.63140009596450541451 -0.27665864899673869859 0.065131317192966636798 0.29562637271490183055 0.076559818018669748008 -0.4386561267512708584 0.24944203620460519977 -0.50965705362216107144 0.072525655914821018921;-0.27539142147838330255 0.094682435326317329616 -0.088545556392585419991 -0.30220271266351422801 -0.24124245526228008107 -0.042567241999576441169 -0.26620022783776925435 0.094337742692981466086 -0.42509486646160360435 -0.74370470293598867073 0.98628221480783917485 -0.51039125564699261428 0.046626728122916752395 0.32292086939702535631 0.30885498953085216423 0.38085392182658978077 0.066713786195332011597 0.17447125089742526738 -0.295086107613452997 -0.31002259030543821705;-0.41378386001209721545 0.32142208428612994986 -0.10508690925650009118 0.29880979971464116662 0.37211887544503263747 -0.36265042604747849131 0.27768693243704595242 0.48420252767673166439 -0.26083711451814733939 -0.10607516823779064574 0.15564710360505862319 -0.23761061843934047633 -0.12658635268503437565 -0.31150847944375514853 -0.43762863518562877818 -0.062303490262464816807 0.17838353405792259365 -0.16779080347030897458 0.53004237493543815418 0.30327052319230168864];

% Layer 3
b3 = [1.7794985098326225881;-1.7259594298996736583;1.7011272555408936125;1.2769592190806695609;0.99609895896689337746;0.89042680096673920698;-0.69063407758949924009;0.60395710745775388339;0.38424268841509601202;-0.099542801513763587429;0.099106743964892274334;-0.41216555679661287526;0.4912325636823755004;-0.58276256081060340275;-0.82156157095599913198;-1.1777725607567388622;-1.4031745965356943184;-1.6480559287375486921;1.6073270399301515798;-1.9480238241713030423];
LW3_2 = [-0.43227460341698259461 1.0517014763718599557 -0.28560553412883171731 -0.31722819555000320024 0.22371459402227925062 0.91743996582731457412 -0.91149391202899820996 0.25476848171628291295 0.34197305587935711291 0.33973384392441285939;0.56143965807294493597 -0.90285453275757787672 0.31273015308972257342 -0.90469783015941329651 -0.74067151805295139422 -0.79093804563886382919 0.18525916084446217291 -0.30451996911034806548 0.17606343498967719219 0.21975187429643530668;-0.84013041291900181218 0.29686557991167855652 -0.4222903041858207529 0.64282123010187852685 -0.48197459725074892622 -0.66269278866535064054 -0.61273091535646240224 -0.16791969633214876012 0.83193122728990309689 0.23599583517291319867;-0.82153883304412012034 -0.79308552914182306459 0.23523333223116010826 0.49783430530364591871 0.040206575434970276417 -0.024080333649904327176 0.55269864777858301874 0.71691645345010157619 -0.3913383943562853684 1.0184051002575953415;-0.1857289545579262624 -0.073767555099892273551 -0.51917839018623235248 0.060678482382850867927 -0.37753152232466802296 0.49712413947443007123 1.2061268877749662387 0.3411502196069392534 0.22937526056739421243 1.1730104152946971841;-0.79398097238562981293 -0.40617943110009785412 0.42766042349031957448 0.048112129045197460364 -0.52132748760280700484 -0.69565464732663551128 0.36622813336396631279 -0.85279376348675151043 -0.8319044289905670464 -0.50782471764231040812;0.022211327682115193649 1.034504327899351761 -0.9072310422716911571 0.26637415735097730307 0.18646538767467826792 0.061739855698171704212 0.50369346862163899559 0.81343253914007318528 0.066777258818963541875 0.80188279376335402926;-0.28200244482383585165 -0.37829558075687780283 0.56458279869450089805 0.52604048862006280718 0.17219577638784935858 -0.89537162319598628812 -0.7212433539658578141 -0.75247437581416587449 -0.60820295030461857255 0.76789385533579757048;-0.74633536239083397845 0.27347842169322367223 -0.0076747014260910226269 0.99535703197132852083 0.82584686796752282412 0.63671439651975614282 0.47479881328692591369 -0.13655302811798511464 0.063029704480333681449 -0.084855367392523778358;0.16551761976454315572 0.72580465756628409491 0.72521690212348177695 0.63740556443366191974 0.024679101835438390505 -0.80155201504056483586 0.88983266600217525433 -0.68218081210870851194 0.2788034560142463314 -0.17748722942605615893;0.87640373161069595742 -0.66819599092345727254 0.1911580632006609215 0.10795080353808345075 0.2526520352879633724 0.47878861127040966972 0.68409327142497622365 -0.83958835097732387176 -0.47062442040468621673 -0.36113043924731713652;-0.36836275786534095067 -0.55577457149971254413 0.91062871993642469093 0.29959953934738936532 0.51506781986702743215 -0.32561945645708179065 1.0548684234118357317 0.67818103361004655749 0.01266699040426062621 0.7145011134497862848;0.66926154534540638341 0.16881886971457327196 0.77925520716078910954 0.71536208147338009589 -0.7483390941543041075 -0.43867421136452067199 0.72454594415083262149 -0.51766875248763843942 0.58607106134213449167 0.17938552343055608196;-0.16731217696575487186 0.039797093001600052087 -0.1875982442835988917 -1.0365013987625861791 0.44912509880140327745 0.00094626036227556391441 -0.68036348187022499534 -0.84772206506909264512 0.81406459385209195556 -0.91937999183692076244;-0.17417682808600518096 -0.59372824726351469682 0.89296516979184181739 -0.25707532858286774591 0.43330763422396323392 0.36270895764825517027 -0.59393473081225167665 -0.97312181365051408921 0.49537549612921027986 0.27131818641659100066;-0.61133662945104039199 -0.53324490145229741511 0.36666427075160240578 0.62218305067112933404 0.21384063091729621497 0.8502196993025983307 -0.43184526228141784099 -0.61300825986075968554 -0.59011281638256629645 0.30634090861640228542;-0.90190869768066628254 -0.64133993677461165195 0.17311499901217256014 -0.7418563799982356155 0.41524547289876545531 -0.9151733965212063282 0.15160625830798926672 0.6357065415585465562 0.064015610141558237922 -0.097797170387321247231;-0.73724785462087172316 0.5805863502576822377 -0.56358207068661747563 0.051092532398580074726 0.21731818462357557764 0.90929083235386731765 -0.19067280856237159292 -0.61516178388802855714 -0.68420043954822118426 -0.24074066817800696128;0.47745608193530486574 0.41353959384984323444 0.91656968761624768582 -0.56004427248298338515 0.10272913290284801935 -0.1857724755848147169 0.10194813418983922348 0.75278137249543841669 0.77304980960038127691 -0.82715316595777632624;-0.7679332806160131808 0.6739131754194366275 0.82153312199313632824 -0.32822199618523911768 -0.36560332994268884832 -0.46690738446648438753 -0.5364843100223016803 0.098182321679901790601 -0.57570019054670273917 0.66933889121044287673];

% Layer 4
b4 = [-0.23192705931193954849;-0.84816081480927663083;0.30206323286558922625];
LW4_3 = [-0.70369958379932495696 0.49369416037215757553 0.5943685123269146775 -0.66291276331476223227 -0.27854574597338643827 0.15942320954610170181 0.34008282504974074456 0.66537837795516374673 -0.66231522527828645686 0.52382893500402349929 0.9483363544734180195 0.34042322605531372126 -0.39102407454200188708 0.50802802574618599607 -0.44349620121087884872 0.23943335070439966672 0.31849166551880198073 -0.77208604779219514036 0.92701732640969580768 0.20314155304511163913;0.64842481391199524587 -0.44864163027967773889 -0.7303844816203698409 -0.02866554162057370625 0.3095216266699155061 0.89638829824443488903 -0.59045038675700822761 -0.40526017527546726038 0.71085391185889545973 -0.89479363652988286315 0.39251353941266237113 0.68283582414803245531 -0.97600453907764594952 -0.12242036258075580935 -0.93948317890444621447 0.88351269037837709686 0.018324166024655728219 0.017476351095463735219 0.41326671476368836977 0.78528441710702645562;0.52896306629788591991 -0.012811684110343191448 0.4570319356823092094 -0.077563155637385292063 -0.33534044734595486181 -0.65833529291247772086 0.49060915390088705168 0.86660943446604521423 0.48237160325231537294 0.56701512943822174329 0.58778942075925688648 0.71263009065446414336 0.7941319952039247454 0.99480432929817974586 0.26387109578089784634 0.36438981005018333814 -0.73387701932896864943 -0.17329335625255773423 -0.51999391439787401303 -0.075142687379794168012];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.55337391376765;3.81784909713721];
y1_step1.xoffset = [-1;-0.642447274605589;-0.26502091103646];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
