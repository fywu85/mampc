function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 02:44:27.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.676359529906641;-6.76356635189084;-1.22678659261612;-19.2673244097423;-0.98407122221374;-20.9469586519853];
x1_step1.gain = [1.48779575500562;0.16544827231515;0.861612382024867;0.0490743628895624;0.961840240129108;0.0484367998776591];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3939434776851071796;-2.2070653471403942625;-1.8957241984845270011;-1.4585577019956550426;-1.3322137876777702115;1.2039080525117800136;0.75014336023646199791;0.49717591767565821881;0.40122897618790931418;-0.27416509278945022654;-0.036401777090446292562;-0.036519261278115465463;-0.044302453177305148313;-0.6664503736874278772;0.80310021856193769541;-1.8839233112677953308;1.5230328648470483621;2.0488819590908193824;-2.1069331986085346742;2.5815135567885580947];
IW1_1 = [0.85249572586948441089 0.76779807440332459301 1.1035910231467598308 -1.4384457919472004583 -0.20245462974344749507 0.12322050102456684473;0.6014111915056968849 -1.3779703168716224138 -0.026277567970591581004 0.48798141689451762781 -1.2751087904591604794 -0.33637590874846523548;0.89408806257360506908 -0.10259418455162733208 -0.94243866339588888703 0.91933050104101943223 -1.0052987367494523596 -1.0501273707803646662;-0.1997972510550782288 -1.0832392151072940401 0.87689584750772364696 1.0231739770397907385 -1.4047624842525507916 -0.44364887358438037657;0.72821865930073526041 -0.76415870762880377942 0.5450023862686491638 0.85320437658026859751 0.78083754762561274898 0.93688224422874788466;-0.043664020569490820389 1.2820289464529215362 0.57970046878440795179 0.69243429873754946957 0.7025035722437708019 1.4458604558415890651;-0.27471731848063940529 1.0803875867288232904 -0.19534944263340545123 0.65523063087159416629 0.45832592133249683286 1.0317106129522579661;-0.16168805728628937723 1.298226503585131697 0.63275286722508983228 -1.1190564101743858405 -0.1156778427844070839 1.06106150341951877;-0.55453905284593763003 1.2442226034870098594 0.61001215000941944044 -1.0016796135645824606 -1.0602887263564555465 0.56603631728819780999;0.26519254804657221847 -1.1998507270464982 -1.0731818953068315015 0.75857801257258850036 0.14184153993074538613 -1.1137812358046341732;-0.2199612970403473089 -0.68893795933528745312 0.26335811929714131319 1.0433893661575279754 0.083179618808461988633 0.016222257071952003726;-0.19792894922379267175 -1.5768840557487260323 -1.2779705038198501121 -0.41113790022296370363 -0.82023815881381312298 -0.26379353985542897121;-0.35118351248784973606 -0.63783607100478834084 0.58764644469707061347 -0.19941924298196023191 0.17205730807378233349 1.3185502912975466394;-0.67352524648723366418 1.2295583529339870754 -0.13246957195568440091 0.56997001252893009227 0.20706441233688965831 1.1833596026992034833;0.68148852627532330306 0.016381670859897803222 1.490965728098691212 0.58832259175363199599 0.45561658351461375993 0.51909730500431272571;-0.41495555136433981414 0.8305992407195610383 -0.070268860106735914206 1.3582231336829697632 0.98781153292714474201 -0.22627014504184342347;0.48150620962378920531 -0.70602055613776126819 -0.89423461112131219508 1.0601722558745301228 1.3092879953520106806 -0.085646284391204349773;0.94817069050571234357 -0.65929801763320505792 -1.3099168695344414193 -0.889922013132454226 0.30751476023734852783 -0.53641226384522733284;-0.33726175546233078117 1.3730916646247015578 0.19788183716101576115 1.0437444414171643814 1.1658041618393750749 -0.38458801999301078789;0.98617879669125363407 1.0056906126195241935 -0.96657288135986829669 1.2019315147398395016 -0.40164341999143587936 -0.23132764212770270951];

% Layer 2
b2 = [-1.7218115030966969492;-1.2739269253874487831;-1.0380420200873834435;0.34236991198726679508;0.17096641636019860311;0.059825885653322745383;0.6190357120317472317;0.19996355375500091123;1.1865474643963094259;1.6178590492829247882];
LW2_1 = [0.55291378740165153527 -0.29095955555510233381 -0.11976489462031905675 0.41826939960685544095 -0.07930167870098053795 0.084372723860985113231 -0.1390767228888622753 0.27582162442102631239 -0.0077979441152079935484 0.2339664184573640171 -0.29603897168180953736 0.18119721325099324982 -0.23210869769044950583 -0.22205374347532932933 0.21875284329474292688 0.60191676129617510682 -0.77248273900695441085 -0.3536895501486016502 0.75981743478642649325 0.13841951821103717912;0.58817337312425510554 0.31694826415700805278 0.18141502073800061523 -0.2063088561651358066 0.54314092628940568996 0.36037053260417173384 0.31474217571193291443 -0.40537254018810520151 -0.50703386735179545308 -0.027455787447511321997 0.49272968415644485818 -0.25648974337474950147 0.52480145452706550291 -0.047246209807374123235 -0.026468614362847663057 0.16785196608432056964 -0.47065355941068337531 0.0090185953963164682684 -0.070753273837447089312 -0.52748999122778439386;0.13069587514180405763 0.087694188495054711807 0.2648367772871327297 -0.040974257089002832921 0.32372756985405853891 0.052349202277884566981 0.023297208141855669378 -0.44421168333158167485 0.16984987391094336084 -0.39615209288150804445 0.33529828857484128557 -0.21644762885108548289 0.12931202720207188306 -0.062446526362315284142 0.39787275962615586966 -0.29141723509037775752 -0.084687674524348138805 0.24748521779355944772 0.043248885530361956542 -0.31388601887060985085;-0.1017530008219126314 -0.063234595399738149912 -0.089570403478218318938 -0.11749783159093205032 0.11309458744996712942 0.27048038280278946521 -0.036025187606546119068 -0.040099145491016327525 0.052032673567927852087 -0.15771753913042310669 0.94609649068072687594 0.22412141675193447687 -0.29704299932256805761 0.13189110183604085824 0.26155044539124394642 0.46725144866679252376 -0.098001845129988926497 -0.44026905150700895719 -0.24172576902562484258 0.18725003671152765095;-0.15087816304424656044 -0.16056525549086086979 0.31478500641362183732 -0.050392429498717729308 -0.14773704742403301338 -0.30630570238399873473 -0.12188555181763602309 -0.57075840510363817781 0.33519707902371037589 -0.26213094510659590286 0.33629363661500188964 -0.34587763137034382988 0.34188163960213602266 -0.2328179944389233702 -0.4695969081243418497 -0.08539357332695407532 -0.2404356919496599132 0.28662149583924195761 -0.035912303873469136883 -0.49362252330342581974;0.16697561775026806274 0.46211938587908285569 -0.094665784993394730407 0.019253442291335229331 0.45212582866462014408 -0.24529291556257104556 -0.30900869725792828868 -0.24068023234189789283 -0.5168545204390190273 0.14075691496862827168 -0.41870641064096320028 -0.46810940582822141431 0.11180685175257264186 0.42532936540215549037 -0.031780329890151115535 0.51906104426672305951 0.36168183605482806531 -0.37563716293361831822 0.56983520982323376813 -0.50057275734510198184;0.19845746330803454294 -0.26483447227891082632 -0.32062089701703988531 -0.246505033569600851 0.44904768445009529687 0.49928453263572641907 -0.16187907787883423771 0.071387276576922592541 0.059024995346548890518 -0.62618362026521190433 0.25602655315874489617 -0.52659827080079435468 -0.017382544456248719134 0.18132168062458126068 -0.05200641803505124533 -0.70063836206333418577 -0.20657589643921950295 0.40409836465253162752 -0.1212869220403351711 0.54770254243564320262;0.052831312569989671846 -0.027952527373519893417 -0.054654512570120460102 0.10743034071413604114 -0.079703019780828471275 -0.15982396295803755204 0.22609726973832988683 0.031114525686516257552 -0.095466054993410903728 0.027498798445386062744 0.30804987755541146655 -0.034484655747590062247 0.20755364690028763053 0.071381865876478128863 -0.027217203188322255936 0.038459754536245047141 0.11564204908450981257 0.0056748527518423168975 -0.017184898538275129865 -0.14405712888504865199;0.34271425632636720593 -0.30387779076969612113 0.62304162001399820969 -0.047102975910709977969 0.24565646660970391624 -0.22179475725907216166 -0.18171974397541265644 0.13387210486638803641 0.6362411851355224135 -0.38209995149188946684 -0.24193880615679022594 -0.25948842641275282617 0.20607126042053533488 -0.41672596989095145315 -0.14659537589949933611 0.096371499345046587881 0.56494575183302175869 0.23707504816005395276 -0.31015471648384629333 0.5929717719993604641;0.32134669923305225758 0.18719703082501992775 -0.39754684003186191443 0.41703397641828698905 0.003209015248767604564 0.66424935207839386209 -0.34740068088791892231 0.59904149685695928795 -0.11872393381550506997 -0.1696062221117481672 0.59003790934094457743 0.42347555785569418463 -0.35005999063937742743 0.012248772531149858256 -0.23581308417348345596 -0.52086294885839090618 -0.023495341970565148532 -0.26898278564478872443 -0.052718263921459944388 0.25205683637452019896];

% Layer 3
b3 = [-1.8891624485780036391;-1.6627187829320793089;-1.4905352691489781591;-1.1870765835483161332;1.0829989331669032104;-0.97329644422238492663;0.70528633489909420273;-0.28936688993024034522;-0.2577709901678763571;-0.14574701905672909907;-0.024337833771114671805;-0.27527615167873159541;0.45881867006684512456;-0.7688715093138626111;-0.69629288936520672415;-1.1441670206706551216;-1.4404673509692733635;-1.5005551568336219503;-1.730435924722246277;-1.8541230175023437621];
LW3_2 = [0.35996729567774177205 -0.12684541368879376222 0.091126070298691214111 0.13511855489478535874 0.88545557429053378673 0.91570529581631243676 -0.26235342502728281611 -0.89423025098474917538 -0.91633939470248082504 -0.25738036569106498286;0.16371576717007532698 -0.95691592698129890326 0.46844495260570861994 -0.82271018245869520502 0.75200011728880311601 -1.0429473239803743745 -0.63185157974866690278 0.07590694511415868595 0.35186616761286232391 0.103868907084793613;0.78163377231076380802 -0.21618871539849904284 -0.028244836056458166862 -0.3472227095339326941 0.83879228737042133002 -0.84019957624077901137 -0.48469865896323360843 0.5689160062391269701 -0.4232171805810911458 -0.80612994995373021823;0.84105476432810111209 -0.10717745799057207257 -1.2415489202270384439 -0.87777365064650236803 -0.43212043731104754496 0.01275824718063732488 0.12713533251409123159 -0.71678229663581494169 -0.5356009770467217157 0.17603140217517695976;-0.70860316531966482945 0.6117925366743351967 -0.80683559722187569996 0.29927588253308928801 -0.40167079111011622095 -0.6700884450024834349 0.58638645750583573424 -0.86866468787255035622 0.28062890035223403418 -0.37159631615443666774;0.39330961061889829766 -0.30857293998005347335 0.8712355087947222243 0.37732671153176144951 0.89432916051112132383 -0.29602060930159107555 0.006093239075213267332 -0.5322881671117012381 0.59743974194992699456 -0.92135875384581067404;-0.63755952052272157893 -0.66608489771301537807 -0.76418094167206751521 0.058211725593355329034 0.58685655874481779115 0.46743934610319576306 0.4371300619796616993 0.79576553291739560159 -0.38314754127113592741 0.78183039645340068891;0.28276015587861275113 0.51914876262346121294 -0.85210498164223946738 0.74378007950506419554 -0.73813690459350689288 -0.19220043575401599134 0.097987007087940045102 -1.1878064323894548249 -0.015980667568457160299 -0.3954586551152863283;0.78976128413648005733 0.84586893746942126704 -0.0024116007789478765416 0.88601841671344694351 0.21973105182804369973 -0.58676808816352210574 0.75731113552190776339 0.20373949164793089817 0.42674872646712086466 -0.69110678358194577164;0.82589281163231542671 -0.47025750378863862 0.26676625176767992942 0.81681181402994129659 -0.44715245982248497114 0.67245506058973392172 -0.10992073651060693673 0.84143887908954617671 0.0450566721243178675 0.94653652459092751936;-0.15114025555410484647 -0.19325312654081872044 0.47973080036406900994 -0.64163620415480215886 0.088357900301111916286 0.48643023921068700988 0.91269475019630297297 0.75421097804335135439 0.21619616997943524872 -0.50960661244022209537;-0.40890168412800970144 0.42817550666985704222 -0.84307107361623712105 -0.4210140248533495444 0.83879620311526748022 -0.57205942736317760833 -0.39197166272497058204 0.75280848113457443649 0.44399372690323274382 -0.15087335510692664875;0.99048670545759898154 -0.22197752154962843707 -0.67619658006483851498 0.92628132862669132486 0.27464137759638018732 -0.21081125132462352756 0.17619461069798092456 -0.15163364550546584719 0.49798025710637716656 0.83366448636738144096;-0.136676337956471744 0.29111710709639643246 0.84567980362075212408 -0.29024827977259681777 0.71442661696668374738 0.95648450805107554373 0.37944599580687021767 0.65358523079690156177 -0.12660080525152198061 0.77027082829097670569;-0.96289487911260118747 -0.65892699335898297086 0.67747272807482139534 0.77694486204674817476 -0.25952768409447757314 -0.86065914012732602778 0.7274678437573568468 0.63026888549174731047 0.27858375503049503941 -0.16450032058256633394;-0.37396936236950895083 0.64784622390426327421 0.8076853524270409812 -0.11680217301315427847 0.20955556483774470666 -0.91353887516595444485 -0.42063255057915982515 -0.15109573886543681276 0.68219666324411698533 -0.89023525947923920487;-0.23026082209104384302 -0.4644144725508831395 0.16789896288667460755 -0.48503956361570371714 0.34134861169004160342 0.60692961008472634532 -0.36241239124203084021 0.885827509321832407 -0.16323131141178065517 0.89634492565927370578;-0.83121905514354732514 -0.61166484679223587229 -0.63446219454883567845 0.56100000945563632815 -0.62168513424267302092 -0.30460359222327687556 0.24864689199372183581 -0.63371747725517413308 -0.35090668014199943858 0.69223556335359259784;-0.29806991336268767734 -0.078201859365880421748 -0.3944723707156423953 -1.0677553215700803513 -0.79073712801418705176 -0.56327642681612888342 0.13308136717187218911 -0.89227413336698324642 -0.59860288923706694852 -0.72751356947446887968;-0.76600098548168094048 -0.77318783400924395721 0.70605892567667427606 -0.0072724542939155544657 0.26348472721053367573 -0.80984323225928356305 -0.22720639807683148947 0.22554393043429116217 -0.79875951840602721354 -0.66730473708353454931];

% Layer 4
b4 = [-0.58713491628239922182;-0.40641765581097399895;0.74575497265960832838];
LW4_3 = [0.44426051138692185249 -0.58712300834229813606 -0.27162958367297967976 -0.5533269809813312623 -0.1471960341248727544 0.35328335658125847862 -0.66536473738331936012 -0.5754136246944832056 0.36970371362212645083 1.1373995384418569277 -0.41575566795612395321 0.96533462619298704421 1.1016919403113036857 0.18009567658282160663 0.66103860843638029277 0.24385744210319620917 0.70998752570287881891 -0.0050807364773845908185 -0.62735207934813930208 0.24311084518595851844;-0.28981526640635668635 0.33335591080465859504 -0.039866807435182768926 0.89931379986259141202 0.75162516392933498288 -0.67278921983830153319 0.0060989155293243446643 0.93449338779015922452 -0.53057534016261498344 -1.0237281579060388825 0.15755673814759768581 -0.12638173082506051759 -0.96040330641783844268 0.12237330291965146933 0.63031816602473267341 -0.9809147270027961385 0.61328527201617455411 -0.76590737860080349009 0.32939175686104588126 -0.25900681587471569012;-0.17951758173849718947 0.21766630246748949751 0.4010751669885440629 0.67916702464637623837 0.34153074309394715335 0.81553416941497547388 0.1180792684427694611 0.61142467058625349363 -0.2305752281613571153 -1.434921767423878558 -0.84726687592582128339 -0.064829536299732370974 -0.60819070778107497954 0.54654732274691764093 0.5149133660914181343 -0.063307035529676036756 0.64044523071071679521 0.44850364052389501968 0.10060907624169113106 -0.85715537764984972569];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.52477853558493;3.68857865666406];
y1_step1.xoffset = [-1;-0.649268524470734;-0.26781918172868];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
