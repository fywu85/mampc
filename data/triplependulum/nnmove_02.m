function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 02:43:49.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.550560990664137;-5.3685645928187;-1.02679412959305;-18.7609202310142;-0.943782740203422;-20.9469586519853];
x1_step1.gain = [1.67440647309341;0.188040627032075;0.955260992906411;0.049691820089723;1.10874678030579;0.0509611124656944];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3028876323348961286;-2.7101845146128717978;-1.5899199671700152692;1.4002786544829113335;-1.1176887125741947759;-1.2824205464735389803;-0.50844225769200590559;0.78655669067547606677;0.40846745464355910249;-0.28499754728756959699;0.083775288438587808271;-0.23065230378169374048;-0.18525710193546354732;1.1179790574482213472;-0.85712685427552393058;-1.3662405781135644744;-2.0713391220190802144;2.0458276269598689723;-2.2716273662692572088;2.4612138577668543071];
IW1_1 = [-1.1376972732977421732 -0.17163669272653891973 1.0077880299193044955 0.91856341181122747042 0.42534253767118079814 1.4054253385820170141;0.92732043459799651242 -0.35106369446025736947 -0.73832405444957449614 -0.29864744003599763555 -0.90676670735666708989 0.70684654424451975885;1.2920909485588996102 -0.25022637030716332607 -0.82301308197444456027 -0.71235923150779634216 0.59123501952981150076 -0.17516375424373825664;-1.4656616593058746645 0.81116099826378340598 0.54447088693473200127 -0.95032508828115591637 -0.51285779636971806639 0.28693935968197364916;0.55405209226269547251 0.8412993286422288941 0.61306209236413744534 0.62406129677343480378 0.47739844006021059375 1.3810054487890131014;1.4721329212498699412 -0.92424302761244270243 0.32719119977267890897 0.62886448619627455248 0.073320827292217824467 -1.0785822401771520962;0.32733934889930282885 0.42701234985779346065 0.034847022521414854068 -0.33580175646818033464 1.2663788778470690399 1.0731950260183327206;-0.39248085513806030278 0.82377389330314387816 0.83886224593234437474 0.991553774260406251 0.021467307545822059134 1.208887398744066255;-1.3895787962874506238 0.52752715029193431029 -0.45579376326469456249 0.91960637126556155074 0.17069657155299075568 0.10001445419850962804;0.58786616197665630956 -0.80649286143088338985 0.3307364096885088145 -0.64243410458284166964 1.0453600989518019304 -0.6277280391695585493;0.28828335619647155186 0.54795703111894389359 -0.15162044233987675979 -0.92711423102655776685 -0.42756860384356654148 -0.53456292723215304008;-0.35752579937333200943 -0.19709930754283400134 0.77181656689370781166 1.5577582136258651957 -0.34662275618645255193 0.21440855137285880216;-0.71117576715238173257 -1.2461355513280105711 0.37266816068190905531 -0.85279298545049986302 -0.30759285578689393725 0.96690450420543760934;0.9909119786197949642 -1.2240069884063500272 -0.23066316085685059645 -0.39278420027531291137 -0.83671331443482632739 0.24541792112171892382;0.18250898224230704958 1.1042380154117485969 -0.55777368542888006164 -1.0965977683449203983 0.13148450553659468687 1.354464421682681774;-0.53193560670628070586 0.1944669808071294026 -1.1012021697083551608 -1.2932795675117412237 0.70664276334050069028 0.020329540466337323035;-0.44076652840127689137 -0.35136145311941824332 0.41695584094168353095 0.29193409544995457816 0.93396841827201326769 -1.7613037407781499954;0.41209931098364643853 0.95533881327741765332 -0.026283249032482469687 1.4838162408671693449 1.25852492408501071 0.084239896021223920064;-1.272022088477100743 0.48528883096980202083 0.04072184991893358641 1.098044315978227381 -1.0478357699188958208 0.53052963538631425777;1.0701587007298007936 0.41569026313774354309 -1.2517224650385048168 -0.30857424468689254038 0.90703355815555353203 -1.1319069684774705209];

% Layer 2
b2 = [-1.6851717185079180261;-1.0837306183792549952;0.73996475607665423979;0.61977360221046851052;-0.16833620937932805561;0.044312972394292417244;0.72526028735621195231;-1.041793764696570701;1.151917783939685247;-1.603382113012814969];
LW2_1 = [0.57598694787587756405 0.35904159545650971008 -0.28541692930799894556 0.10737427172880907589 0.018790201173736486434 0.41985464907482156205 0.34662837312269040302 0.51146720308353621487 0.13370837749659078564 -0.066761086347728024193 0.53271378077439490717 -0.068722876028708287932 0.14363635791828927024 -0.19487364008515375979 0.10487236127213593606 -0.26774594083516473075 0.051085831800957520743 -0.22129767034758934807 0.34351564763689168558 0.098484738013139963564;0.48096782817936423182 0.38305912235562050716 -0.15579507404236830892 0.10516169789813742397 0.11899793405142648772 0.18220496962599250224 0.045287082965929661982 0.36257919072861122256 -0.020366904482707105101 0.13853885433314838682 -1.2979329259927656626 0.60001832764866414038 -0.01813158256370562757 -0.063485126327450250305 0.16997338366603598203 -0.046865941880613562476 -0.47234574270754176029 -0.28669709865031961504 -0.061782890982584610928 -0.24018489508478793604;-0.21543407319605065164 -0.11952266448701227841 0.47660989069021508779 0.69083209890623897831 0.12630047231448243705 0.019283962722505241377 0.045052477670091101158 -0.22280415733640340781 -0.30765390381421775512 0.45943354330575908451 0.54675178509873478827 0.12970629672161110291 -0.20504400701941075114 0.090849355144539511997 0.041445994300216164319 0.21906610918570693092 0.44520440931409055452 -0.24890822085836444844 -0.72857794273254838924 0.086980935290710298391;-0.39213633250957730114 -0.060736817397470499458 -0.48373036915807821057 -0.31130324857904712044 -0.73549197015880996009 -0.39347414100250982516 -0.121244734776039087 0.42863605396549853133 -0.014425613622989890902 0.44327635057662506668 -0.047108876866516012638 0.050508117293569666784 0.49565499767047710433 -0.24142673047707083334 0.11915490999737700373 -0.043681549526788342186 -0.091953988480168377673 0.35731231246387690215 0.027496013520013289078 0.14034002796856157036;0.19039001255500473397 0.085349922824695320656 0.34506531856944849812 0.17270143176834604204 -0.02387835954328492577 -0.041788859869367665778 -0.294000697223359031 0.032648661375478393865 0.037693680364981350939 0.058706693616746408182 0.68222745648656868411 -0.72126464750691121619 -0.11831825769777841451 -0.034783853542430000216 0.14511635805859607329 0.2203743468384999904 -0.28599614308793697148 -0.45610269630951694175 0.32090090195475295953 0.10994580032883381759;0.16346332708282834689 0.14003144379762777483 0.3491611495571549928 -0.055509403594529632686 -0.038889085430983162672 0.15387912232650316491 -0.55660194955029607122 0.22318652034056998823 0.2046223487853467693 -0.23302183416072572153 -0.36046936090910780548 0.22119331240232958935 0.015198587468870320555 0.10835056422844234481 -0.34236047074173209248 0.16033321212000350986 -0.0096924202647771674074 -0.36199550203119246206 0.023601266784231522688 0.060262409722611466611;0.58571418723713208898 -0.7491938200216687882 0.28926706369708948818 -0.16141614180112676125 -0.48167869857807299461 -0.53659218898761384953 0.067126794999207095582 0.16522176024406734496 -0.34364217221832593641 0.30337798012244987511 0.16170416485120911454 -0.30555783103863631833 0.14209968729665192755 -0.06754998584911640902 -0.69132955570323972871 0.097341115777684977806 -0.58715677815913247528 -0.1192535229764501159 -0.56769278050604565777 0.33714954062123886347;-0.23608025183146730264 -0.20371702678903044759 0.38950251327511764554 -0.3344155128680813549 0.51969916085598899524 0.58879858178176203154 -0.26642713854422833686 -0.49919239638780071866 0.61305759442617668853 0.4053893498099062076 0.12492257332136286196 0.31657950745237783963 0.22814196112307263964 0.11035023459817425162 0.31753106076678444536 0.36203484020142823185 -0.12204886329808481427 -0.33010849116401841385 -0.26137746353191737558 0.056999940424017993268;0.51069237013019985749 0.35171835370681370225 0.44770954968788001516 -0.035468388634337433274 0.22676717311088781526 0.29160206540817262821 0.058505798905099659635 0.59367807055462540333 0.11169857581548302272 -0.00039819767741036942582 0.48212275088575634596 -0.0085444266031995882993 -0.044455990974838821561 0.17494890676189678302 0.46595184323982269392 -0.01102066227821303819 -0.4680446687611597989 0.5973644986312657279 -0.27373646081009456177 -0.47442604437893726166;-0.49449441982685804486 -0.46597275474895949454 0.36691484801685414485 -0.39565901761490790411 0.12677782510318974518 0.34184834640757733037 -0.62991320999791033941 -0.17184918331206805453 0.54867028208995793914 0.29760491325151100517 -0.22037162439985738538 -0.30734011286568690968 -0.17154255949313573781 -0.12277458330896492966 0.20126308750606583531 -0.40634713379860609717 0.32001049172460255265 -0.29209763926650389454 -0.049893085410021978388 -0.067883856979267687137];

% Layer 3
b3 = [-1.9394427882116536122;1.7071797714585401629;1.6088179065045831173;1.2848149075776218453;-0.95044765890883786685;0.88749648192971153371;0.74665686666101449553;-0.56650364063362768086;-0.31705674397829630706;-0.10480587128404469932;-0.073292079423575379193;-0.29926076681744928631;-0.56331018083824546672;-0.62423015820483218619;-0.9153903373558146539;1.1791471973965714781;-1.1140770674598179379;-1.4971788282562616956;1.6328224241479325496;-1.8336702011748522434];
LW3_2 = [0.66897669278104854307 -0.50637079488006120354 0.14463493336558810864 0.97886525587470540888 0.17932837121517203327 -0.51689814891238983208 -0.88566723736540065026 -0.19273249713903620184 0.11418905620888714081 0.16018518687376800957;-0.75868343370019464267 -0.43042450669108978101 0.68239398817027019373 -0.017466408143257096397 -0.91172255755564657331 -0.16517519201850663912 0.34637470861850083725 0.76570229604241923926 0.58012860362014262439 -0.65516579612908232289;-0.99339258298842747497 0.30228070662406120173 -0.2039104416352281457 0.0058258020204597438588 1.1647502633759467816 -0.18730321816985434635 -0.74590682937551855414 -0.3936707561533404065 0.50958995825138408975 -0.13536502434083971802;-0.70280059835402108881 0.9026334042233783439 -0.63177265493467238411 0.037570706559346578324 -1.1807951449185987158 -0.67410360922347334345 -0.32002911992381261053 0.35647690790101427272 -0.34922993959202414116 -0.37121163156329245458;0.49347446949556755813 0.13604911106509232077 0.60265003235935277193 -0.57104907995729814463 -0.54164470479590010044 0.15286913636161009178 0.35698885652217138276 -0.021659340019443740905 1.2120398280376669664 -0.26993279637535949611;-0.70530934860211580428 -0.57874346139368837427 -0.31429356523210200125 0.86545395656865298228 0.95919792622343269528 0.19577456910306575977 0.62430738766129922901 -0.70412349328571854912 -0.016048447996380884456 0.13148152324304315797;-0.82174597292743278842 0.87604348059354009148 -0.402743007541200293 0.1322939576414244589 -0.25469560257054107977 0.42627959333712228673 0.49707385777283863426 0.17990285169516298525 -0.75873166409905801189 -0.83748952390071207397;0.10462086098019333924 -0.24578475605164959439 0.40339616401502675913 1.0223728328589638537 0.28760058591679454887 -0.76158865139263032251 -0.84930519990043729095 0.66920995723976128833 -0.72892567603555014077 -0.23058334412349909548;1.1315794893510371377 -1.1596266876313288119 0.35247834634987562641 -0.1830744643607559452 -0.19944253294097244456 -0.22427762612141757814 -0.47592207115531653949 -0.0058813724247773549458 0.90785175404142892663 -0.060798616666382879203;0.064454825428105724794 0.68774566938296755048 -0.85959063385894807219 -0.23994876835926504111 0.7624473208940820701 -0.54153821197390106246 0.52450588984662260827 -0.52616311156342443489 -0.8652038448130784376 0.28333716489674087846;-0.44052272234722539279 0.3356807505191764518 0.47657711891561360673 0.32531170900051403772 0.44038285591547665643 -1.1118084331987780899 0.98548214238751796756 -0.80865786821905727422 0.31230556758231681203 0.14927325907193947363;-0.47124683165803921137 -0.47084872123929005783 -0.4776558889616230319 -0.2835689930355584365 0.40503588384801514355 0.034676287754375603734 -0.57496449853540221309 1.1652603369292087176 -0.74882301251893634841 -0.65223234802600460469;-0.67681983071343776448 -0.098209979850217982156 0.60805385245573750908 -0.1665834231033456736 0.56428893825297521403 0.74529549523205718131 -0.49177293991866116718 0.57003709865534613055 0.73827724868078425935 0.34834967974458846962;-0.52550663206532977068 -0.28773731287487341879 -0.6327216520737302119 0.7112792451123765014 0.22579731932612329137 -0.8410674146256178485 -0.12603903255407777895 0.74474047245044572296 -0.71059876490857831755 0.53987410403720836882;-1.1693951191920761712 0.80265193901550657696 0.61291238470100761759 0.46446519100526134638 -0.68425919841428872736 0.11063976676867300075 0.56740299726923160151 0.65672704015816163459 -0.31198683653197928356 0.087174940395171388041;0.67022716171394114415 -0.56876621867371923713 0.47663281236611154679 0.10912581357226855405 0.73945116901573759716 0.70782402095597096725 0.46400485362333182549 -0.61419984463292331966 -0.43220811190799163226 -0.82177913759977505581;-0.35698165710559370822 -1.0446465263632149778 -0.39851617855997523154 0.43826266263523705469 -0.56007507045505044996 -0.58986469550311759757 1.0313642838962413517 -0.86778569648236170142 0.35859553521377379726 0.25248823325691432951;-0.12807672954436724599 -0.20651568078512966276 0.77671953912580649071 -0.78970517279781227149 0.89969800815698564023 -0.33359641694860442396 -0.82597457315489453133 0.60072920927297734917 0.0034797102272944445585 0.55975502019477529903;0.75330401638532606956 0.06241404134445312224 0.12183769430586653681 0.51327745352188414163 -0.13507978858089134122 0.41924852205349355527 -0.97373832643926916397 -0.96690750126676994203 -0.10640426308127919064 0.72898045745561612652;-0.49843181382876133867 -0.89456963126439625889 -0.41245238425200325683 -0.69366833189663146264 0.57190890970691665718 0.80112094780610065836 0.29270002660189542443 0.84992326643217619431 -0.21862552343985972025 0.39960482378343314958];

% Layer 4
b4 = [0.56622709090651746067;0.98721642588364622029;0.68448880936112743711];
LW4_3 = [0.69495600038404237164 0.62007899495948504143 -0.6370547192091706723 0.68950311558363608366 -0.43833765736770613497 -0.1983474367670149674 0.28775095241115061784 -0.40042729796066228731 -0.50340788604931263617 0.34328901137747486194 -0.58796403079212367082 0.021001475053075487065 0.13651998843965748587 0.53880445075045790837 0.71682418060363473078 0.81750600334052048179 0.91592236374659585785 0.031199495439423432369 0.21498451703063053975 1.0068267370432015806;0.69003132562135993666 -0.17946182264930368722 0.65991212920574526812 -0.40408006507601501589 -0.16018350264879169242 -0.87319806476470540613 -0.075753653187636479927 0.12290560847778238263 0.45147484108202068365 -0.46782172642940156315 0.49716749680338251371 -0.21840006658478100521 0.50934946706597050703 -0.28287601203478962564 -0.4809774457778984158 0.061094735332282434914 0.86086641023073018353 0.3691053357070485097 -0.68417534199109841797 0.71602553566948123898;-0.26493204259038111159 0.82360041005598738639 -0.2435205345430986601 -0.86480978538098185471 -0.29753646754986912137 0.86822241814593836828 -0.56167530791854680672 -0.097852836917302093989 0.82324051407083276288 -0.38279145699186511997 -0.48589137949102528813 0.32203977190535548747 -0.01277257253198847177 0.013950728648084231159 -0.29452570411869405387 0.1690904588467286862 -0.43334342525742219898 0.35274594855768420798 0.7423099202956044973 0.7469995778694247246];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1.55897685222112;3.77918998718804];
y1_step1.xoffset = [-1;-0.636263333787975;-0.261921565936486];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
