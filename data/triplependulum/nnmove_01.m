function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 02:43:43.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.531158378333812;-5.3685645928187;-1.02679412959305;-17.3059290086918;-0.943782740203422;-20.9469586519853];
x1_step1.gain = [1.7020545274214;0.189097448186294;0.955260992906411;0.0515555844216964;1.10874678030579;0.0531032799550806];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.5213209358234682789;2.2791773746518848576;-1.9038521611125247546;1.6019046257374391917;1.5468034773632237666;-1.234336396178908668;-0.59179221901140299789;-0.2316807245337425547;-0.32600501285200567114;-0.011178258828238203659;-0.10389201125305649875;-0.14112575578611505356;-0.462606098200954996;-1.0015242774553967386;1.2683065987946076092;-1.2356268997402215515;-1.69339503228141397;-1.4964839092354711436;-2.1420504252371990184;-2.4745887416799154934];
IW1_1 = [-0.57546352587779714405 0.55390323200206215137 0.9847325051042578048 -1.1923176408480411492 -0.56104602513693779819 -0.83797191123727587936;-0.5552664783594417619 -0.8829208071295209237 -1.5056177992381925002 -0.57598529278468491022 -0.50964202921073131769 -0.70284693071859893898;1.0842790302597529184 -0.95514076804173941859 1.0132056419885668852 -0.014867384358925811796 0.74369588183809420823 0.96832785327680259702;-0.2981687286599293274 0.38589788046653261677 -1.0553441176810052227 1.355638010476308386 1.0857940538301555922 -0.55144131747858438075;-1.0395520960939703681 0.84164590065464939261 -0.43766027241108396151 0.6945788318501405767 -0.68842052724963709309 -1.0389284798989675274;0.92761107769958550673 -0.92802670406713594353 0.75713072663899083636 -0.45941217583882743014 0.16400919379801434661 -1.2049191096703184556;0.3871451786506432402 -0.1768932522705524979 -1.399120002131097662 -1.2006452144926860193 -0.84190315977649166079 0.031972640636643998024;-0.12809954014364610675 -0.86983964614770148405 0.59076189863097117172 1.3609338609520225116 0.29148739322711481048 0.69239916178926219636;-0.10666752827288171479 -1.0497198899936421856 1.4320093216444691464 -0.58617614021905128929 -0.16060624071321252804 0.50067070308635441833;0.45364435993161528193 -1.0818111213938659265 -0.53258717893292695233 0.70101492438160584175 -1.1356035145204348424 -0.7906077133989714012;-0.87380854463461199444 -0.25062045422645268244 0.31011750766278134428 1.5258490922349841057 -0.2778448511735789328 0.45796866746485459521;0.15908772440952562155 1.3271679244855927315 0.67013562991239328248 -0.73771119107227245415 0.69673635327729466216 0.4608602310659570267;-0.97684029465545940685 0.53880552403603010347 0.76685017677447742113 0.31684571156781238255 -1.087170060946850203 -0.52239082702311323558;-0.47474325062447170209 -0.72417986128738409679 0.17424112705095320952 -0.99072238227820297318 1.0161196751307002284 -0.88562927270901248278;0.2969111046151043376 0.11171287419998421342 0.54094763522108268994 0.85447645557049167753 1.2609025426772078049 1.4078775956384712575;0.043557540686720026823 1.7210632889026538095 -0.08982867893836478379 0.34690584422399356468 0.86385414609089994364 -1.2004087456984904314;-1.576912183901695963 0.87121637214260316817 -0.04878369550367732399 0.58643540636768975993 0.47658402987698422759 0.29328373547051062031;-1.0775557334837990719 -0.9761281265903953841 -0.42525357303136868126 1.3913128082789332218 -0.0053260314460042874896 0.65799460763177775036;-1.513105283062254669 0.60744148818669130296 -1.2021102110258712337 -0.7200747290924586208 0.5893969391863137508 0.44562843943764157695;-0.65216234486397473002 -0.51426701790415407789 -0.078265473574082033981 -1.2267282912113890436 0.7302504457319122233 1.2328831855835657993];

% Layer 2
b2 = [-1.6478629409258918059;-1.1665277863840579631;0.64756193580980347946;-0.49578464781736059086;0.36013868862760384237;0.1790324959315666431;-0.50320386375945147517;-0.87964989595211995344;-1.2235536152251833553;1.5670538326417844388];
LW2_1 = [0.32185407119255610153 -0.2494024519393698569 -0.30877052526710407898 -0.36988972587214402621 0.39976084264532230073 0.51859356878606577279 -0.021887026794037624244 0.12889147652132890154 -0.55985493240285233441 0.045773284642362251085 0.17421860215145190676 0.46088165361683502974 0.12042005709985585671 -0.43259816467281092534 -0.012766442085895243416 -0.077217298146516746837 -0.032070874991937926846 -0.4076272788394833535 0.015281660547823899821 0.44576429408888929018;0.41457551406739251432 -0.066305368588003427144 0.23076641290844640553 0.21231756358007211616 -0.22074190792850484355 0.13221413799500725261 0.13509424107857292974 -0.81216677570617168413 -0.01139716256786315815 -0.10849379790892745012 -0.42186314489008602813 -0.13560612169990587939 0.2334158660186567702 -0.021727937364003354487 -0.097446216621261405599 0.20272739537782891173 -0.14477321747716231926 -0.16450614949508793328 0.18016569308190022447 -0.10031912283270964792;-0.51614565653686683699 -0.35284444393818759078 -0.20493371255067655001 0.12352507831515510683 -0.22946583763253231014 0.065275718419103581636 -0.117668735821233994 0.84313548055963671857 0.071531472213453434206 0.11961038478258140261 0.31648602214441062808 0.20468431637591832928 0.10057839234936266637 0.0043652482393714813619 -0.22449407683852090623 0.27857831206173960803 -0.091650306194572081497 0.11118100069570319155 -0.01147938338855433206 -0.0026650880162539213047;-0.17081075447340368645 -0.39168379447431600493 0.075801562114935036596 -0.21383106560703490917 -0.4017606794483544741 -0.078665750793415659126 -0.041989824133317837918 -0.28656640788087717198 0.013276721414829490212 0.2350604354847800892 -0.30262496988325338076 0.3039967879719833177 0.02272073338202450915 -0.056367091258370388696 0.15812481441105946667 -0.23902569145483909541 -0.3556140030636010807 -0.38755053244051290706 0.29766886134907344363 -0.45137413685446658995;-0.21811032836797727974 0.00032311935927470392116 0.2177946672281485252 0.32226270413257507297 0.52502790940271848452 -0.15116404957962145672 -0.021680951124421532494 -0.3432760390911393511 0.0024767166648795285039 0.41791099553144472889 0.39975266599918474197 0.40747741109529195258 -0.15216499524331400517 0.18722068666188873554 -0.28269401411289429848 0.16112490994588321569 0.40169667641966277927 -0.11890480589954192936 -0.099190904973385063403 0.079740119785716448431;0.036899784982549907464 -0.049305924503818293614 -0.39675393427896965548 -0.13331172094337376266 0.18158972359268885088 -0.03053642702961309463 -0.025668871121267897856 0.28830555771756111172 -0.22898703243267545804 -0.29273584706873195804 0.32174939187154738551 0.054021240527271210952 -0.037641468498220281846 0.014423580168112959399 -0.43152778229492871898 -0.31134325472489415843 0.12043837399511202191 0.34672997097888424989 0.52070888214419130957 -0.14179040120246008683;-0.068024914943076456031 -0.47617915040010783123 -0.42289847658962625987 -0.11999855524658444017 -0.1223462938935907518 0.08322549377317443875 -0.049360135317089159912 -0.46921205106963004283 0.52235722331017997444 0.00988536875968540861 -0.04133642024815155358 0.21385926628862961252 -0.16754990507151712453 -0.18493855073665288469 -0.59517983933954565767 -0.3969300464191105049 -0.40937286620707946661 0.38745740068303013981 0.43328025265917247122 0.030224101760994374899;-0.061769604474354720958 0.21167147404001479538 -0.009207056846129074712 -0.64055197024019405738 -0.17521753902379971768 0.15450005152396692476 0.17380532192131703528 -0.095189333962215738616 -0.40149992196015127366 0.072869003609024443624 -0.727343303936122898 0.12256494173632867528 -0.40345804847906940882 -0.35572368570828755141 -0.23837876063089427636 -0.2514908155563749248 0.54467401329568554402 -0.14413203166286842061 -0.21152182522428802924 0.68225996780155240273;-0.095965211329392022255 -0.31627071233920189819 -0.31430817072952949021 0.17537447002544753749 0.02787794341621935984 -0.53718312392456124549 0.10199763055318804283 0.57675469292347003591 0.072240765443847443361 -0.37086738716664180426 0.1972061410655705227 0.44147544475398897701 -0.13729960767145274469 -0.0024505448647049246635 -0.35346653425115914793 0.17258149830760141641 -0.21609806526063474186 0.30215436131540635012 0.26192396410836882303 -0.20188333404643957203;0.26562697078732794287 0.26240052924758655584 -0.44661797896019100884 0.26360125267506673286 -0.63697939865671959758 0.16185116115917899671 -0.14739403317325797116 -0.17448511473626360235 0.23414031347782288117 0.063810225880258336639 0.39929017178470782579 0.54453935881690440635 -0.31309088572840687581 0.10051555500626872808 -0.040645164326584923287 -0.3849618593296160185 -0.10793842661353712786 0.023884210737812709702 0.43636447364804792359 0.19800083538197665867];

% Layer 3
b3 = [-1.9856124286796625888;1.6989992221982239684;-1.5622364350713229264;-1.2382732616285057059;-1.1473023275661873299;-0.92272713726941879564;0.75049968872374805962;0.54068313892901098683;0.20642805119486404286;-0.0014159082279852248931;0.12714784240711021757;0.34329212958954880008;0.34980667495603484651;0.61024161179635538765;-1.1050868258220569729;1.0241379877023759626;1.506130915096304479;-1.5362448292594610422;-1.7886022793387006402;1.7697757310404307329];
LW3_2 = [0.54891956622812243527 0.84446849255481537533 -0.75654257061670626694 -0.85107439014041375014 0.0804963081235850475 0.30917771656100190292 -0.084516972074619056698 0.16429929836522250142 -0.60833313674913258584 -0.64467620839632999719;-0.91855199710196988594 -0.88037717439606266723 -0.14312276786874267298 -0.92971804663445434258 -0.44685296585177464168 -0.4663912717298808186 0.61168185940018093838 0.095299512303170852423 -0.26003056243140865167 0.4541936570844866683;0.26261170021734325797 0.73626539624254627725 -0.022471331659058249586 -0.86374194691398287205 0.0043419934651450463325 0.37746534018385985432 -0.60018054802264531045 1.0443440232175225102 -0.14715967664121790137 -0.0010240478254737806277;0.40758837360424882146 -0.98724875350983642974 0.77438792658833977001 -0.45663267002978391584 0.78844021483023218888 0.57941521782400862151 0.096372838421742990089 -0.63993157902993502706 0.32101225458254678546 0.5376069280238112702;0.084744875635945793313 0.4536277470859975125 0.7929264944710842089 1.1252696885656869874 0.53755892264816163006 0.85833130374551946939 0.048288009589732255877 0.22344086988013425743 -0.53894095701534006082 0.20037192549053903234;0.52459556357273440241 -0.52798855959041257613 0.30829217370249811792 -0.64399954249352775459 0.64100571920071713894 -0.098671870469428296646 -0.40203702232563565122 0.22513211912447145258 0.55540965393724195387 0.8696699917926112855;-0.60793819907872670427 -0.56037033069963892995 -0.88732914142154584169 -0.075204542690042841535 0.52556220801543884757 -0.26396659001744271489 -0.51205723844078421259 0.044866406100761598019 1.0535947463040471472 -0.13179380976555721272;0.037024953685229171352 0.034432794002181577042 -0.0051388302199784951022 -0.6853503833517722299 0.42977681470785633611 -0.13476781199404228029 0.60902078232988632323 -0.20275930369811975829 -0.96938249258137287878 -1.0636741887297551656;-0.60542227865460895853 0.58391931017100195955 0.22352042983823872113 0.068519977714868202101 0.59683426456754629097 -0.38027021610329542201 -0.31841197336487148117 0.56048426774843551623 0.36643489599170681048 0.065910970240532482101;-0.93748299666613099657 0.78935684615432699651 0.76086367171952851152 -0.14372418714617021807 0.29043443669012186659 -0.20422783655723036889 -0.77008309063408464379 0.14888921828834128513 0.66188033215314456825 0.14103542505699945275;0.55379610160536318908 -0.91665534933454873023 -0.30093408976024577095 -0.26899442262712519591 0.64993427421749982997 0.0011645005782834373653 -0.58020021811725697169 0.91045662226496082425 0.7927196158663608605 -0.21849936917790044322;0.37321763875453917159 0.341959073192971863 -0.33089074257030998139 0.45900040418225579453 0.80134177835728015449 -0.40468575090300146213 0.89327850886680937315 0.26845020513802092532 -0.13990130375902351534 -0.97232785264447596507;0.17584048517352671159 -0.98303890404549520987 0.84608656064645193506 -0.61101243546354022662 0.49220692537244664644 -0.13958332310449741986 0.15598956393513843666 0.67853053325353152037 -0.29189657002233132532 -0.33115899829710782054;-0.17410932777584423037 0.57304945315882616086 -0.91371421104834349425 -0.032739058865472847604 -0.82899009739395301821 0.32688393969173612508 0.12369881812530711396 0.70954325417582198021 0.60355283170565410256 -0.45046797716121006472;-0.41670479826618533892 -0.48869667951526413185 0.0065549237147690129004 -0.65218636521488504432 -0.50882897560782380797 -0.32011569484718682688 0.70181414012229603738 -0.44072998017519005032 -0.36451105011231255126 0.29496885861375549132;0.10809105523973717988 0.289203990360282992 -0.36363925837926186491 -0.74924220967887600331 0.34213847277395970092 -1.0193588322961977255 0.64343696990739851493 1.1576552287426931098 -0.4917803456005005458 0.12403360929254254874;0.54722241841628260772 -0.7066052678163043943 -0.033507999916065220325 0.65387862408029495676 0.38994014526317249958 0.41913975851621132485 0.41433639791682380649 -1.0832724638615838231 -0.045292813300655099251 -0.22384862353860388029;-0.35022108571521548548 0.40680535583170684966 0.5252951540957684351 0.61303306743237806486 -0.70863190969247891182 -0.69118143246091012788 -0.85748106164235027293 -0.62506095600857569661 -0.11487710400248246634 -0.38086210025004646473;0.0021359404661196396483 -0.10084017649064261346 0.90012830228261109244 0.60300035070009672111 -0.31762178754226494393 -0.72417523149012741346 0.10530384658582604696 0.60246888746478055587 -0.76488984276601601486 -0.81539896322984772858;0.17380178589491890317 0.46297732811557634758 0.79040744161897591447 -0.49217155219489322482 1.1087365561360389421 0.90590287246346035133 0.42249921263193412901 -0.57032736716686649459 -0.1360088224394425116 0.38780726786236902059];

% Layer 4
b4 = [-0.53921966777416918681;-0.41080190500695590305;0.56507399592915419362];
LW4_3 = [-0.045354416017537708961 0.45748012689762068694 -0.27615684337461304798 -0.28442332621082000443 -0.14844573868130928052 -0.038316005272465300524 0.49705105711078928499 0.24735703416705681623 -0.589438603294216934 0.54843234215110014951 0.16238845822340014502 0.059338873520699608743 0.70244008755379616638 -0.49214727006130198905 0.56441881851324204877 -0.69017148275200468355 -0.14310285549973078556 -0.18411404937355529965 0.6213714546344779599 -0.55959378647693536202;0.60872099705345017462 0.36485972495974605678 -0.59760162160931362685 0.4455000233568831014 0.46118010848686863401 -0.85092373976992952134 0.40251370554624871234 0.23016972803492630195 -0.42755861649153004134 0.39784041300011491193 0.50237462951966693758 0.50689459802073477679 -0.83266548327722866851 0.67147000289390779137 -0.59474851463200040236 0.87878303053145045975 0.50730246649419186156 0.014962446691078790453 0.00040009816231694925962 0.30049706312620527715;-0.65345260919005843103 0.4665512947610541139 0.85970592724221261971 0.26966990205256996527 -0.62012568422793090672 -0.3724591382572340903 -1.072692135406662084 0.71629351087664439035 0.41527825739472906674 -0.18481476737654359277 -0.33367417458729187185 0.77636329112151236664 -0.81555269949004793872 -0.12242409049027296042 -0.57150401484138357855 0.28888434238228311024 -0.2662269349987674838 -0.42934690910875866754 0.016836477753121428802 -0.28613766039995319757];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.00297978666344;1.57899521626534;3.79947328363539];
y1_step1.xoffset = [-1;-0.619998931884766;-0.259096384048462];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
