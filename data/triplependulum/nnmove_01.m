function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 26-Jun-2022 14:47:48.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.522948433858415;-5.78613206769665;-0.752332037276923;-15.1790668962038;-0.70477522264051;-16.8904200470127];
x1_step1.gain = [1.84068276892408;0.169628444060952;1.27607064854014;0.0617201732642034;1.50742530520998;0.0631624296432031];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.470798115100720338;1.9219334751502059611;-1.7675652954482521384;-1.8713356214035918867;1.154968090557525473;-1.0462589583870416376;-1.1033151427060654548;-0.49584488043090441112;0.58431552430977340418;0.24846846717091303214;0.33228897852647948374;-0.23920174040904373935;0.72647684022782510471;0.56847371769821464227;-0.97051773053555112636;-1.5891712267708841821;-1.8135729968709977111;1.9980303604509215276;2.6397612202218008193;2.43209811442060575];
IW1_1 = [1.0233388307040687248 0.03805605432552876255 0.76186934334832001614 1.4734420002151462636 -0.52999485517016586833 -0.773832094551324845;-1.2629086463597032353 0.70435345674502691793 -0.57292232453667579772 -1.2269475027730660788 1.1592310116892301508 0.3519282091057171491;0.74683744446143718321 1.7107679209144546206 -0.48329532676053621465 -0.77308303247761589461 -0.54392866243880810817 0.3362783167930789574;0.53856232114021629354 -1.0968062045610060817 -0.93784568238812249241 1.1376656053449587525 0.84760210502373867225 -0.21616608502845188755;-0.81113542317100617574 -0.52389935069494564246 0.52237115105004483517 1.6092464618316182356 0.17005424548064765333 -0.49781294375578249989;0.29465613572881743654 0.75469289408255046947 1.1923919368510316197 1.2690139780652025525 0.86624837457060011037 -0.49066812685767613456;0.87800706483870827324 -0.18515887663272412311 0.86970518972984256489 -1.3438784329866344525 -0.30846241827864490093 1.0958193849057908942;0.85182055355871555413 0.96299632397525214422 1.1131462158210179147 -0.68270013227780323994 0.71436373094164073994 0.034810207721083889776;-1.012145380327054589 -1.0570317021590287521 -0.15689312404969446568 0.40702948041029402004 -0.72164292922842754319 -0.96563154834147846284;0.14641894213452755213 0.086114111587011710203 -1.0256218039665716546 -0.62089173716273182713 0.95682498791837544694 1.0420568930450460066;0.19597302991182638521 0.92547646895228441455 1.1917954252042328722 0.18057276843741668082 0.57826436809054138077 -1.0187553187771096752;-0.57153524095107943737 -0.93394382117577590119 0.50841339546914854353 1.5871791932543908299 0.34078917151524651397 0.76963172556726489049;0.0036676432523421592657 -0.4198233520077144787 0.31089071882600399777 -0.48412786808996161048 1.0703467858901158927 -1.3766350074624669197;-0.090361516226836663401 -0.55311727356444650994 -0.93394256487382854015 0.60938557173365537345 1.2508275631343346301 1.4341909203444882515;-1.268067850596106938 -1.0269400356225220072 0.64240279412509970758 -0.12088670349020104455 0.96970394452314534472 0.052587838371550878203;-0.005505196980884665553 0.82752209105768570474 -0.39656754558470785899 -1.3601578448471352001 1.0554707226274142595 0.041423889034776457951;-0.35966118929293022788 -1.0464176119831711809 -0.48921387671012461773 -1.2378975426184051223 1.1032064963512779876 -0.18282418179981699269;0.50081177917382324605 1.8129244257055570078 -0.79435235976285067938 0.37247582932477785178 -0.84112197737318528112 -0.41176050541034686647;0.67771714059566801058 -0.89879486567866784252 0.38437920892389076943 -0.84264947012946356253 -0.56908000961775395687 -1.1798245292343783053;1.0203050682588628018 -0.55704213593975127061 -1.472365212149777669 -1.1185086898041833869 0.035384626974511376729 -0.45161303297331772955];

% Layer 2
b2 = [1.526109076027708733;1.0649210326331546295;0.83375108371959816278;-0.44535098673023137961;-0.32632586420587567089;0.15526290843607973291;0.58722984111140297259;0.91351159517877633665;1.2774914988348604616;-1.5240010347871610907];
LW2_1 = [-0.17432540748118119378 -0.047958901781944840437 -0.06011140362558262118 0.38182100422003140139 -0.55387453891567162145 -0.36851284265507899818 -0.2468290205788228886 0.20221660008697356359 -0.58049771317303577867 -0.11960840521129302572 0.13513051591847954902 -0.77166541950716738274 0.15465558706898968611 0.27678093545796261798 -0.1137385742266412425 0.390514816393695674 -0.024125778014221169882 0.14245511296491542019 0.47447210627506120062 0.21042001326579914955;-0.19177012656156686154 0.11594810073778774595 -0.1616837141293165081 0.30784908024899337864 -0.041351299102551426767 0.20561793420921822828 0.20445978038704398783 -0.42778312811037738639 -0.29858434289381796667 0.16201553074013902433 0.24633184924508497171 -0.64823731227825487355 -0.15049730674943662123 -4.9589450993686680011e-06 -0.010764051782472000562 0.41671288446671567174 0.31495424402096128258 0.1695356046386263249 -0.23846801220277846767 -0.2965788221207156794;-0.2687480193394186645 0.031721446429624815255 -0.370357429936000071 0.06850648805024181498 0.34244277252191540617 0.14631629195621465023 0.13495419827391572087 -0.10540420813792288068 -0.14773355574952212743 -0.30551955909502814812 0.081952335262528000492 1.0317329243513493342 -0.22220502644380743518 0.19252158884452760801 0.20208694073216790232 -0.21331225749619250887 0.18516254166379725321 0.28660706590359502632 0.33413489829753301175 -0.2577487557583282296;0.58596296742414100134 0.2481737259217964009 -0.30403271348184718326 -0.32855869699077228097 0.29511606193262601705 -0.2671766932444076259 0.33711597386197850179 0.22411201985216752663 0.21895581331627908539 0.10545029405010958312 -0.31570329026260179894 -0.69437857723628604312 0.32495844430369119626 -0.0003125380608455171098 -0.11719254597629097381 -0.46727644522548450468 -0.12055035887598723743 0.077335462257652476392 -0.18446487494597216261 0.52807591857219093878;0.40906695203958370888 0.34738472204343384675 0.85835112927081269607 -0.25679211060399370625 -0.27117381270922763514 -0.093569842153163565457 -0.34879039240330045324 0.38581651386538995396 -0.15038855743483708904 0.18988143585438566063 -0.048503642774652910852 -0.41027732283638501665 -0.15800387049521699701 -0.1160036215396898357 0.26812317362141341315 -0.084916629886561831309 0.016538027011345726724 0.29071474646103384609 -0.22903792400837938437 -0.28138655399755047037;0.090937775791029226702 0.36340610116595351009 0.39724553006523716236 0.48829291335076197011 -0.39541618414312901253 0.041822861565209916435 0.24133992023762812495 -0.55141175312117141072 0.018792318401628888697 0.49349963678741565198 0.23022837303820606336 -0.22577913196195628642 0.056063811918339666318 0.54456459052894967687 0.10504908895900499921 0.18876561061590602097 0.22084589170131094238 -0.29364419437543276548 -0.58565751341080984904 -0.11140430324258072947;0.079873243219380718472 -0.30165053758484672297 0.59819271673890495045 -0.11860268339909550706 0.0086545709500016592547 -0.11243410276420738592 0.25028818596863577906 0.082063799358851760579 -0.35125308708179048267 -0.098469238047134283187 0.094842883151134885211 0.5851891621468391369 0.30771205634490322867 0.041210126521811704658 -0.34126279020579020074 -0.15096067377168223556 -0.29942728949976443742 -0.35902036335061582317 0.53832622169037236404 0.24414581918786171233;0.22464832750157343044 -0.27804669248241564716 -0.064395758977459971462 0.28076576686473159183 0.58351114259749026214 -0.47325302256026358094 -0.072978949331536493994 -0.16526221308497823781 0.26732686988286213925 0.036542657549402147998 0.13004114732374544294 -0.036057588598422687931 0.088884284733049753746 -0.41820272944816133665 0.27334886708591754623 0.44642033361167138272 -0.61512202767294454908 0.011025679377873565806 -0.11688919428201854922 0.63649971165187957389;0.3712324224255694749 -0.18042203942433585051 -0.39473995225061986325 -0.24311372086155186301 0.54939346731640104071 0.1693694195591995133 0.40018986505934928122 -0.68628008020794961652 -0.24803466946190133591 -0.035355441136251906931 -0.12311410999102989638 -0.44178395624112770657 0.50893735964133057781 0.4527749617668807014 -0.056763191461971479468 -0.44118220507589123169 0.1755019112146815885 0.31874386252848263545 -0.15457890150352940339 0.32883719886618106854;-0.663050367746172431 0.22200282654992103959 -0.2077489927931075453 0.249196659072482396 -0.28562881745081242224 -0.65284937614417226648 -0.025417892993220919662 0.040831778710354052486 -0.27356981571359029193 0.23414828785544203327 0.070113359283588666537 -0.44441787470395227588 -0.1330253589259840219 0.19862286469246226428 0.076199309539992876594 0.075114014070274598422 -0.21728021744633554957 0.64368375276182709932 -0.52999211726405015543 0.2793984534368306738];

% Layer 3
b3 = [-1.9063838945472426634;-1.728507151848390988;1.5979485145419063397;-1.2175418961968056397;-1.0107477337886685564;0.98444311301560449845;0.69411428458239676775;-0.2903152611954715745;0.1808153707467633764;0.11408767569330355296;-0.1263942201145294153;-0.38667624949802820167;0.64265103347328855765;0.5480787853321258396;-1.0776076724743175461;-0.97330733873487496055;1.1919600927169955451;-1.4940538691550464545;-1.6330545078915315038;1.8828205074437867061];
LW3_2 = [0.29475914356558857721 0.27485536880798616677 -0.31536657843728810313 -0.24158513316463112175 -0.65010059012200538398 -1.0079446496607067374 -0.78317234921184619711 -0.12355808983193310169 -0.84521889903048708081 -0.58094135610961028515;0.59198402059450083712 -0.11455509726073880017 0.59382896210090541089 0.29085163283155984759 -0.68503856905740012628 -0.43889458964220462445 0.23050654193322275831 -0.79151368227680773959 -0.67076562392396843482 -0.12189371510366887874;0.1914431501049337625 0.70395524104028983636 -0.63803328050729801735 -0.54526193578772619297 -0.026836236442277509179 -0.53241233000975729528 -0.16272093142933993781 -0.60041324371651316749 0.87760910361244504063 -0.56396086026978353711;0.99714630285232597195 -1.0106772993778767589 -0.16103530717582600906 0.29003327762153757741 0.58211258529983522791 -0.58145739334872759141 -0.4724557667024833485 0.11571157896598378845 0.21621392682102880123 -0.64004144498011605879;0.77048226814918385763 0.10515901635880786635 -0.40153600019008234279 0.39890181259608825659 0.66312314824289930737 -0.61843838436102982481 -0.65505285027861082092 -0.23027321254695182207 0.96807501215744906631 -0.51164923907155179794;-0.78319396621261483382 0.45608435525488855156 -1.0168845217272159953 0.69556624898039465243 -0.33288073295027448273 0.74944179786211839733 0.47621783709341941604 0.10375186928608795545 -0.50245454611177886584 -0.67368524477817071094;-0.78387236647890046193 -0.39890287161725829224 0.79624897345729739317 0.092898672018386002636 -0.40955557905061990009 -0.35189408579952208278 0.65806418374836606056 0.67067433714931179445 0.71923877636198763064 -0.63041114635470729688;0.47732023552704216929 1.192287469217041096 0.022785984623269753963 0.041339503500244637046 -0.44849671589335654565 -0.79357689090989846914 0.67181745497789280286 0.77385688262822382999 0.44088903588121319821 0.58595142834513125329;-0.33766966804372638977 -0.69134545128599400599 0.74819861559242129001 0.30494880773917149019 1.0026432618674456787 0.74359323396283483198 -0.31360076267078440537 0.40559465493876323272 -0.11842130245053217319 -0.023891391102156947501;-0.79411300152525166052 -0.17987207068209554173 -0.44096536096148064576 0.45126576222553149709 0.64378734236798818014 -0.043550556688904652758 0.54430586937534874981 -0.86569257115154396587 0.77399699654849463126 0.73452520549884414702;-0.0053933801322240456505 0.672450676765683375 -0.22235805995112989386 0.47864830531242247291 -0.55203284863369983526 -0.93417216851283402246 -0.52802096475531967723 0.36587203438089410668 1.0251762228024008383 0.43675426871611072732;-0.23879442122430152851 0.82114291554687790509 -0.047550555331289233452 0.42545455991608366331 -0.77754128249391030181 -0.80394232618269012569 -0.43732382060124441736 0.58400105303818772295 -0.94772693671663621462 0.04387829974900408353;0.33902502352448388168 0.2253985984467671011 -0.56401565565924161039 0.22211130383900376528 -0.61738761860841651075 0.82122458965863376346 0.77229982850359069069 -0.72016376991826458465 -0.6561736431498260691 -0.36998392734061180676;0.61253198272681963488 0.41137082451756845636 -0.79184204816269621041 0.68513958616683767744 -0.018302454918115364235 0.40909996292596595424 0.66363744850492689675 -0.34293828579664636935 -0.68867699825234474087 0.84840525575698089167;-1.1150945174546140759 0.28732632659555523702 -0.42633822888679101526 0.18242116986734957518 -0.62662841876592834112 -0.73311238940269374265 -0.057872604327782357914 -0.39832321130699882561 -0.58046936461312015343 -0.66536579273933349477;-0.78157700207900693279 -0.41263300562191224108 0.77575937996136945518 0.30545494877403350786 -1.180915088200173102 0.44650960328354766249 0.077404089243755289096 -0.28400076404362301075 -0.079233202277753239651 0.014240815857897775806;0.17700433126733380873 0.77036314837167496616 0.77979718003321230047 -1.0102529910056312623 -0.76723377751594179497 0.34320989466128554168 0.019469827167448224003 0.39752377990328502388 -0.46159837887078458696 -0.60330856781990593873;-0.22012425300301705078 -0.68002991115695632374 0.43546432468353590828 0.7336730091425887057 0.26058311628559849282 0.37885962027676156616 -0.98799556709149594091 -0.45012488949396661786 1.0159342333601690811 -0.36663188138696634066;-0.044851525031870169424 0.86700623015980327057 -0.039050884773450734999 -0.69788908056807219538 -1.0300111453948572748 0.15257840118562271403 0.35590218421591951481 0.4991904563371831749 -0.84640078868622559138 -0.52095434156395126202;0.311869029251062857 0.18209132675274614099 -0.70499083602656920089 0.027760455966311395337 0.57618295120511830998 0.12885793821866137199 -0.35041140660268710327 0.52611527697369830925 -0.88274669560241825206 0.69233390078079315444];

% Layer 4
b4 = [-0.46977126364284016447;-0.16847718864165564523;-0.53189495237988326792];
LW4_3 = [0.021184668555647476196 -0.27495011682034931066 -0.070950855321352271354 -0.46113397251356874618 -0.25161914947217756122 -0.48535148851595583119 0.0031915093995112083294 0.62387600944206278442 -0.67598460911097513204 -0.34100144229342876923 -0.069666777751558633947 -0.64526149571682223094 -0.27226034295843837274 -0.32942068588325418288 -0.35170898219090834802 1.0381769450227498197 -0.21986533435241309431 0.65856021922495411314 -0.15102776856822150431 -0.29907149533254012708;0.19805944321685003962 -0.79968065117094144778 -0.64440522597759064549 0.48088414357137443389 0.51748896094519214461 0.10978972246780528688 -0.80267205766275928625 1.1791781473348446063 0.10661851708944344863 0.24173962784907954138 -0.66488645311406135985 0.78455170866601242619 0.56664649579251680223 0.40578637846111759169 -0.70301298984193660857 -0.40949489224341822924 0.0046709936537063781112 -0.15855145455529734422 0.21831082610827523549 0.09929484993594717146;0.32997205480849761683 -0.027855219820986515389 0.97852734425408316454 0.69247963355373776118 0.12469417942706660651 0.97362079271045942619 0.058330764097734896789 0.053295281391165655327 -0.76407398115445979148 0.17960042434075917939 0.45038988195294082928 0.50317623223229768215 -0.30794005808689728365 0.34013085427540934447 0.41678974148728303861 -0.10759609321550536731 -0.31761147501069963983 0.4079549584389483563 0.055459002620788067084 0.64639653650148221065];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.03971245135222;1.63024945395807;4.0745189985633];
y1_step1.xoffset = [-1;-0.59449577331543;-0.240569114685059];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
