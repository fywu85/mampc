function [Y,Xf,Af] = nnmove_09(X,~,~)
%NNMOVE_09 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:11:21.
% 
% [Y] = nnmove_09(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.40432655203162;-3.05772726649525;-1.50337830487775;-1.46639144081691;-1.16707092234658;-9.39260604806797];
x1_step1.gain = [0.701215936936036;0.351273246254837;0.707661234476445;0.774842031884718;0.735192523401183;0.127145748685667];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.6623653622075296177;-1.9105459775826154623;2.3206684117049749538;1.9708415032598640693;-1.0929872039985761845;1.3557536958259388538;-0.58690921208670310261;0.59421202261487404694;-0.085827026291279640002;0.24152026834429454749;0.13587734096875961343;0.16483689159811903968;-0.26777969539753071482;1.114262960948311898;-1.2673010232264279029;-1.2861139495621403128;-1.168465362819115283;-1.5042428553251536716;1.7688339050977177624;-2.8890344543063743998];
IW1_1 = [0.39861316040762623247 1.1386874377856144314 -0.81988803280933975071 0.16673931071481304378 -0.43918417947692517389 -1.0076470062016940066;0.92808628943633819652 0.21489157065198646879 -1.5655979551242691361 -0.12625806508120374083 0.050430647949998595736 -0.09212367458933226616;-0.48002157556379049241 0.23750443644431901147 -0.88508706719332330692 0.10805234279693824717 0.017225431718161932082 -1.3583989790342516635;-0.84198664377290155514 -0.21308590460470716588 -0.26898090163826932075 0.078393449628944775198 1.0462387297875268555 -0.99853276390824363684;0.48622840811432743724 0.87076942114564670483 0.47953798692027604922 -0.078732824734707079761 -1.2134850578929767817 -1.0320777706385368955;-0.46857720733368701804 1.5774728621019087349 -0.056792962971350849366 -0.44979209154371257995 -0.58947471407579188352 1.0565786186696093374;0.48821624148286812961 0.56047100225803336837 -1.1702521367686613551 -0.96614130380351570526 0.63489089742112048143 0.56810364409828384424;-0.92799946296289381742 -0.0067285357227066470293 0.70392871740501283817 -0.62141761927904592966 0.10979627747312978303 0.43683459850119793488;0.27483333015303113012 0.42197087908649288934 -0.19684945303570913766 -0.14480953436018675906 -0.73634759900222124251 -0.77396265685467047213;0.51351053750464537018 0.077160235461020923453 -0.64616911381415964577 -0.28687420291318727061 0.48190842158984237287 1.2416948367129987396;0.35797855241429898943 0.054956944568573973253 -0.53935383635726652507 -0.40739453705581718523 0.089176851605388143818 0.51848556455370597984;-0.3765919611377784304 -0.57813296930055202427 -0.19692882389871260718 -0.15613446164968891594 1.007026785995880136 1.0747119968085585562;-0.47356177297032597817 -0.71977927374233841018 -0.25603964741705576014 0.054359059689201051635 1.1094004687323728575 1.1646934399277713013;0.073561802403718692944 0.33291372117223172467 0.9946046664087667688 0.38467871905767819785 -0.62895006096006544904 -0.42837201148245512838;-0.21436419124722227991 -0.19486519240531516295 -1.2663048124331073296 0.61106689893429833038 0.77345419462465081484 0.99957654129351192207;-0.37431295797068353526 1.2699028014650064478 0.4704600048535562129 -0.13176880795001785773 -0.69197402153661324853 -0.082637518305460525014;-0.33364680037988997396 -0.26739983518286236652 0.5805458932280667117 0.046641004485106357658 -0.9611283480417401881 0.77432877291592627778;-0.47059960809901102419 -0.57701748410800202116 -0.60430541075308208399 -0.50932767073796458845 1.0131381117413373882 1.0141360695316381513;0.83148373553521148782 -0.55277251808440208691 -0.42717192542323495497 -0.16998706942043845247 0.73855728276341925387 0.3552987845431834768;-0.0058032388542312990376 0.18149859794030570592 -0.52640302898468416259 -0.068273007871471655394 1.1924317033377624941 1.2399901184695811818];

% Layer 2
b2 = [-1.621924010121097659;1.130173423713539238;0.72260546901938260689;0.14048315121678381368;-0.69411299458490938186;0.032696569969504665765;-0.34698897940920925276;0.88353950000513026275;1.3499847565178393349;1.2828119969109257337];
LW2_1 = [0.51304757938968648112 0.12276225265067398917 -0.5176044909451675835 0.48488999292136636399 -0.23431254143997271022 0.28731515349143910143 0.22856494881945807474 0.24112355358125114879 -0.8523175427774871693 -0.081283269617325418221 -0.66115633062882850357 -0.74654658729969336495 0.77588341022184115214 -0.040536641015808644317 0.21025472318383639503 0.07997524017250959294 0.35830470008517467662 -0.062805871528622561617 0.29218008693881447613 0.25979692657667924349;-0.34763267405558606615 0.014613887858550370438 0.049219831649048348399 0.10875980823014880228 0.044765679005990079153 0.0059258171334191037799 -0.078072115285241869276 0.037513983550317396565 0.96534287868279511358 0.11776644166454229568 0.020518554391268810366 -0.40811521913736598099 -0.011569291778222389952 0.24958822154574056285 -0.0063255129630181783709 0.0026119007661734414301 0.040763926789217322377 -0.22189379601676248455 -0.042737737735248207405 0.34016775223951623008;0.090636164905958868654 0.0014915367368763235347 -0.11186416348096266116 0.13464360933781824303 -0.1569183047669271136 0.031230379525278302577 -0.0064889786504728113117 0.010849110235561378046 0.70097687983593537364 0.088246144978856425056 -0.058017302362660977399 0.93004903891502066493 -0.038739248863011159496 -0.035344556831632838179 0.0079180907576066258957 0.034451107687050619433 0.069144886819094197872 0.41937429710761497947 -0.091224387557295949502 -0.11015184643795578046;0.58593124520634598529 0.10451032627971655609 -0.26231415328769208672 0.40576803301245867317 -0.52624171369014238753 0.20051736086744020859 -0.016557302297924542112 0.064952120538765312219 -1.3872692928540959478 0.26743618514778605411 0.084305892024321330003 -1.0161277367559289342 -0.22685265603767645892 0.36455662408763561677 0.037259691748690246249 0.16962712354863096476 0.32452030589484875955 -0.29748798665318709755 -0.56815315760390150412 -0.59813883849880344901;0.22381549942733763858 -0.082999362799780235234 0.077319063292612677518 0.080733857588995830423 -0.051471328154926110354 0.041628614327384065585 -0.020880789356748499092 0.021516923154205135071 1.0428126771049068822 0.15250935801080417464 -0.088256370627329105982 -0.85660485123829643861 -0.15941226169799124768 -0.097412444252505642206 0.011168847677603545299 0.049291849892896040519 0.071778693188383424495 0.14221425255777159213 -0.030012312315942063501 0.026888597340310325251;0.73278412875327936238 0.59100302540493399039 -0.31127809211541307421 -0.64201176949270444272 -0.43168098383925646022 -0.32212358708869981427 -0.19449421794856164292 0.19428551318043754681 -0.74552146096792037966 0.23927176938710970067 -0.035923710718803153474 0.44276754265226486718 0.27673881027963653789 -0.27357681199293809593 -0.011444885347404275613 0.17678768796340435521 -0.29392574044320474158 0.88091882615186201111 0.62509155176467789961 0.46249478114821562791;-0.075201280978813164757 -0.44871326040064107854 0.13837877445039797886 -0.32412386544737858962 0.019211300972942008808 -0.27962152558267033831 0.019667025054193938705 -0.10091971031210646148 -0.66492251208134978135 -0.49445827492300825634 0.32317585351842365027 0.4500672266753009132 -0.024801941377892430113 -0.82140332574814500788 -0.06118797203815611041 0.021299466170635626694 -0.22405696030986829714 0.41942811076628400135 0.63294956411826330811 -0.049692593348817440391;0.13032946244161294769 -0.13862438124280632157 0.056708210002448328213 -0.084621404975950345606 0.10134866606077783113 -0.052215476870509952567 0.008380189351037729828 -0.026565201164969166892 -0.54362978114842308575 -0.041245983687424846165 -0.11761233522549366382 -0.87365702179154014484 -0.12726141895102560664 -0.28888226229013552748 -0.014434794922428639471 0.024785446256734545989 -0.057876749202327541777 -0.094290570985226931922 0.24014785908335037345 -0.13249990651963436394;0.46897183528506969363 -0.11747331083908989224 0.90119407096723269657 -0.34863037182312506257 0.34464371214414324385 0.23313864497785632968 0.0020207193861531964722 0.10166314640597631791 -0.90825408173762101072 0.34344680427898927055 -0.32709658660972268374 0.66895614384077295433 0.31762980340778534938 -0.18524010145543592931 0.024731096054844053933 0.088025670994651694645 0.055320455338035728898 0.22506798100421482323 0.044810830821674009494 -0.10967442570203186913;-0.041563971761909332403 -0.10056864376604709999 0.19544549045875109217 -0.34567413726897155968 0.2137660613615380012 -0.10794610545009235281 0.040332483637115959518 -0.047990441421774970854 0.69273705151907238875 -0.2487773803748985213 0.11359978645186018242 -0.83051508729590772795 0.12030483929808447052 -0.35700112593245270087 -0.030835581285357422515 -0.029111903607659674054 -0.18833815845275603262 0.12439535303467036398 0.34160294110695327285 0.30892052810236614313];

% Layer 3
b3 = [1.8613269794701428062;1.5875782117168959484;1.4914411467653334586;1.3723095522391441925;0.98109181836484415928;-0.95814310026237714535;0.47536612064913336129;-0.49044089152737424531;-0.17784650692582804066;0.16228610741174967491;-0.0080113695500158201707;-0.0068788406648577198749;-0.51291848569650166922;0.59342838002360631666;-0.56476103778910557995;0.87571093377589204199;1.465947773689499023;-1.6720395979682833865;1.6223479313820039494;-2.0591035310772021205];
LW3_2 = [-0.38925534458582122799 0.28329236819782838142 0.24342230257172473018 -0.057907009238550195829 0.89212748165966915259 -0.7989112380437144445 0.14948644945377892457 -0.19922120500610485117 -1.4073195356562491209 0.54297406417483751184;-0.24457700695186290751 0.17838655703732322899 0.087934029315518802417 0.20785557499758139377 -0.87016686648060193043 -0.47735239156609660105 0.94865172369291173027 -0.031208709060673581887 -1.0384840722955210879 1.1276054819462850709;-0.57977031861747896357 -0.92278171979814538339 0.44881904009472156636 -0.63964021919563385232 -0.32625307962528765637 0.95799398727107998308 -0.35438556778731672425 0.88568213223522807009 0.80547364248527442143 -0.82079403663622618748;-0.77166587294229949112 -0.53026214392254877872 -0.29722493167968688788 0.047994175507209059506 0.3555238945292547581 -1.2628821497810673868 -0.32418846419460328745 0.08976102881331293748 0.4347484476368724815 -0.70484938910971839388;-0.34238619191740110592 0.45333325233994142822 -0.69027104914575398986 -0.40645331568200449013 -0.44289797689456456009 1.0000158781706462996 1.404744960521058017 -0.41545378408383643043 0.46821331818306782813 -0.23347876703975914414;1.3639512110339584439 -0.38722243650423254779 -0.23723242717550704906 0.59060238392030117716 -0.17486461743297707083 0.87270687927958778829 -0.25094819539895774074 -0.42756589859828181277 0.15388383087932860915 0.44607687250745109431;-0.74362011125650440135 0.19993209217983068382 -0.59607183250798156937 -0.35605755767655228317 -0.66641068317924634368 0.18383028625140540591 -0.40340890321624511827 0.1155314782902125692 -0.79678644089778039028 0.56224906766912252642;0.087518949017631991749 0.044483701888482558851 -0.0041041853320411781844 -0.71469951305301548938 0.49492049263996745756 -0.73353014355302059712 -0.17137085806429427914 -0.37745704715859590417 -0.068276461937209181885 0.60228398231097368676;-0.79866892007723966351 -0.79929868151905281159 1.0655482687797470653 0.11193228179506031772 0.0028026664897986162603 -0.18238263171442531396 -0.7351082784454934238 -0.19386559584155182989 0.76631726106893083283 0.31613576928677949995;-0.18129074526602015349 0.37085247425905987217 0.73098457023138929678 -0.34420225656890074406 -1.1548762255848883385 0.73448016927391535091 -0.10607885954393582451 0.26235973762378816954 0.11714852799165569042 -0.32760804849776015146;0.19236065926748144306 1.0475394097634902479 0.89794223268089767842 0.81893120634856164664 -0.061461258001191801381 -0.23378563326525630961 0.29305035252966327164 -0.32251923030571744144 0.12301247378328543369 -0.44059521272942658854;-1.3656887696376454056 -0.77680011133763271491 -0.63852395251073268412 -0.56348376156320456598 -1.1150119354275296324 0.27736542078888348772 -0.1995330586320238353 -0.16082391718717164997 -1.0155618123988836565 0.021034618753534996272;-0.32785129223717968117 0.38929530806490614259 1.0221419049081619246 -0.42982533205738038262 -1.0371473185366018033 0.084852277076642099174 -0.0043381613157597925454 -0.18360864624968015191 -0.1113863305874920745 1.043234684357448927;0.31668064250861255315 0.60599162419973862104 -0.059956676757384017029 0.13184198649338482734 1.3417408970193005491 -0.55968610434916166163 -0.46904866428879565809 0.46734548554777560758 0.87147310812541944891 -0.56796275028736997736;-0.46470029575491217377 -0.56221588710091130459 0.2204088393379280697 -0.53117214885575569916 -0.80201824284281209021 0.83660438029111161562 -0.89162688179104054864 0.67560458162191072695 1.0177044291499328654 -0.46576165066985658614;0.9275964685154165501 -0.30950235265673375906 0.22467006441331818789 0.7292889649927956075 0.54381263385902434138 -0.11834072236522039101 1.055622351809087478 0.29743414886055052904 0.41390627143136682342 0.33711613382339478129;0.49075309945244871557 -0.22832278915918755025 -0.25468843615899033894 -0.59346662903442015669 0.3660327097118559192 -0.062887615381895203837 0.61461164454645844657 -0.53533735656939362979 0.29003172602757670839 -0.65676949176952015286;-0.56155866951199395753 0.69550597667848257366 -0.87310578297658048008 -0.11964616019519262735 0.023509555396589772863 -0.075672744254943483111 -0.78327655843631893706 0.11664910368317552014 0.24678494585441698717 -0.39965160747211242454;0.73496751193543907732 0.8187786764528286465 -0.97104646888530454785 -0.23927831272029512211 -0.17690610749183990902 0.27551772015027214957 -0.378779695543940087 0.54703997149415739543 -0.21755629938835238657 -0.83705117820267027628;-0.17103214723924695106 0.28741195095987925878 0.85024634243544705559 -0.71475359472637745029 0.47008852408858320393 1.0466494995468569318 -0.56876118890043170229 -0.43737490792062166944 -0.08288918696277242093 -0.43820892236332875669];

% Layer 4
b4 = [-0.34597634461177634302;0.42530740436736069743];
LW4_3 = [1.232338882321178275 -0.37237332666002770365 0.075944573680354079959 -1.1234190571257449687 0.089083986654142674477 -0.58043418200806240481 -0.31537224391770196652 0.15004284382510355011 1.124979355647461654 0.48521188915203450343 -1.1145001036877515421 -1.117323313409195773 0.67161999608561129271 -0.67344343346988877475 -0.7408922272175920698 -1.0327030586815579838 -0.14530917086572719965 -0.29842721150827355991 -0.74012284471583600354 -0.83499233146028561947;-0.49851101831013711063 0.74291799108395029094 0.7055329728086779939 -0.60405084796293884164 0.027953269834361291202 0.44840479974460117907 -0.68730019053192792367 -0.16453790093268669259 0.40697587022741094076 -0.10264372762630027958 -0.092204163767305183375 -0.41889414353973697391 0.85304904269782122483 -0.4095609348802269345 -0.28562195830731074153 -0.80960619604518246906 0.15228824114458411332 -0.50405492656180883593 -0.78426616762765499757 -0.041702855850113344782];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095924;0.194923443787716];
y1_step1.xoffset = [0.0999999999999996;1.23618127926911];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
