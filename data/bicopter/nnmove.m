function [Y,Xf,Af] = nnmove(X,~,~)
%NNMOVE neural network simulation function.
%
% Auto-generated by MATLAB, 25-Mar-2021 13:24:09.
% 
% [Y] = nnmove(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.24355768039241;-3.53376672832181;-2.56718167531197;-2.90084248438985;-1.56985695231343;-12.5072362628383];
x1_step1.gain = [0.480889821179081;0.268321963242718;0.48156689683452;0.387989960261712;0.636996546762678;0.0774614676732789];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.59428897884861831;1.9457534238795253234;-1.9994032094055040893;-1.4205310950808811565;1.0636424217776037082;0.097767547014664710203;0.40746253929625009249;-0.26655056993843972979;0.34080073666664090215;-0.34085540159692273576;0.37926822981202334972;0.91061915521873282309;-0.43621465282874527514;-0.64419925175721237665;-0.86847984627721552808;1.7359730401834727598;-1.5844870054058859399;-1.617510043733386027;0.54528128509747564312;-2.6799627292313297211];
IW1_1 = [-0.078827849854219173009 0.68093258806626510982 0.256402132995106391 -1.3836923105744594054 -0.12436749206037023274 -0.72700024755482195449;0.027261942048501488362 1.261526991843071599 0.60715566672951493121 -0.53619659497341365384 -1.6561113806717737695 -0.53273406016171820365;-0.26414706274770710648 -0.41123708570245937066 1.613269372908463728 1.6068002791862174838 0.85286213846928471405 1.4312034467942036375;-0.16153667855296530154 -0.14189371911956177863 -0.77313698325408175549 -0.60641339598702981295 0.78397487272143429049 1.3504886635001251971;-0.3793838907080160916 -0.54352039082179948171 -0.9923581375795211823 0.58408868204070485408 1.1231040294556842163 -0.52966288902026081864;0.044231037955345928192 0.060175854481491673764 0.03578722653182504071 0.03408785653377754965 -0.091646877367449156027 -0.13702969855982180536;-0.16754355298673159758 -0.10049754534548430152 1.0768185099581590869 -0.23702630427514073674 -2.0467451263537745909 -0.2482006165014984389;0.19867663846871533306 0.19464091727816643096 0.53389013261226170304 0.4428415180853519928 -0.3867454542812022722 -0.67613430818513520215;0.7847944007006923961 0.70215445609437365793 0.1670817436263319633 0.62433828970896287913 -1.0518211819827500975 0.24021381412911116393;0.3870258127324562869 0.70088958947333412919 -0.53772458199277606283 -0.087259957039686364411 -0.95609889924786040094 0.37052392805351375138;0.48517509473376707607 0.55245478291977756502 0.46148830454978123639 0.89378552015008394527 1.9578047504170619231 -0.19912848821967782387;0.93618859512639884812 -0.14887399362381883994 0.73270682053365865372 -0.56073098104156693378 -1.7330319883997657993 0.53866170783507583142;-0.44922365590296353677 -0.55214138356688269305 0.18281890754616136885 -0.0050687874900553989838 0.53784993540216108343 0.81163888961630048513;-0.50441922415804585356 -0.11315890719297827527 -0.66453460786376183922 -1.0041790022921412984 -1.8334664502788038387 0.72309865989014654453;0.75579282972207828539 1.0326009412846546276 -1.3396263603352656091 -1.2852172599114697338 -1.567880310281274614 -2.3555933641026838288;0.54545835807769293968 -0.72924817671979080824 0.25460762229614930519 0.44859970467051740739 0.51403791287089406481 -0.40192998106361349508;-0.12096923759696157075 1.240509964463262893 0.36978873593500732886 -0.16010140553446097766 -0.88048162947730346239 0.07951430757584747322;-0.38805795769281931085 -0.26982894067967905238 -1.9046575085817698536 -2.2515774195268267732 -0.096852456867484754133 -1.3518583297124440179;0.19301452083704284668 0.26305726584305033633 -0.33640058859605553865 -0.32201753420221379542 -0.39980780413128841344 -0.59790834528043379503;-0.21358983595349792517 0.067008250608725769548 1.4875597507930964358 0.86825919872430612489 -0.86461991988193553915 -0.41147699055084274722];

% Layer 2
b2 = [-1.9043803673925190356;1.3259760175458943365;0.16342619437510413904;-0.92864578241169171147;0.58015697814613698124;0.14853015083529061413;0.22527868319175242684;-0.59103412539352317978;-1.2124987149595909397;1.6437993259114531686];
LW2_1 = [-0.072415191720769683803 0.091173324574020581101 0.023973737331242167548 -0.29190088711045353298 0.0027656670064691094013 0.88868606649237436024 -0.0011002192397893465186 0.2351601822427402122 -0.049983669044875785048 -0.0017458742950617704964 -0.056928979944251667522 0.0034671800473581749352 -0.46381889128891573559 -0.038286234396573338989 0.53086100116836842933 -0.018239249276102331015 0.086766833985964117448 -0.25653439761085700122 1.0790401610786131137 0.070196643843734488066;0.38900179366864934272 -0.01996073753164636852 0.72885123494259118626 -0.25564644551299886555 0.10109412042091628359 -1.1866932578899762607 0.14947827921522099937 0.49953820610152555037 0.10623419255508735615 -0.074065381582124237281 0.14278796407257748902 -0.19269415423053534719 -0.44427855973174085191 0.24206491636677757162 -0.65416872324529062865 0.95815032122770649181 0.27608050350332768996 -0.096361351906610506757 0.60970482177019746928 -0.6604995288888931837;0.010617976188903649123 -0.0019078431561289780141 0.0032116471880552222018 -0.0067724261134025284803 0.001464788211187342858 0.21904452681420252813 9.4935700879824147058e-05 0.00029754656278263607238 0.0028037768542028655705 0.0022543678793231110291 0.0023601289099232161672 -0.00089054922141213583263 0.011859743852292485566 0.00051706964011776195694 -0.11425377027299744859 0.0025722661476600804792 -0.0029459709360218329713 0.025534520170806332406 -1.4436868044032207248 0.0004630815497102879299;-0.24711058421124484918 0.20332209176522078597 -1.9863399967819548309 -0.0091197963094632617659 0.037633427990277155961 -1.1721921328466913259 0.020696386325354972774 0.59330437408030256563 0.095170325011137660298 0.13885790780052531534 -0.11512156771754675222 0.058230245757133897166 -1.9122796882762500559 -0.028056474699882507501 -1.6464794971551233171 -0.40660888988683924206 -0.036878627387947407468 -0.4305197691966072826 1.2972571841541449267 0.10639182558501442122;-0.24260524404966435363 0.090431497799263863002 0.70817632376839123598 0.064017093942221145464 0.040032227257224037298 -0.99053727065847818611 0.044209556216283626973 -0.081058444179491123682 0.50633252567673314726 -0.18684326151887914458 0.089090595831054886222 -0.064499098501034052289 -0.11449832067132292845 0.085493046395158464601 3.8064829525533472321 0.071493253263966521915 0.046792954805308192845 0.66746433289573614545 0.092415482501311208008 -0.026014813474984872094;0.47971572211936963637 -0.076618616549921872427 0.19700406186417063203 -0.23068565907994159625 0.062228169724585669087 -0.81896486674094859382 0.0088123334432152356649 -0.0080536273576911465016 0.12567388446687413617 0.12582235492464541315 0.1000319231834200101 -0.040864048228523922046 0.45279966221771683621 0.021715200153010965484 -0.20947409649044551605 0.11600023386966246131 -0.13626177812782955256 1.0073597598597532343 -0.50992018080249890133 0.047465881783658563087;-0.00049120555355417123457 0.00013266182392874590452 -7.3898411216334519203e-05 -0.00033836636154473229577 -2.5715396391022148672e-05 -1.5194843881727726487 4.8588984942890906663e-06 0.0029855467540798575309 -0.00015333604795702193615 -0.00010895405690805620323 -0.00016124053018134370044 2.8858088116934461545e-05 -0.0005617710650507735503 -5.3810333388296808837e-05 0.0029090690874974105967 9.8163495356790500383e-05 0.00027005043084874543868 -0.0012285855509738404737 -0.0262475945081499136 2.1427379272097625009e-06;-0.066594370512978617871 -0.15588265474006421374 -0.47401067983932765326 0.11924354910111810424 -0.050558639175924943721 -0.4529994889890631149 -0.004178378932335274909 -0.22479775507766960874 0.25056840440503236334 -0.31173923019700561232 0.1757832215449843527 -0.079271870077855396963 1.2871269750542586596 0.13395594726394061125 0.89147981940808374013 0.20803772195987202398 0.1968795671228186217 1.2719000291929503099 -0.67720798370437396141 0.42987624141613306472;-0.47887780400480517429 0.016187956568750855313 0.39978326466030122965 -0.0058118905876405708641 -0.10418259402963174487 0.044856306419328119406 0.0295071682700772768 -0.56737912685514080291 0.14815085387052459587 0.083130951183392212678 0.0017910566800730051435 0.047288362309601837674 -2.1044693291619003261 -0.0016855100000226909233 1.1675731917305804952 -0.86841626756858769642 -0.36814885375011119351 0.6867975145869945619 0.066737931367683647754 1.0649693675189861874;0.5352191348112863567 0.66659489174193120586 -0.49600789644926390753 -0.52978634446827443938 -0.022854636378960534182 -0.22003941238163898797 -0.39239825493084606878 0.48235325526534611473 -0.10240733682326874643 -0.25325481409101141539 -0.16172028882308750464 -0.20737224069616505551 -0.18648161782379088502 0.082616405124567471319 -0.41521524522746106056 0.17664980930539417314 0.066860960444113923251 -0.39862931910210225306 -0.2150006281354659432 -0.52099328217169249555];

% Layer 3
b3 = [2.3365869061787463146;-1.6186798478925530365;1.8374858560624687254;-1.4742140817349203008;-1.2509850169200005254;1.1572119839118111262;-0.68662667577728653256;-0.53649888908982823477;0.36043484967973032917;0.13358072868549242251;0.33088928282730356578;-0.38980648403001216806;-0.66714208572280386811;0.60566977048422321328;0.59364347023837416017;1.230604301649538046;1.215926093212280179;1.3146854680930748493;-1.3711031407017548744;-1.9551510844040185244];
LW3_2 = [-0.14539150454048077599 1.3325229556890942906 -0.79325058501814027512 -0.38532721963867172521 -0.16645028675456299827 0.50292020423398386963 -0.15962468618504388473 -0.20472163651897018477 -0.22599264660371767843 -0.53329977416198315332;-0.38583038510433953494 0.53719130368016565491 0.80043773657203853844 0.37173618217133863606 -1.002246644249905394 -0.18885650801795864084 -0.71656837135141604467 0.37958967561146944591 0.60139433323388458152 -0.54546704731175432723;0.30385284617235935878 0.13431908546077067634 1.3612103888899957926 0.12951492876158632317 0.5720482781075640899 0.56206929332029564872 0.11603285921023938354 0.96467473160830075063 -0.35113008352443336735 1.1681956225373666403;0.13333410594236094759 0.18146005542485782458 -1.0686711400256689863 0.44410017411830993161 -0.80462901257141283828 -1.1258801933991411381 0.86146822875502404582 0.71376428410555692317 0.5578535242150054474 -0.25781440781555453601;-0.17269320708517860163 0.11569932634249008307 -1.017732341226540882 -1.5107916750853309651 -0.54379087901009270922 -0.022548116429060002797 0.84915428779793444836 -0.94531256184394552022 -0.40726049784909135187 -0.3400654932975379352;-0.68084364488112947278 0.24871125924898865311 0.50922794195062859313 0.0051561637073511959115 2.4199872116868266225 -0.28508556728329392804 0.24013723768796552127 0.89257049684827971525 0.21758832861667057323 0.88198763180249573068;0.66486800194325534896 1.4227604194642649027 0.29882361847527277865 -0.15829903534034814316 -0.15076298265353571537 0.24151254509139330473 -1.7963740944961201773 0.13620485042038990575 0.16092087556435955009 -0.82229620266910619097;1.1004169267745669281 0.1434868417669989682 0.16134973738798324971 -0.26048984273782488374 0.75647571794365819908 0.69306316880157936566 0.84792286424931828659 -0.88224162604582601066 1.1284048367961589943 -0.86468086106868313756;-0.23929990872383605227 0.25162670429777983516 -0.087365036167831047753 0.0080668094198793564159 0.020861035498083588258 -0.1137218087187284038 -2.1331071862658097515 0.15914970112473517116 0.45920364605019181603 0.75750666267537558607;-0.12804729388711888483 0.29226891360648193929 -1.5065965424725762389 2.2237318386084714561 -0.12087065195827893793 0.068175231952921647172 -1.131715902862347134 0.9496619605804148545 0.19511499940871696035 0.4625065103232801067;0.49647341109427972627 -0.03222136666657971632 -1.0967217986750736891 0.7234187562607286015 -0.22290711798908161012 0.94466449900761617631 1.023181368239032718 0.38396172447916554482 0.75543877156100947001 -0.38254996902112359258;-0.26941445583652434692 -0.36247016420521921409 -0.0878262160823932575 0.095544253934480280477 0.052978907004484279697 -0.12985623927552938928 -1.7230992414520109879 0.22030012050225528109 -0.22711363098649159364 -0.1432876429814669561;-0.84539364385911097699 -0.21898340554057088569 -0.23978154546925609103 0.45262613964021258806 0.14725876334544685253 -0.31674927512362405224 0.71465390950300655692 0.65869617895692877951 0.36293148555288196055 0.30647638329985360528;0.4531575746235532165 -0.8076401039994219877 -1.8793723925424801191 -0.28469640644617183467 0.75898214104060290897 0.3117981137830048155 0.5202108714328056438 -0.56479342614623317953 0.46197705609036127106 0.0022529214529850142591;1.1084790425024817484 1.0357272664279968399 0.46375223281119909435 0.33804908524846921658 -0.50636757783907271335 0.52217489613298329054 0.65174192937575525786 -0.146917247266834472 -0.53118866658014840532 -1.040848303421834764;-0.063314335915544625588 -0.63393619627951114381 0.53847731123525988117 -1.2472949332556300117 1.5347293559668158114 0.02530577366620922336 0.60478480785888288906 -1.1340367783255016487 0.046815545296604282877 0.78892085948148538144;0.4000583192977549829 0.49045044992794589733 -0.37753767303516883036 0.84864105967506542338 0.41982065708863025577 -0.077752098784094753059 1.0842821283533592425 0.45824413505485922515 -0.64020164142502833382 -0.74795531065694187411;-0.14698941206335486287 -1.1560708018024306032 -0.5905615649923924293 0.69986873679642835899 0.65720231692902486564 0.3019623411441404448 -0.60188237173679548508 -1.0759336464921518406 -0.1431626776486088215 -0.10809083344208045285;-0.85667160199021696876 0.4933812370525698654 -0.77901901580430676919 -1.5444720745298901043 -0.25205612008657940493 -0.17556741218142635219 0.9345340759651212803 -0.29678232388930197994 0.73890646664165438029 -0.31746456642854736785;-0.38807946522744218854 0.34304355287160553933 0.97227989378653911778 0.9054883900465846569 -0.87972335298388182334 -0.20724953195630371749 -0.49902452760135118659 0.031333380726198130362 0.98010820488977223874 0.30443735019243389761];

% Layer 4
b4 = [-0.18759468733440656796;-0.0078304433532575389715];
LW4_3 = [0.25454038700864251021 -1.0828506044357633087 -1.0893015276274091718 -0.26822747654560047392 0.38381307638493689094 0.29049974358058144874 -0.18671922726475775889 0.10215925166675537961 0.2640585782931473835 0.27034913437239388445 -0.0033620860393004038842 0.35754989067575232431 0.35763828525881669052 0.71760502471999387808 0.30320242317875423232 -0.72771930099358828059 -0.017092703736623113958 -0.44246981806997748299 -0.35336291694000321328 -0.6056936925684314188;-0.55868091449852019803 0.16603718000820893996 -0.084105371682272417333 -0.0007769407251472435199 0.16697506366854056314 0.080155978218186263451 -0.86332604134670865026 -0.39201733121652415637 -1.6939280280549691149 0.091295504425524157122 -0.046511664437342281619 -1.8882638385409078463 0.71662665492630894803 0.16254948025890131325 0.10375880817162766445 -0.19589271268803246095 0.13674010606652955979 -0.27138172077662336967 -0.068506801995872848576 -0.3656976777439730486];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095905;0.114148049640735];
y1_step1.xoffset = [0.0999999999999996;-3.27208577788278];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
