function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:09:18.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.40432655203162;-3.05772726649525;-1.50337830487775;-1.32632633189706;-0.882733010962612;-9.39260604806797];
x1_step1.gain = [0.726937062841322;0.39800416843654;0.707661234476445;0.819300701824441;0.821005269415222;0.161198758900714];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.1856224358833942212;-1.8914871371224211138;1.7873013665058574695;-1.9732220356171794595;-1.7453428807146544877;1.0981625126440488494;0.96893256937939942208;0.047859333264173867239;0.19529037666257093031;-0.027670281088240971518;0.032480753846045033739;-0.27933605728375693333;0.028188035612104041239;-1.0541596555032586302;-0.89611149961531766373;1.0544780473682184851;-1.7307961761763575037;2.0577829860444833976;-2.3806096051289302729;-2.8673385013971279811];
IW1_1 = [-0.01863363491872060268 -1.5756465931130394509 -1.3056507288140384304 -0.32305547234731396555 -0.2458124116568567441 -0.99713131454602355053;1.2050853345389120896 0.77868826097836651989 -0.33268478802434076069 -0.57162082955835602505 1.256960114863455491 0.36216055316488077187;-0.11158809530948356203 -0.35015834052485983463 -0.1720597071079111029 1.212377920876059445 1.175028035001255633 -0.6578399434414891056;0.76085822310791639822 -0.93047178137490171856 1.0940168880933445195 -1.0050306200342622454 -0.82518529861252865043 -0.24068183691600733565;0.8750113812818495207 0.17181689584486095623 0.70850265891973485122 0.28760281442232166205 -1.3182372873368721766 -1.4222068062011685718;-0.80066044678405345891 0.17892959687831400117 -1.6229800284408031352 -1.2189946962034821087 -0.097676360257447220059 -0.048046736269914139261;-0.93043164368334918546 -0.19175579158108549405 -1.1242449096219457871 0.5289218705081623062 1.4712430985125499738 0.48124741459484138284;-1.2438285697165691879 -0.83420607485566411476 0.076026118560366146015 -0.19071071696699276599 0.6192922173771803207 1.0638784328749790742;-1.2652740041978030039 0.59371728556724190362 -0.070539232797559234256 -0.62886409515227703615 -0.07369400915747324754 -0.64988008498907146038;0.52495615255175698266 0.57699312154928938945 0.60282024768993092145 0.46150653962734400348 -1.1536310881786511207 -1.0284399588695167793;-1.3190916888824697484 0.11620917115870849079 0.44464608496953500483 -0.53252426207051728468 -0.29032757236484046937 0.17493628394714716423;-0.40376567492578802065 -0.2498416321925925887 0.89936376067601486728 0.69702264444811423694 -1.0692377604510228117 -0.67106045097175326397;-0.99841141660582932715 0.21272009047597828513 1.1717276499632383047 0.10852194188047631362 0.16944893710730896119 -0.030365289728011474191;-0.076332069719678360964 0.068186642799886565403 0.62661975466077901586 -0.88548971914767637958 -1.2451066482000932023 0.26074498363054704475;-0.34004015105264717711 0.18479059727731209084 1.4840459668067882415 1.1344523675864033319 0.035264429693571824886 0.13138624763270556617;1.3730009262755487054 -0.70744536555339387895 0.26389410006596381031 1.2527378020515675949 -0.065961996067589720449 0.62077177106464631606;-1.0755992809165635382 -0.49275598833281603062 -0.59158078528437585408 0.89976973324509723628 0.22305038423386822077 1.0285578505389851856;0.95660778755475017743 -1.0816840471835287296 0.11796729228432412118 0.2221867208144617245 1.2934324625343476267 0.2140497031823334062;-1.2029036345214674242 -0.84233200899569993236 0.37599063594686427114 1.2372854840978246838 0.44458262438140977446 0.38241990436229672534;-0.27765969881000568398 -0.86720460184681646965 0.3304148338280349928 0.29177051249922858478 -1.6538949504542275193 0.26767240523444624234];

% Layer 2
b2 = [-1.3302822848136868217;1.1979341251211752528;0.88516623819032147491;0.43950959309813691922;0.40148631893254732583;0.35872861908630704342;-0.46346068392323541696;0.88155094737314021458;1.0988616662521764056;1.6644785495234133421];
LW2_1 = [0.25623430006150332838 0.19336613703474295201 -0.15564489336162409816 0.13340700299661650829 0.15686159695573065331 0.34450554592188414871 0.062743627701323120838 0.49642507680711761564 0.19195230274114280511 -0.60382569793010576475 -0.12131610733915489109 -0.090463747464178040358 -0.12524764146626909955 -0.25309444437444955645 -0.034610222081710523279 0.034566356825688836218 -0.040551445976945391103 -0.075307042979976368535 -0.54436434185472237779 -0.30447020815581671283;-0.43282516087681088823 0.32540617978282071476 0.062440747670958633708 -0.085774196792709353487 -0.32006672338314612336 0.009455479340406488728 0.049225178363741031728 0.20046718417492837006 -0.12461716363672466212 0.34838991158571236406 0.20684949500666419131 -0.47124650052922917309 -0.57384601002452051421 -0.30023888802445619639 -0.61036821009475594746 0.45134309436835434726 -0.56296039071677050902 0.12536924263892276765 -0.32453395629627296293 -0.32121707225340062619;-0.14382629437737090572 -0.12874815341876985619 0.59720300403122617006 -0.037611071486108281492 0.54795205892219889243 0.24429690179687887919 0.128036981252161286 -0.12172141436725741892 -0.29235723360760734746 -0.23369988937776220439 0.43387387908078051124 -0.29357980903325192612 0.14998532417933177485 0.0514585002904706032 0.1629376575379770653 0.6082981500357386162 -0.75930097632581561307 0.19961506282248700495 -0.22799992532003601764 -0.42945473317167104366;0.017928691134384132366 0.01843439544490702367 -0.54053615990731518348 0.39776621809885132075 0.41410859261389637576 0.2301879740592285839 -0.24343138479844031452 -0.4873781847333239492 -0.036277956406365781394 1.1553733581211815817 0.16537725475864273328 0.06899422910160046829 0.06101893814296500268 -0.19683661099990751309 -0.22204017184543659025 -0.13221236274359138285 0.05467234262141633383 0.011350799135931453551 -0.16273174095631076641 -0.30233962543524595112;-0.3891910750440205069 0.54971423603313862571 0.12326257628849439374 0.49590881663936209334 -0.19680031329823238773 -0.45803287753648685987 0.085585805183318069966 0.28327131790940673906 -0.04926089650406397652 0.27145836325171979198 -0.092285149451553166733 -0.055413180831981635743 0.17121462131428727416 0.17967022319878012127 0.2800994837147550709 -0.046520726735735845603 0.0047146594115492204344 0.67359030043047873892 -0.16458197810223459956 -0.187235588884515608;0.11869436965096384629 -0.22210222077908703397 -0.1741044459405628464 -0.43820887859776286311 -0.68994944736123375861 -0.49139726742997535958 -0.00093783158154694089281 0.15134101963576221395 -0.37318578617384701168 0.1787201936551085224 -0.38926497949427291134 -0.10780963259484077632 0.82150571300611308079 -0.058641029968845188869 0.46413493155582802308 0.42566643617964089463 0.084472082308681306628 -0.014082817770262288926 0.11125700210742968388 -0.096391496402706763891;-0.26363641998316739157 0.14855029338072806011 -0.10066522596096809383 -0.28953126082061475532 0.093598853590639810585 0.42926104728143077427 -0.20436334307895834272 -0.25265888310953055207 -0.27252736548220901636 -0.80880278476501299423 -0.21565501079991244993 0.028885370611787065942 0.3935166004193687006 0.10218516298814521448 -0.33070809370584502984 0.38269133963585305613 -0.069543022158814943312 -0.090814356998807244103 -0.22159826808952617916 0.31581283533945608832;-0.1058475437366237365 -0.1184536940692696716 -0.039522172006490052798 -0.12695736712687882841 0.15084381578856884132 0.22158801155999649501 0.21833628699100954274 0.066791084714491258389 0.073576169784863060253 0.24023509140444415655 0.14129210201511974154 0.14112980691931492627 -0.014120382145505623941 -0.41044813683006103888 0.64186794858321638557 0.25658392375253574746 -0.41896749712655700915 -0.2298478180645322777 -0.31545469424641253697 0.53024583799569435794;0.52016986069503423629 0.2375489144517005935 0.5834356864492959982 -0.05545560242068630491 0.56979351945668577084 0.79628590167749635498 0.33503160602814485713 0.0047785229810033118952 -0.50619764878038731037 0.28185707851576452532 -0.15948788305407063381 -0.26346681430704343985 -0.26659679094117988418 0.56153514319139208322 -0.34571588994058244371 -0.047331339650471322689 -0.21185434468541286535 0.31997763967777986815 0.21014627394792237403 0.0089877055823938296897;0.50744823176840492263 -0.41455531958617974908 0.13594694754619715549 -0.23538218725247891938 -0.4232051936834204664 -0.22872731503774032524 -0.56943392777616907985 0.37726259581453736036 0.63564228819959811556 -0.076331939669566736817 -0.34254829120845231571 -0.17727925148338927186 -0.39919186893756508638 -0.23580021277946619507 -0.35753623360448177904 0.30532812900417000135 -0.15479612042504498071 0.31003641234705275886 -0.44297118102994431643 -0.08483135070317397719];

% Layer 3
b3 = [-1.8993991752710521759;1.527186651591546207;1.4909429874875315125;1.2973511315017429713;-0.86041396976276540709;-0.72284116819635113593;-0.49662730152800282912;0.60281173066536741789;-0.40424498909108158573;0.11051760872107554978;-0.27210627852850999275;-0.37809259199946637642;-0.55665131758528219041;-0.67526279353176410503;0.87868658330575044602;1.0478146093364946179;-1.3282343096566182616;-1.5023646339270104733;-1.6741523827080257991;-1.7073153457432042046];
LW3_2 = [0.66844441635481699482 -0.37480481537460896835 0.84662998781817300209 -0.097911397936074326398 0.93656149956327550132 -0.27188282581006917304 0.77102844810046644586 0.72299866131547574355 -1.1137561844472303463 0.050719828481764386852;-1.1690357826444397471 0.55057704905906379445 0.087007076089793397577 -0.35514688331555221978 -0.35412960013401423298 -0.51321818735992275062 -0.1193015618982455478 -0.67699145816788197649 -1.0119877408067288194 0.45040764998340515612;-0.10992296273407463347 0.89309421873673378034 -0.33703423771017776422 0.89405912885176774818 0.51218224272003110009 0.66179952834068001 0.41459828338195181541 0.66503708630597679896 0.17894196481283686229 0.7048373655565890461;-0.64002764527141287054 0.62379259813549592373 0.80457209241087035423 -0.86247658342279376331 -0.46495821940084797186 0.49527685189250780784 -0.75612765018820060625 0.089344341057545142992 -0.54317798961494356824 -0.61557832945678514491;0.49729955531176189831 -0.3725801537627410065 -0.022595699477995792592 -0.2163063782451987993 -0.24482162670423288087 -0.67582154595926746676 1.0747810643863089375 -0.036912935615862521588 0.86746191854663634579 -0.66455051408306586858;0.44007841978627132429 -0.015386044172906447602 -0.79322857118500389451 0.37142756738212678869 0.85256665684162780128 0.15026663099778311827 -0.86688089597118156426 -0.32085375184826003814 -0.53208155907307508325 0.55901913613569109707;0.9282623731872421402 1.1252398530802871779 -0.61663236081846906078 0.16414754120552718653 -0.0044080412954406525405 -0.78761754729688604471 -0.21087868504096968225 0.73424544030061378308 -0.22861600922013849968 -0.051481511356760954745;-0.98915905190899822141 -0.057450969047384024824 0.20107959855611551303 -0.6216578305032327556 1.0996061027143788635 0.38237520875448860469 0.1311747197549450461 -0.8426487221229723712 -0.33733526811881364704 0.84603261003847241017;0.65225999350997232451 1.0056180693739145138 -0.31756044086819101846 0.53883259142523809437 0.24136378258260696161 0.40076387403277746735 -0.47165884152398462881 0.58442863310767312335 0.82175818289229018987 0.3335677758284888994;-0.83803040066708955891 -0.12862017531951744354 0.59841402974148294458 0.86776049200550497975 -0.49956443896298619034 0.080655034549545007172 -0.67626838642668918311 0.3577840674622044248 -0.69674052568709210487 -0.71235860315067656146;-0.720613617804366835 0.4706057581474853424 -1.0360188518089987753 -0.28817971505413547684 -0.90754395918429953127 0.17721582007823077909 -0.41037221207493751463 -0.026889495942772564246 -0.032823786698307905185 -0.92133641405547028747;0.060042365164639413533 -0.55797751742194789948 0.50970640029608060839 -0.68392575422793244755 0.63999753805592118905 -0.48570245119449573235 0.5730589848720516466 -0.69964279494612802157 -0.67532682595836723838 -0.83303674996246812601;-0.66606541118331741291 0.80940822936999001769 -0.96675158624252499617 -0.31080577569902412272 -0.27055751912538078541 -0.81681442359621203586 -0.3980383059955531766 0.24720758522309752014 0.25462025134714094676 -0.12328775004348015154;-0.59453764604741765609 1.0654277881285434404 0.22713864164695177217 -0.67039413489364996224 0.73284474424211720756 0.41113720346378873627 -0.41105470270493893459 0.017870631615166394923 0.4055567530384654451 0.80780455718001653587;0.50006450007349634301 -0.51245817128264437024 0.23469952175859132293 0.56637162002362106961 -0.94175859594059485591 -0.26160392867011317275 -0.39325061581940096156 0.60480015680712950754 0.26192695233812052225 0.50635313369605627898;0.70037355593265182563 -0.79105286250725259656 -0.56639632469879830357 0.75995366269001540793 -0.56956308235753339009 -0.47347062660274175094 0.79437494973737998727 -0.58784108618668662327 0.17430463472282337056 -0.082578114212762898649;-0.75974079963109375502 0.29623686374768665175 -0.96252328202330017515 -0.24519972187573460531 -0.19683917606100448383 0.491446559449194742 -0.50703137350003102402 0.609189483110725849 -0.013648643475937046951 0.2978199905507805112;-0.76068396779518399065 -0.13805659889450078159 0.94604497854495805953 -0.87408654270453600699 -0.056994421003765997902 0.50538751922423930107 -0.34782685696600534886 -0.93528784601397207954 0.058795798438909502304 -0.21369409683764983843;-0.30843499701047832895 -0.72277956033049872708 -0.75262998917716217306 0.91821771140929220323 0.8331386857890810127 0.4510998099939279582 -0.20080470419793128301 0.48737590519145268519 -0.80929027524449870246 -0.043015179592827378074;-0.77246754729329714095 0.65977707208450497856 0.72894908970977301266 -0.085769387806229738236 -0.90474794430278104862 0.33362141435823594593 -0.80752663684881609285 -0.29812838206945219133 -0.22463559303761870822 0.021634045518873046277];

% Layer 4
b4 = [0.52376704438302346123;0.17085120421250638012];
LW4_3 = [-0.25490146218180731452 0.79415228476139121394 0.061120298057885401322 0.20857309663602116578 0.61997306083015868428 -0.27086852918474857432 -0.62532075511629292563 -0.32452831573969848078 0.090128773287071195508 -0.10792139373826614701 0.043692316931712049666 -0.036199951363038981866 0.84483874019847615688 -0.54738493328050286113 0.4914104380756542656 0.3599204042552275884 -0.11726104171455289937 -0.51635458071581752382 0.61737622599969510517 0.056872379224650916607;1.1603583043481879855 -0.084733437418422513643 0.046199502678989846916 0.92066641048869124475 0.58466726997587326053 -0.62480912822461831535 0.25639624321321374811 0.42923326850288628931 0.48220854737348095576 -0.053985035022145598516 0.64534574840986491662 0.33134089219758128264 -0.10809868517349906225 0.76645972117461036444 0.20792786548137734415 0.56238249247215643667 -0.6471146895788273401 0.66874022476911265667 0.42335723194018232141 0.10058941461899660597];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.223240001976496;0.228777186864254];
y1_step1.xoffset = [0.198232152425045;2.75448934286387];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
