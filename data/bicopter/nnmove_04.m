function [Y,Xf,Af] = nnmove_04(X,~,~)
%NNMOVE_04 neural network simulation function.
%
% Auto-generated by MATLAB, 26-Jun-2022 00:32:51.
% 
% [Y] = nnmove_04(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.75739265471619;-2.93543929307278;-1.41902644818002;-1.79932934706044;-1.53133411450572;-12.2123602324215];
x1_step1.gain = [0.580669232968358;0.328024406193514;0.661948410850101;0.696966802812551;0.65146023471057;0.0916323370843842];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3072371967563047868;-2.6503600068849593185;-2.4122806819915219023;-1.6429821568421523192;-1.2269935450408262501;0.77286749098410711944;-1.0330918250626666133;-0.17104558726265550739;-0.35924114780622501408;-0.44516348822627960224;-0.3359208676989517417;0.20391767006872790757;0.60761234825084942113;-0.71144284039354788174;1.6788099246490642003;-0.59400854449145767955;-1.5371457709839213557;1.9470235188447317931;2.2167209908976679422;1.8051425974673762642];
IW1_1 = [0.79046687097309509262 0.21225824826380251809 -0.57550741331952515178 0.47291629245704219775 0.3019420499930985935 0.91863376291646414717;0.59397356555413760582 -0.76716995992573211449 0.80251643474341927131 0.44475287726005025002 1.0565634809224964119 -0.61205327346691773549;0.41154645367479181228 -1.1565919242651094834 -0.77274115274562182876 -0.52706066142677598929 0.13697595482617541673 0.95629577181622238413;0.87018532103222645535 0.1403061390826781385 0.83212881001621208377 0.20882234502857116576 -1.0759433655425738596 -1.4841298735282180132;1.4154947825822661311 -0.31300724433380450185 -0.12031321332471822672 0.6666517276342145415 -0.71240932688678226814 0.67268675147368894862;-0.89564068103229943496 0.19002490423660120533 0.24718998239368106251 -0.73046026624127946558 0.7215696680882713876 -0.43296453245775051721;0.28366625317677424123 0.88367428171032480488 0.92673130555781058071 0.78326777000198233303 0.2286297429123857472 -0.34231000775707426387;-0.10459297126880506834 -0.1102680757467357775 -0.26551389875104713933 0.030505030144532607056 0.85006806945356483407 1.1172019560941599536;0.64632899602370119663 -0.35728267062648050301 -0.49778962623391159736 -0.82253373513841943065 0.58354391681253237056 -0.54386252857426709006;0.36232582817437813949 0.50924201257355017347 -0.21203525599744998953 -0.61814302543789068078 -0.69912712659440989782 -1.399221003487313153;0.0047772652443074511627 -0.51892108964255134751 -0.35794261657815290567 -0.37294615529736663273 0.18373606751646290314 0.42199129833069592976;0.7473943577205081068 -0.13554286535941001413 -0.22578515904769283495 0.64138766955692672056 -1.5103674735481877889 -0.30146679486890631816;0.39804043411447187495 -0.28680422406995587092 0.83997547216816759175 0.28883883650910813223 0.14848637880100756803 0.1330526426941928686;-1.2382739556695705474 0.40170728069128347482 -0.19998129149908433488 -0.89248129283839039427 0.28847743934977904123 -0.057494519235214348873;1.0821031235679972049 -0.044633240784004747648 0.58767666444265598269 -0.68614295676984071726 0.040285711072485470841 -0.92425842948547287659;-0.5549996327074679936 -0.8842637848693488678 0.41919002950130002105 0.050573862501446117945 1.0523061850701260767 1.3042144108197388785;-1.1229319932814394445 -0.5844607859935021521 -0.96122436644443387532 -0.30263805227095508243 0.94575536655816960785 1.0725779193846780579;1.1688639101561006939 0.90217856276421637407 -0.67253902656145803096 -0.40721094575176625119 -0.47860471848428998154 -0.43454645554771453853;1.2546412589491371392 -0.1959402555387060596 1.2546260413412677615 -0.00023754568079651351372 0.50331893819863204875 0.40372783190476013715;0.68252418368457001829 -0.43361404904986416975 -1.272692620972068589 0.44459036506854021642 -1.0139669591792797032 -0.71728573454489241712];

% Layer 2
b2 = [1.6216590810892472785;1.2056803643001772208;-0.92109373607659406069;-0.25605180338721311717;-0.30735938912977456283;-0.13036779666415013179;0.82062898074768075851;0.80453868859854482665;1.1268246477709804587;1.4537989760133094297];
LW2_1 = [-0.27786020896524943335 -0.049716999400016455291 0.079888741072852070824 -0.25667553865594383566 0.61363812003570106235 0.23851735033380536133 -0.40682900133245419871 0.21641817729110743307 0.28520961388620019727 -0.99300504450468241036 -0.23553736395162033768 -0.28560540476858858883 -0.78384320719174060965 -0.23521205112035695195 0.25836529328363100344 0.096658855478440178222 -0.097801656357912450379 0.33762981132896130454 -0.78465381311056348057 -0.25810769415336332067;-0.49746755039023282663 0.059416058180739451944 -0.25302604055344490863 0.31511945707100946779 0.057778102836058664593 -0.1851340077979594656 -0.053919359448985820782 -0.56720216874900630799 -0.15691901805295360717 0.40479790619515576555 -0.20968935691831311341 0.061708898281546492592 0.017123185181865199084 0.037814497893203229129 -0.016956853620902937602 -0.39506535647614066109 -0.17447802339745507871 0.14876028695092718968 -0.68585318016212237779 0.10048562268159072497;-0.085861482167714442415 0.34791950614098521299 -0.29544787918508985669 0.16958985947376781223 0.018540519363906566436 -0.13991826341623597729 0.086911480362725751503 0.13361479322920144508 0.19437768059569093815 -0.12197437667860397403 -0.045548897038432935302 -0.016821987827882110139 0.5767905106978080676 -0.055824634710027735973 0.050925537314774421693 0.42843662364694817812 0.12702456915173965246 0.38497855921629403619 0.34430639632302051378 0.059614009110787798129;0.10019514326107108182 -0.098492258304818225412 -0.11699304270321599086 0.53270410879716323382 -0.092366798081116724406 -0.057965751131978493493 -0.17442943513777411924 0.067683175863785138837 0.3778403466499030694 -0.18489357505987810693 0.33436585565458348812 -0.1571189533217390577 -0.27674211372725465719 -0.027891084353764705045 -0.34975085813806944257 0.24540218531949720138 0.12002474989849409859 0.45547800892576484344 -0.15946249584045718573 0.13505456311718749829;0.14486126026121448618 -0.029805376661327952215 0.11250389596123247515 -0.18441919914408078096 0.097651918734798184851 -0.35367706392013875671 0.40082216351790617148 -0.55393005927312388703 0.1164308029393323618 0.052955306390335125932 0.6056611129142016603 0.034368697025371958143 -0.51806994577478393538 -0.29649062635094669549 -0.27870122061709201589 -0.92619775588805663968 -0.025781265897143201132 0.66093626524248882959 0.43275701007240857665 -0.061439891392267159675;-0.40294820136765646668 -0.23632247807626111102 0.037606654881162514259 0.046220123602874377267 -0.20325364288320255102 -0.071300557044949350316 -0.095052177821635497335 0.049353690567197627814 -0.22115389287859468781 -1.0591869938496611958 0.60859907661793055667 0.033785646457750825866 -0.06938377326321649996 0.32678517994842459782 -0.42266486769618299979 -0.026986886475688594278 1.0921802238061661949 -0.06428559225417972145 -0.56305201956437322952 0.091491561487857420154;0.24142521937511279839 -0.50353117500968913589 0.10711380498144902618 -0.33778339903599402527 -0.3219192237736160922 0.17392854314475786337 0.1119068592177824284 0.078430665550880671044 0.19599993742106583405 0.095453416901123674942 0.61282751127584633721 0.46321513578313933124 0.065568110933890186298 -0.46797513119685280047 0.16603041951193761583 0.32475229552884798956 0.7498324926268199464 -0.23986379724792530888 0.70732724707603489289 -0.52974399569281416245;0.73128381205994996694 0.64256096359047765176 0.68104614463124102386 0.28725405701489353794 0.083726434714516587143 0.23506294996070553616 0.14898719469607402122 -0.26412731796938287987 0.44356847921819136937 -0.89476817480915826764 0.21532170084720717029 -0.15364202578949620603 0.37230670337221610788 -0.15266383018570164887 0.41766609171603574779 -0.77923996360447012055 0.14935398092664159408 0.64614070345866037037 -0.37311524853225741527 -0.25679138081429969676;0.40559855027340852018 -0.50258466168863180634 -0.045297671369547071185 0.87108181377856164218 0.023817938110561803072 0.14354718850691911003 0.023763665807626274673 -0.40159325626434111411 0.10975362714072571524 -0.56487941267853580829 -0.70189582296892638613 -0.11151541236441869787 0.050675517583897926321 -0.0054867905314511800086 -0.052332777813024575209 0.13781609801571287344 -0.14004103225248429321 -0.65715227042119361833 -0.50727321978538897351 0.041133810394755054851;0.38010771664527098768 0.061666092092754976051 -0.033431293116729619841 0.69868341470405304072 -0.16328271690152706963 -0.10982847987733271311 -0.11825297215661685624 0.039552672845686961955 0.29658849324048186524 0.44128032993728399935 0.39575616642850880433 -0.2446796316012996575 -0.0074164295487567271151 -0.083499933962780992225 0.26978621692028892376 0.12534396179468174082 -0.86841179255403055937 0.33916112581989527053 -0.33498006605924812717 0.043699201625046042718];

% Layer 3
b3 = [2.0724583239428473469;1.6150433840024012166;1.3421478592780224925;-1.5446944031692779742;0.86990314566680360109;0.80968982167342662404;-0.55936214705675157965;0.45663119283211411892;-0.44461452247079830125;-0.06875650398966927368;-0.25369023057584677572;-0.4550119577134390525;0.64427450306233180477;0.82336553085219010839;-0.7751750830581582985;-0.91620314077108944151;-1.2717634525667322887;-1.4456987336298701141;1.4726351503035683965;1.75158873654572389];
LW3_2 = [-0.30946696843695942203 -0.48227971123243895679 -0.98242103466439922865 -1.1158798232635445125 -0.63194275766823582163 0.41299089254748927447 -0.3995822877843976384 -0.46620085932599858447 -0.18534508320432740991 -0.066293207990267818963;-0.82680604478191355167 -0.81834243574915543906 -0.52888357539973440691 -0.91075569137259781982 -0.33727188829636800538 0.59886844842577791059 0.26808508297422101174 -0.10760924184754787347 -0.80066547493840933836 -0.79916826498484505592;-0.66882509040713689075 -0.30014978002445835692 0.80419775341464994067 0.059985644606872667861 0.029434316956777870772 0.88285374513968495336 0.15799745496298803205 0.16648076089019783752 0.42315334134242660324 0.23496894431692141869;0.63655164837882716178 0.049799828595429869449 0.75282480409083851747 -0.85805624160429672109 -0.85577452550410637588 0.0340506254467532396 0.034992607700541016047 0.38068511870459598168 0.30608657372964975796 0.39843310147298982571;-0.34642696325727440065 -0.46089215087558343953 0.41098394603212690113 1.0963958419665038591 -0.69875867798385138396 -0.087120261650280320098 0.68865073218003691746 -0.51609823719362324379 0.35175604621033407238 -0.1785896302910092992;-0.44768852980665280183 -0.38692642455304188109 1.1292433296704080803 -0.48788021449685553543 0.28055413325824063442 -0.63721846717234997826 -0.62693710395197754792 0.35529708347777866351 -0.4921467644549434306 -0.75475328507158123692;0.84976782355942970248 0.1664911536006418169 0.23020107354164057178 0.90893618590458635786 0.58347919379590884592 -0.53762625198909641533 -0.51303727020186618013 0.53311445806979440576 0.67179170318064040934 0.66144863122953234669;-0.65604754308014401332 0.35213033025130696663 0.091624291205849126007 0.42821442731978032192 0.28614023822266054786 0.85998837226292135227 0.57386920217997550164 -0.64060212034695140915 0.34029281207804640275 0.063779327980778496854;0.7406010361487253002 -0.45298966476067137332 -0.4422285093856764826 0.37642972541348157511 0.38651449450539521191 -0.023691911883257553428 -0.35642689899863233549 -0.40106711912669890108 -0.032868914852301374385 0.75183029717834326533;0.18161424820768970467 0.53357787856990068764 0.95918814463672608106 0.42425091711376994308 0.41480569477399470424 0.17178415661951196292 0.56121278948413944043 -0.58467103386560070888 -0.61114745404079839908 -1.1189032762503829943;0.24229345325100806741 0.40133876233111509535 -0.49533938111158481998 0.65404865896383057589 0.23516879489769804135 0.1478166453793732793 -0.23420743728618759194 0.59248937562317893768 0.014562177653777158212 0.23254627827269475082;-0.55706037987816325874 -0.29822327768084283539 -0.74911481552309810983 -0.83393756243026462283 -0.28333780563320937196 -1.3163141753177780569 0.10480548730642005872 0.58771815666335158745 0.059088214659030288689 -0.52751191421858201203;0.58285969512089863542 -0.52554716693594527577 0.55885048555194782871 0.15064918728738968534 0.071333460913540217008 0.49052104884156416675 0.24887564925286745354 0.0050638796476772151081 0.67942767246201651865 -0.82139329671490812768;0.51517737633718108103 -0.37311056145169796405 0.50478941519927644777 0.83141640445417819283 0.60389654611857346289 -0.47329178683080969092 -1.0826714502151373321 1.0210242900444566061 0.19768654301048277366 0.79392176805796599304;-0.25265259232916720267 0.42260875166761702193 0.35739827400893198206 -0.29102616845137269097 0.7102000189573068889 0.39666543299649353882 0.23663266872158303378 -0.45342647150668557998 -0.6032017211856749439 0.7798138847018403208;-0.4189167702770523749 -0.74505991778165159278 0.084263623096302586735 -0.79117734015502483302 -0.18891812830633561426 -0.62457054388999877492 0.10052969014354955213 0.37925153818013523921 -1.445285655107381162 -0.72459520006205302423;-0.67716705129147858333 0.35376157338893543525 0.77957792134715364618 1.0220526386811508157 0.41661331340528290346 0.37157888188228577198 -0.96686267630254218997 0.077797515961428739817 0.4616070515325626511 -0.16801500176196904057;-0.99692608606153065853 0.30664576136549936969 0.83121562658639114307 -0.89309779810032818848 -0.33718331823924813095 -0.40313419393774907462 -0.16388813424208684144 -0.33358289595418316731 0.34331204854100311197 -0.095562821034133757503;0.47605477457014833131 -0.022129737460486291478 0.85978766170503262423 -0.59455071202082143689 -0.10612235035210661194 0.27214781626580464291 0.62585922809212202189 0.78082847418378498183 0.94235966057190179157 0.28278996143917572992;0.6013400904093304522 -1.2635728178825649248 0.16894735451895592782 0.32566354089297006036 -0.38979187575488560835 0.046418982524519737665 0.25220555186666776537 0.26888097671770155861 -0.3293390153803546494 -0.35072632314279139631];

% Layer 4
b4 = [0.42082213623174663519;-0.31732642460256010875];
LW4_3 = [0.047661288421257566594 -0.49266164208723006723 -0.25036535469226367523 0.085489703038173062155 0.16106286695434776646 0.088731844702421625026 -0.73878828600548673844 0.55252249568877298547 0.089177897947228607078 -0.24277256895959109517 0.86850365394102679861 0.15860449213845800864 -0.3423620980565614258 0.25296827825278173085 0.17029864246576495446 0.76999788952106795747 -0.52849685022176784432 -0.92320595985760178781 -0.41485031890297024981 -0.49596357561050247176;-0.02189017003363014427 0.30438028587021248583 0.18967272819822839081 0.11086777067750687442 0.10244657471155542428 0.19429120773872038397 0.22106788318048323227 0.32929743514963372153 1.0163687169966677537 0.030992125292879334209 -0.09416715700731050076 0.12112395029367954702 -0.22103399785499458496 -0.034793946084474794422 -0.076139415788982534039 0.64602155397438099094 -0.22348946284510029514 -0.38072309568921747225 -0.7329600339303209422 1.3135506583739611219];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095924;0.182591664133742];
y1_step1.xoffset = [0.0999999999999996;0.715060397219156];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
