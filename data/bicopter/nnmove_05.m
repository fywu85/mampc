function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 26-Jun-2022 00:32:52.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.14176009391765;-2.93543929307278;-1.41902644818002;-2.57890731985373;-1.53133411450572;-12.2663909617541];
x1_step1.gain = [0.522374734117766;0.298150665874942;0.661948410850101;0.548072071991747;0.65146023471057;0.0914060631117237];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3564278227286910017;1.8127512859567640469;2.4414633892894195277;-0.99973787301504812852;-1.087674806478572842;-0.41842063552968494777;0.78458589761517405492;-0.055723440179349499612;-0.32596011623980164496;-0.066196838666833762721;-0.34604673652896678071;-0.018517850552880948251;-0.64668180052684365311;-0.43510303629753283028;-1.1397244506375576734;-1.1998660802068299436;-1.5807745908251842337;2.0110303062226897453;1.7255370565656897863;2.3359626207439894152];
IW1_1 = [-0.063216548714592313285 0.67576246622405533593 0.25964417558475139103 -1.7363189521061972442 -1.07842860898460291 0.47547523810229530561;-0.68790537321626910039 -1.1915744893114224023 0.40024826325095907986 0.99882092372800734825 1.5709749350602246754 1.0928803431186324691;-1.1048194804246123102 0.95709708213848698755 -0.11073463331368252338 -0.28059591108233156165 -0.14144940561343768981 -1.3729696629268599573;0.95018162060864108653 -0.60640830875005946599 0.47968363945623082589 1.1595069975275908991 -0.065718422060858289191 -0.47773737876011479475;-0.47962536382798026668 -0.061561837161017582409 0.39367356498003391874 -0.81112030077530727912 -0.1248049027619306528 1.2715312292644453951;-0.28513665359961459789 0.56569529375156224482 -1.1068179228880445919 -0.30769629556527977599 0.35229683920184950985 -0.17936991815173469744;-0.5201967792874914176 -0.66592754529476638758 -0.054632866731068194244 -0.78083723916037695023 0.13541025571926212923 0.74012599528337852384;0.69084184247987245886 -1.0436787454176346124 1.0870315379542538903 -0.12091710830004839816 -0.26977071842913635802 -0.51063380958279314115;0.6852920183943720378 0.42922587230601166874 -1.2760120091801658848 1.0984314702131987573 1.354812085900760632 -0.48702340151581802186;-0.87084296227586277528 0.90091188052563642152 -0.5397669074399951139 -0.067919187895903621044 1.0512805898962029882 -0.25498244600513880753;0.12827763907273845301 -1.4574610440085884466 0.80122359713548596538 -0.27822731025235081237 -0.096131418070147328647 0.73792179034062754805;0.058052221975745242621 0.28575193014604088892 0.32489357142021985103 0.47532978537737147207 -0.21916514116919902366 -0.41849848699004132957;-0.53345062806692866708 -1.265909266152190904 0.086546372499919546617 -1.0349025927373947109 -0.61945139926793824081 0.3676739432620679815;-0.2240389655338220487 -0.2492476407531671323 0.080819747033100478029 0.13308528224079307911 0.49490854011784768396 0.61780596254384723132;0.34463689047560086554 -0.033447206363231604676 1.3072411726702832802 -0.075492092701242227704 -1.1289887971967782487 -0.25355850635956239669;-0.65492977182381439949 0.87333516637354069445 -0.1852441942439485012 -0.66807159726662779242 -0.59394404127296307472 1.247047063109879339;-0.92406053399496801415 -1.1490469924558577297 -0.12359027428440350072 -0.54782888484118374972 -0.97632509380391163667 -1.2573752273348306474;1.1703526793907033099 0.3144266347856761179 -1.0068006311102077888 -1.2304492556446897655 0.5490939898388140783 0.26254145655888111444;0.098451798404484078264 -1.5681007470916359381 0.64714853114216119856 1.1655728978221686631 0.58001061600473602375 -0.19714940270152794821;1.8371441879664343055 1.2164327512568768874 0.49885374936760107367 -0.17618688185055925155 -0.70845373952138757101 -0.051292060365954371404];

% Layer 2
b2 = [-1.287511363801399078;1.019012156277610659;-0.96936552858005498035;-0.081877849749999231932;0.090710854865256332347;0.24558457572577688244;-0.20236377378931794113;-0.91269175182732897866;0.91743745796820785898;1.8330592025665706224];
LW2_1 = [-0.080730085874337859098 0.13860019697533698668 0.32504619359939879164 -0.25670077908243060794 0.030925884068406218896 0.037187663351483088436 -0.012229201562643669809 -0.068197534431555267842 0.018437833660011188758 0.11764836770172348857 0.24607426627017517373 0.19646551882493423768 -0.29420900764830343332 -0.81537336796693371532 0.25154531134408880666 0.080587846786135300392 -0.1669687031502847252 -0.045953344575197709043 -0.012610438394871560652 0.4650185810758536431;-0.12232205972415227668 -0.068272367459684082935 0.65362924444141934366 -0.004570398269003767 -0.1286800319209972232 -0.0020174152362161766605 -0.58707080907411768322 0.66022519138500657121 -0.11446417292286895084 0.075283165757764572423 -0.73807247750655302632 -0.035671807202441174756 -0.45214216664393858114 -0.38371654936496690791 -0.13249770184407244633 0.43197977222386368945 0.78306229947080474574 0.55755076137794679081 -0.078892061403222746296 0.43236861524932840295;0.18285969071356750204 -0.26347222568926792485 -0.66038943800784710714 0.21309054417945019755 -0.24856067690237373946 0.34675790711009168987 -0.42621684488572059157 0.051367571610123355375 0.36629928553637808308 0.0010368722089580135332 -0.41779427567891797013 -0.047940374566614304963 -0.3026101426079105261 0.55565652984379587664 0.39983565808707799416 0.019196415284247439481 -0.086936759551647146971 0.29573546083822471742 -0.35309549853477595338 -0.11923540664376373888;-0.081472147266636762986 0.52548455698763063548 0.012162426447972760069 -0.068816472061566963392 -0.18632260710991427333 0.030509132896297412596 -0.37337939125853503164 0.029937153288306143917 -0.019984094523552022038 0.13037059169010203896 0.35209964428330392527 0.38564871405789291625 -0.074263077944021885224 0.8744406617137883142 0.051476872042503986349 0.20687846073197063701 0.34444039516966618031 -0.05159696935326711642 -0.055128458083419970559 0.27975987326736040384;-0.60384531678817621181 -0.57326111397214551957 0.5822751909606209697 -0.57151617940681687102 -0.03475178644126952765 -0.54376252166787153453 -0.43185918605510054125 -0.35347076319257181298 0.16120918053936084124 0.53745399438189833674 0.57714880327967865714 -0.52248225595704322899 -0.57861471907265626946 0.4609285185506313276 0.028542875633581970413 0.23220790107912114841 -0.10416521854147234305 -0.090098911388760277719 0.031509815034861062 0.1148330960885727281;0.038018508198783156071 -0.36333610837112906289 0.066095609935687735237 0.058812713187851480001 0.097350915648548294601 -0.28241409881346341004 0.29888695260266257003 -0.035610990151754361166 -0.032488006341905045771 -0.032512744825665698678 -0.14875929185114117326 0.34347307470957305631 -0.041585890980180895138 0.53167547554492677886 0.1788357580529136015 -0.12066855207885800183 -0.33290964224261443416 0.068246174083484198447 0.058449588199115692921 -0.24325949307157243573;-0.016167314522047476766 -0.26804411253174265095 -0.14448960827835366505 0.12668918586943725413 -0.077545745911590344135 -0.16733956542556052693 0.097528848898700726266 0.0008314436289574092271 -0.0046686893688824629423 -0.030188315763701997763 -0.1782949618155163507 0.56953242577966589621 0.13283577438652935387 -0.87825368273652015816 -0.041181332874787437981 -0.022786772651379953725 -0.033131406904919849521 0.14316444355116017539 0.034386313866493496694 -0.2664973942358407899;-0.90371704522593310216 -0.0070444025461335098987 0.61894510472940034163 -0.34256884888945010603 -0.37225870829866408718 -0.52679796548580182236 0.2471443593298947583 -0.29944096012224796777 0.42095123964324832055 0.33787226190255675862 -0.023255077688722078366 0.13075919986489334401 0.039671735232372981605 0.36902850772085399322 -0.27154033292289064816 0.11948194984609011859 0.33480690726472073226 0.8134198220833154247 -0.16684090142164134662 0.037353795490754050646;-0.024305302178083503656 0.035026313762658814466 -0.49943085443783624688 0.34507089070195345881 0.056367394301530371337 0.17163948847209356541 0.79572268208174179449 0.12682730905807548805 -0.19271499546253559321 0.11608699268002006799 -0.13643397448522051607 0.32414739323997215914 -0.039433642815564919071 -0.23731693228549649577 -0.43574929352500951785 0.12892142628739877708 0.014118434241227582199 0.56310769578049413298 -0.17192290734377024819 -0.13539645768256433622;0.39546153985565773992 0.32289156683518899227 0.19153960938671768521 -0.17250835450136661753 0.47277397827845191181 -0.42858641289196769408 -0.47974041236977787994 -0.35233449513586218016 0.18517325646717067156 -0.25804033396864484162 -0.1606111795419424837 -0.21394430216081913865 0.29279683802828115891 0.61840938331865114019 0.78560697441418958498 0.014178824415990717162 0.091034977338333419872 0.062305384848147273014 -0.71276938257913757813 0.084965029558868546133];

% Layer 3
b3 = [1.8714375330204893189;-1.3729449965015034785;-1.4506853451243020281;1.3233088011563844955;-0.92056006123948697084;-0.74242217059385073874;-0.58886371367641165975;0.49186438151525435636;-0.57249860073530911553;-0.081193793218346341223;-0.40804513460940733394;0.1853812270550538599;-0.370780309514299522;-0.78069332441754812901;-0.68136640651749347253;-0.94281671430904712139;1.3521178409189738012;1.6941816029942311506;-1.4387503886501946671;1.9139036215220928128];
LW3_2 = [-0.71157769046059260454 0.18754162128171486534 0.85904071635525525164 -0.35621809970325146733 -0.16718336196523797543 1.46348196900613714 -0.67627955259076033556 0.67387946939121212697 -0.37043521685285674128 -0.24034344328803911028;0.18154473068677887126 -0.7195444912247994651 0.64435160902548249684 0.57419060013386202801 -0.95360601844073145106 0.14849984266234284025 0.12279663763640036311 0.6841169215372231438 0.93540726537864649082 0.029369283752439433177;0.31189907004386596689 0.33064130617477116569 -0.49646011243663901169 -0.22819260633461460608 -0.88721374648395456841 0.88467995637680474363 -0.50758157048639018782 -0.27922314226066496934 -0.58327783010826295129 1.000804915324761124;-0.069697657531667803199 -0.087575559737768843283 -0.93227556247870702055 -0.63915966932898282682 0.10883597214296211741 -1.0199793979123448207 -0.39344988070174230499 0.66728749528623443332 -0.42199951938924867845 -0.62008126215103398504;0.4710298969222233012 1.0680477655614284416 -0.33431970241666292276 0.39119391362260619305 -0.4185409288741395728 -0.74902903186272751235 0.69082696726718095803 0.23814697788433203396 0.86444659021145231481 -0.0062316428212198038752;0.49443380264770520061 0.73820596488674361524 0.41578597757046564798 0.56196914603694780865 -0.62705712618941178427 -0.83342081462212580512 0.27999103686256554546 0.47459760452101035222 0.42654610040246276892 -0.019481828119964864077;0.70067717746639934795 -0.32874777689296780236 0.62680897241441735357 -0.50825288045674055226 -0.98730768154939718695 -0.052563755842069251334 0.49432059514002374412 -0.43181911230694886017 -0.86786953727311277884 -0.36911266214424293119;-0.45909554429365695416 0.53991945845858890785 0.81298349657415269753 0.3412875111827495811 -0.56920956271700140494 0.34354568678387037428 0.61008057284190275738 -0.26740062440084361173 -0.69312316994699774142 0.28262229953772222135;0.3066992894849358553 -0.37975090498852936971 -0.044679917440486008329 0.68699414031034700123 -1.0701474252324028047 0.84275369213310469263 -0.55679593853881736987 0.4727186452221187607 0.75795263522105149612 0.070054580365660729102;-0.92710052705290924013 1.1217532925740347771 0.47009433320716215166 0.050898865445287162779 0.67624417628402411218 -0.29105335177637775557 0.34108010353073059395 0.055940838533656084275 -0.21668190848500673562 0.21366749543853116866;-0.24060345698351201515 -0.79770310747119765882 -0.049681029380597589717 -0.46659276135952204578 0.67009914519644742104 -0.55924325086808113205 -0.8627841283564925412 -0.24735050944713699028 0.13714462339708766159 -0.48383808131291838883;0.21291967172012885023 -0.41018982511159313153 -0.82361462590587153354 -0.74544838313591199608 0.43686980529398344864 0.16969741350709491301 0.82327809576921140433 0.14766524380748699552 -0.46770988360311882559 -0.35829872069677509705;-0.80225513507701462501 -0.85664276492467239521 0.50125196505338576181 -0.23427526752756949735 -0.013770819366221941776 0.23465427036353525558 0.66943303359874017922 0.68155536096703828175 0.26286723915940918284 -0.89962198578711594088;-0.47989387813712358621 0.9967337229673616239 0.47601353815687186266 -0.26182986720567474892 0.24166043010160428994 -1.0620357303446776864 -0.62813851729354697184 0.83444793372880454729 -0.40124075190717484185 0.42892971324451234505;0.1546683598638478041 -0.72996201895895695966 -0.64548449130380269878 -0.45085871587991405152 -0.087751917902249801373 -0.8967168257354716232 -0.37398743355686364653 0.82238420192382732932 -0.0038583865943011153715 0.92100588491723656137;-0.569754581188970044 -0.74768923283178545525 -0.90722687849305783114 -0.85505208893187123476 0.015855257707732297451 -0.2090225291245846051 -0.96469813421520023144 0.45430928113786483991 -0.57298933087657688557 -0.39100739869612993749;0.19090889877429101373 -0.58084298511071652538 0.97962163210786068479 -0.099269683278302489615 -0.60601942392513596936 0.50183272829218661393 -0.95835924990104359722 0.43014802280842662219 0.21959832964374584319 0.069684319645551495714;0.58511845835305731356 -1.1077901714649376341 -0.58807577686341450107 0.3342958707370913829 0.42340720938516324123 0.30860598378722742252 0.46891726606835792968 0.22437109274080491161 -0.69728356241682809546 -0.46078259539431026814;-0.7931631955839678616 0.3595903844326288068 -0.44821074038354258295 -0.5663825908993910252 -0.098636524233575884058 -1.2330412933045264978 -0.19796493512476279197 0.74401070878286468258 0.030875111571769031649 0.17141607307856976394;0.27541507817090105092 0.7539591198670231309 -0.065263351949819345399 0.27935400313465647004 -1.1392655487190397334 -0.16796453928776405862 -0.87961474936113370759 -0.45590190412153402955 0.17642886021264628238 -0.39100527494054670985];

% Layer 4
b4 = [1.0047497494684543007;0.24939035144957399925];
LW4_3 = [-0.94933210369744569501 0.53609774499874085496 -0.058802856337462190706 0.28644431390783642311 0.34398935463235857934 0.43961802938386734807 0.3571263236112328654 0.087410592913637730206 -0.92742537152234505449 -0.68542572831671599864 0.022671656801041016605 0.60449103845017104764 0.32278874112020700116 -0.17085829683859304895 0.21283274116760314554 0.1157854188692952202 0.57648550001360310269 -0.59386534081184039202 -0.011287458533849084943 1.1291120704045358725;-0.21116307612701051832 -0.83264646086242588563 -0.049941309417380209956 0.38322501715699003322 -0.074192104812698500549 -0.31324746010737070101 0.0028732235519661527418 -0.33934715213651306387 0.024814236175497342285 -0.031276685153896185976 0.63403633329522934847 -0.27971859872928211965 0.4992468761679348388 -0.082916580355572311323 -0.039296948994635524932 -0.054886620167797106618 0.56354054719476620594 -0.37606706630821934434 0.2677293371723021842 -0.75873475950296076498];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095924;0.170733054418983];
y1_step1.xoffset = [0.0999999999999996;0.715060397219156];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
