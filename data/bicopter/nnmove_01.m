function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:08:57.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.1644187130392;-1.85421471416561;-1.50337830487775;-1.22756552601851;-0.68573194562719;-6.24352212331285];
x1_step1.gain = [1.13307240628921;0.550102878172287;0.707661234476445;0.888396560915774;1.41824479613561;0.228820411476588];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3097483445922875056;2.0421640130092342247;-1.8199468810272732;-1.4411788377611587375;1.324053990199887787;-1.1894208113331552479;-0.54651223916671298753;0.42587132013858713941;0.21738470693062431072;-0.21349007201305303383;-0.49636854826095322402;0.24952912371907806643;-0.53991639673443525549;0.72950229708375791127;-1.2591724305279718976;-1.0286787009779170265;1.6231685875797499108;1.8624381029062682114;-2.1884173354811413681;2.1885584116620782069];
IW1_1 = [0.94233164122593460199 0.55658628957085742872 0.58271863295194559207 -1.1570372378394060409 -0.62048116163714217564 -1.4289717797593888271;-1.2549167016579774181 -1.0419602110595840294 0.34760685647661221376 -1.2764088968399409652 0.30219988138265968525 0.94029435169009001338;0.91740419277307827528 0.4541577650012163514 -1.2557380609784731806 -0.58207611269096071194 -0.48760777577928055004 1.5310063121832389044;1.392499214412792119 1.2247959670322241532 0.53396224932680236286 -1.2130938400757809159 0.4675464276036553346 0.26845037664589266324;-1.308131194731724678 0.8620348603597811632 0.87037926944419996556 0.83443423036685604455 -1.3078904131418576107 0.22888183888619084705;0.20666818996158478616 -0.89930206748279006845 0.62151262176214006061 -0.34582522076774280251 -1.3089503800420363433 -1.4549520626581222693;1.0314101799662120929 0.26354187329433026443 -1.4182178973522141519 -1.3836535701543799526 -0.028152152554982289023 -0.57449221668816308206;-0.7995047766177824089 -1.09226293464909463 0.1613591068237806847 1.2771551110235643822 -1.1956203047512552473 0.51994982941230605267;-0.86055555750259304926 -0.93844836134892184454 -0.68781990111024826628 1.2274261072035255182 -1.4095744173884374728 0.3956297356475504956;0.53531881963188943097 0.098333407023054666962 -0.40374703871626571594 1.3482452941163585169 1.494048155290767621 1.0115139857653714373;-0.62122983484276406152 -0.79094576167363239705 0.0579539502684453256 1.4711732362564684529 0.59989694055177045229 0.92179537717227244542;-0.038192064258535787791 0.5583532376084527904 -0.8854110144457639775 0.15077307329255359991 1.4122127748036932271 -1.2164546225420649339;-1.7786347519156191499 0.90201030463723208541 -0.39744527102646698413 -0.91930311295713329489 -0.67870115152641941059 0.27264306000123977869;1.3641091020707427628 0.88764520196173690714 0.56426464295442846364 0.73763639612273612656 0.47538595537659822376 -0.83145444529211387508;-1.3435851581554070222 -0.70657965372887154842 0.85987142953804329704 -0.41566318278474340131 1.1760407404112673824 0.66932137453470974542;-0.17978183903607602989 0.62493500186418282638 -0.10004951211463933292 -1.9356529130286943552 0.94328909521333403898 -0.090452447506599295557;0.20499977881085587605 -0.74084447382381224401 -0.47474113358284342201 -0.66151224294179811203 1.7940508126539969069 0.50270958028241474747;1.1970744559752808378 1.4043161053563224527 -0.40098439066752178395 0.90368041254425746089 -0.72391619551232977425 0.42698326406046904768;-1.1882108018631474255 0.072501743818081956783 -0.91660194005681094875 0.82707417591308207694 1.3764536025659530605 -0.20823599051819466355;1.2532064988986966192 0.92563913134547148864 0.028886120399927297381 0.17344083922271338882 -1.3479169485382775928 1.1340236577655122829];

% Layer 2
b2 = [-1.7122992115917294864;-1.1574220111600999061;0.9286974063312560812;0.37103001426660359163;0.22912734193495989943;-0.24402377996147503469;0.51188375534993124649;0.91435369168360036696;-1.27165233697380331;-1.6038230162103890297];
LW2_1 = [0.36833035339398806363 -0.36989455827757200534 0.28498497554129709197 0.17917975497032070931 -0.042728081690264443915 -0.13289811923325225984 -0.14573337281287948586 0.81949253015106060527 -0.52953979486453717218 0.0091228526086917730714 0.26581522784501426804 0.09203311298967772891 -0.46135112567824904106 0.50004855822493055051 -0.26349519647957830859 0.14991799860330418115 0.39674557394221510176 -0.33600728190822354291 -0.10761657665323044741 0.46576585563941685919;0.085134626001650906546 0.44104383219801723826 0.453715788942128051 -0.3447085800889366225 0.16446493193498004648 0.19182310875857064292 0.086313241074324489888 -0.45397121551923130811 0.2902821006231886547 -0.45048247162943638733 -0.26397888950194092761 -0.052337185012015667585 0.2380267216972258848 -0.033635294056872731827 0.25538875622345214023 0.28020286385321530043 -0.64605449385787572236 0.020784522388294462275 0.35045060387505821975 0.65110591834170494785;-0.61509121207673589371 -0.25797181707482491619 0.012333131913215533357 -0.074101475739215286187 0.34060979817908715317 0.18054431905328352514 -0.29206293803546229393 0.24805881494433257295 0.34632724717358631672 0.39220112401089690657 -0.66344907010990084029 -0.53921031806394059682 0.16978993992107010991 0.39520171560282479906 0.17001648905247762622 -0.25096150909665676521 0.24708803360194667165 0.39499597502967970231 -0.23053467567682961459 -0.31567995248165259259;-0.20328040945257172534 -0.45780294845364427614 0.44094657108687895786 0.35223785577624106002 -0.32247876189693780447 0.82031423871829411976 0.06295898778786847283 -0.098540754317398587814 -0.07134149880679689637 0.013518036389886271473 0.1217005961913410067 0.60988025209367202617 -0.49418779888919511789 0.17542916303464226035 0.34421365260977959677 0.054647614407067279796 -0.25550325880234803222 -0.58446071780324981848 -0.099380922157440959586 0.2485915610559008837;-0.46390822284283739219 -0.31478671432017052423 0.074832585296713716172 -0.39012235053348959246 0.5709279876118408259 -0.15904474715046965083 0.47236795827579508567 0.29604130586862542618 0.19766119305697626984 -0.41536592169418018461 0.18825588482323193928 0.27892677387131270539 -0.18429492061512930956 -0.27060517789082633167 -0.51181871192838856999 0.35438555668665544518 -0.15734941744583078038 -0.2866378516069065796 -0.23950994206092457439 -0.49948514406866773019;-0.3863134859904828744 -0.40725437955547166835 -0.65619645762441392023 -0.40459900284482003263 -0.064399177367426826968 0.5552404667296576557 0.3681889355903147365 -0.13829514069086748518 -0.25704145981857590142 -0.24939372443598001317 0.32962541882095952595 0.16391929275793643006 0.33389567021798077784 -0.73013800346626867022 0.64196105972179606791 -0.0015777488652223838842 -0.28872496532549707382 -0.40849988519472740789 0.12517335595448753072 -0.15118295811651716321;0.03342619139980654297 0.28549042561299015075 0.25536996261978783807 0.065180835550582960636 0.002013966991077553205 -0.30986345571319789949 0.78107336980192909603 -0.14405454497992351004 -0.51131803622212701477 1.0767875570597527091 -0.29131731234453189794 -0.052724168912252421249 -0.0047247951247207523387 0.14879111573639230981 0.18749258637576352027 0.29773653366765862049 0.30054797002893313129 -0.41047242979793674422 -0.077653635192629758 0.25411595297933275983;0.033885338206559062479 -0.26262842054400931113 -0.52832639941520076476 0.20894843185290348786 -0.061742748476334992358 0.058623826959968573791 -0.38757702581570607769 0.48172094938074799808 0.37506028732059032427 -0.51447658499398096765 0.37420538574511658103 -0.5774085470695046185 -0.6819492192536287245 0.36208320273163346892 -0.24080284536420296093 0.34505660864499609897 -0.056161679957968356491 0.075776023973297010339 -0.03384229488147463133 0.21841466299231004911;-0.42373104489695678776 0.13751556255689559305 0.37539621653047511307 0.60320990593027101756 -0.43036285724269141006 -0.2256310575779029437 -0.57772333997968494668 0.1044333431063975276 0.050690263077122814372 -0.37027635417099202808 0.36641218304204181688 0.23147238259205799027 -0.032414189281967202561 0.42893639619590046008 0.55562376529863644059 0.45540094813711839983 -0.19731577975318642659 -0.13482998516191871397 0.41540731645565209806 -0.05774943910162214783;-0.11184047054530922571 -0.70563807952931967282 0.53404258655345249185 -0.45829342640774534123 -0.32748310524986018466 0.363661387138774439 -0.6385631948106942346 -0.33656929652980016598 0.094004284622588932252 -0.13384031205753110783 0.39523659547199035957 -0.016716182693622506222 0.082175759850055873912 -0.28703541889097766715 0.12974408282396787673 -0.42699568335002024977 -0.1414066675208887347 0.00014263180950371389527 -0.33799856151569840357 0.16726878758102689537];

% Layer 3
b3 = [-1.9562445214571841934;-1.6909602126283307388;1.4992630776892232891;1.2999725039828609052;-1.1834283262533538128;0.96699778929965063412;0.6192394643671330634;-0.49387983771275550948;0.36070693514175278249;-0.089881110039603501205;0.036381082381953255833;0.29993408863149650934;0.48685834736299898884;0.63961157019578873673;-0.91873896319733583393;1.1408690033182500301;-1.3195680561127274277;-1.5044235341923615223;-1.7315916610425252653;1.850700456015990758];
LW3_2 = [0.60410929839084470672 -0.67619331790557168915 0.77903880760752863832 0.34218891943151319435 -0.45377159760227053775 0.72584359152978694674 0.24418704276646502338 0.30539126987179315842 -0.89034987408065047187 -0.15134746870496454396;1.0419349621501754477 -0.38650055061490645736 -0.31692968053057773981 -0.37868415157023510575 -0.80264313251822627659 0.16572227585969742658 -0.24988522808589655466 -0.82481770923506303461 0.48404907306635458486 0.66581155011358916784;-0.66834145487596319235 -0.65987018760172588827 -0.2131369391670430713 0.50245877098093982838 -0.59957141790828460959 -0.25537871504975967474 0.25489589255002570445 -0.71429809638576158282 0.49322894140740802804 0.74393810507719926317;-0.36062812888431905467 -0.23929979154115746387 0.88953926556180451524 0.35169535919970285054 0.031529323268393666391 -0.016173765442937075576 -0.98948142022308172017 0.62332124478298178705 -1.0273897416346411404 -0.2253504135108868045;-0.16814654343100751688 -0.69936314468309668246 0.38720477899989586001 0.3907055259350711296 0.39925048673028185053 1.3063428738783113836 -0.79346825755217265108 0.66903902957135141794 -0.020065702611641131337 0.42462124911652898707;-0.17710146868788251284 -0.83482980463372791213 -0.73035794844208135057 -0.12748580156167571564 0.38591481226455837117 -0.90416255563605740786 0.060863025248099875131 -0.64206870646089220234 -0.85180192681946864663 0.34849166277181703455;-0.95417845893071240315 -0.59756097615199932349 0.28431588897273507577 -0.6003278942659977524 -0.35963440020175829748 0.71215342268902448453 -0.68907272800151964098 -0.34885781906517399076 0.58701427661213290143 -0.464351311188140492;0.40291535262431854569 -0.89831105865583660286 0.74797986652515024986 -0.74090531338867260391 0.55239705375983949587 -0.2138995150614220464 -0.16723436157589693929 -0.28951574219622733253 -0.61707618188297508333 0.70001788892025951228;-0.31497909501903653684 0.91542154837572464743 -0.54578130490799559027 0.56706402393623533964 0.67853776476114835425 -0.47146173107576638817 0.53076965075047743969 0.46667884676480514416 0.2872618098758498717 -0.73638698867493279643;0.45701946823596190095 0.12997597174120323338 -0.4240709804396959326 0.50483358821888046908 1.1385978271281136376 0.12786388156466704791 0.43346637741665333676 -0.80178333833720616397 0.82401423622591551954 0.25809319317978068886;-0.27526191922287995828 -0.47885677798008663419 -0.34355552038342002108 0.20922949081373465319 -0.095403592159648054061 0.21951595628284942263 -0.77627788673438491429 0.78855073884693627218 -1.0954993965543853296 0.75029606379077340428;-0.13734843780219169185 0.22450770593537106024 -1.0454694165934836914 -0.65596862194755911624 0.69465779453973486302 -0.36354168176966000781 0.61754048454571663918 -0.91639311580535254276 -0.28406731076163027616 -0.55760564717889582464;0.05101337820825891517 -0.074533102342570003995 -0.21044117613087248708 0.52931203537211546362 -0.10515003989674091833 -0.49055863613993239136 -0.44186691473695255405 -0.68102767097944849617 0.78603663553883618142 -1.0374345038419012788;0.19249840649856844732 0.35590630490232488814 -0.040530736770586675566 0.29605456840797034213 -0.67432259373157343862 0.18163860159436071018 0.68147533618467892591 0.59797083370395365254 -0.38137726380297337636 -1.3754429045151292943;-0.24306392530806414376 0.95194561256419663042 0.50826903667437095535 0.11976651707644755951 -0.68560772127989799696 -0.46188448962493877659 0.60447597785405982052 0.83117905869552421994 -0.76027160595304887902 0.17684764030140795454;1.128836550460071253 -0.18845390426702057773 0.49003226981953429409 0.50659246447227224142 0.056880636765351828832 0.66448788722037022136 0.60083476846874916966 0.9450784820551521026 0.23918714165990770382 0.20746592492392304519;-1.0705103132561104573 -0.31861944891057392137 -0.7986922966052651951 0.81326089552128544291 0.40885770455228326314 -0.029338223826092073299 -0.3825400936579482214 -0.28746243864729797979 -0.58221931752305466912 -0.69107690855591397128;-0.039923308289334651089 0.87346352652523551185 0.55336801891200049219 -0.62207958568963850343 0.8775120206022997138 0.54461056694478093831 -0.27827614778457937517 -0.044289144100319491337 0.92136068917892366414 -0.30560181699471244965;-0.27966821418369175456 0.22901160772153389411 -0.69746563469194400309 0.9017572965248680239 -0.11130173386437781924 -0.76508998443077536056 0.60117550474935044225 -0.23346517513333497895 -0.77502095765375722536 0.68549120819975772889;0.35651422403047139387 0.72356252566347423194 0.23613390187156738098 0.16379782092251971015 1.0656119657626736963 -0.34745825577663369543 -0.63407217428379225588 0.92456865299771995304 0.0026601821284596579263 0.85315374517360142992];

% Layer 4
b4 = [0.059111141260568010602;-0.8804200019338980221];
LW4_3 = [-0.16377795416892654279 0.25614336070097670772 0.44133097616181687917 -0.62251979895335995963 1.0216368440296554887 0.5356482115801612931 0.23299888534382415251 0.40547510053436186528 0.76612328467196222359 -0.013359835879403321457 -0.23601098271452622401 0.44995119189244747737 0.017480221556140481537 -0.67876869758289015699 0.2983499559000574175 -0.011045656482460261896 1.0240324469278705433 -0.15720787502494218413 -0.6622575310635236967 0.12444491347501593359;-0.79196443282602313474 -0.58361009011664399804 0.5213638003711918989 0.64199081636573807064 -0.21065837163530179432 -0.54156788501344732545 0.74313489107212415963 0.76308726872277188313 0.50477208102191550854 0.19332742199508984315 0.41159035593017612165 0.34489154687628009732 -0.41726991773746929804 -0.93253816198241179514 -0.47161493414238458977 0.60250246480138414107 0.37155747378578513063 0.069375920049825456903 0.95239442408462759992 -0.86583080665465594894];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.435524784214749;0.253103909698595];
y1_step1.xoffset = [3.99825870652185;3.02773969690352];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
