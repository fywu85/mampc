function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:09:06.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.40432655203162;-3.05772726649525;-1.50337830487775;-1.32632633189706;-0.774141053765284;-9.39260604806797];
x1_step1.gain = [0.997016897859808;0.39800416843654;0.707661234476445;0.819300701824441;0.859311021318811;0.168214762275123];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4087023817954911209;1.8350895291784099506;1.4709659323741972603;-1.8082495776654943231;-1.80729280720541019;0.50068580768813708559;0.90579094394301618021;-0.9357571240556703529;0.41405316755243820603;0.30807727217729002911;-0.18991214258463331999;0.06771116664604100166;-0.74093917163935685277;0.96007371789854845101;-1.1627746308137199005;-1.457542002635601408;-1.3949725683621001515;1.7791259038574913642;2.0680549742815217407;2.4255750037432783905];
IW1_1 = [0.80953073217425319807 -1.0015036076608767601 0.71993522709950885652 0.9813444615677614502 1.1308803429717098066 0.87899878188915614441;-0.53945161641279060216 -1.4333717985759253377 -1.1657036917728993419 -0.92401284622145263281 0.30626919502219590585 -0.65844484762450294912;-0.54821698412454322735 0.62339885736641453828 1.6589533362625994428 1.250337892326089495 0.44269780932459701361 0.10519715244018496003;0.6006289879023505307 -1.1358169325991955834 -1.3449220820776230934 0.53495648376861371087 -0.16158663225770331096 -0.82171698933551395871;1.2837505528023982482 0.25652796868627836258 1.0355150950565545909 -0.23495810022172203269 -0.13533795305573706469 1.4975039491533832514;-1.2169150862538000712 -0.28403941809261984419 0.41562276680184367939 0.37880806654812415601 1.7443098759232191775 -1.320303942020289778;-1.3453958147021489733 -0.76046305282417259175 -0.61384785584758638777 -0.85363689536291342819 -0.062156139339886271045 0.35990025879641146522;0.78260093506129224661 -1.1882862757069379001 -0.042753855250088311502 0.4075264633668819747 -0.99279339952292056104 0.97183529416274849755;-1.0438055639394256957 1.0483430160808342446 -0.019490824525234623499 -0.81434328037510927967 -1.3556949417647334855 -0.43162226364046041294;0.68456855637086122535 0.37584284484145419336 1.4629254661841504248 0.79230724739628766162 -1.2991946100193905167 0.26241266789804851278;-0.71762775829243885539 1.0877589001073413311 -0.60835083756230357022 -0.29416681727084353914 0.73141502516148182433 0.84569738457918974817;-0.49470862165659401644 0.98410071144468691529 0.87180181983138882451 -0.54972999384216181262 1.0956354537360784018 1.0906486467548726083;-1.6329509553535708211 -0.69930693697077150883 -0.84556501574951659084 0.35039588884964512072 0.82067221252239219709 -0.30208527484429387178;0.54653631094854149275 -1.3714989847846854598 0.83280324402651884075 0.57242118413270137722 -0.66421662505715728386 -0.24234372070976317737;-0.44561813592777910209 -1.2496572053690666593 0.58363507086185406614 -1.1675409828413587654 1.2608204277270007587 -0.23678008448190676627;-0.91955822294989830734 0.63965878686430432953 -0.95881947893901275926 -0.77200358401404456377 -0.74222030198941724155 1.0161369299983837866;-0.48416514561861662136 1.0911777757817608947 0.80628320089172933471 -0.39092899607558767583 1.4465123822923982022 0.82642948381082692588;0.52476308691787187932 1.3102400000654639278 0.5861036802059134132 0.86829161680737976248 -1.1810720662015903315 -0.91112384672860158297;0.67676358496564237299 -1.0383375481144201391 0.76036937646498747867 0.29113405467567654572 1.7851903420347594587 0.77786203468193260147;1.2835966627784940464 -0.32793219135862239355 0.14339932912475525373 -0.93061534381309118924 -1.2974320964282455293 -0.36815158841143225121];

% Layer 2
b2 = [-1.6231377747894073504;-1.2121802253677751438;0.64246085234808947284;0.43575565655551362632;0.32183405217083810301;-0.27778541415390856084;0.2630893058130449047;1.0658857576950189205;-1.2306430249363680129;1.4695643861755620652];
LW2_1 = [0.49236847153989915515 0.35439668513311928244 -0.55027117460522656511 0.14406371495997016829 0.10184649032126011359 0.021957988118584684939 -0.40121410546630986715 0.38332875526488552342 0.5987460573816894005 -0.06079802509813187622 0.46925630022758235693 -0.027331836329862389118 -0.4011897808906378371 -0.46379738818313420712 0.51929321390980043294 -0.29105070424562795584 0.018466299872705555646 -0.15277942706267347295 -0.29091864853928367518 0.15038052061181678143;0.10624971628656931788 -0.3328613773817011845 -0.015725971344281750725 -0.13197358441379727911 -0.2699322638350085124 -0.37473747818436009549 0.086842351119202937371 -0.69120478074131719293 0.021624673075129649535 -0.27587455211420153223 -0.25171874559075685385 -0.56593210529747384196 -0.024463211421381532429 0.26800125109036265769 -0.25169746724716413055 -0.40994153492619955781 0.089425279439227803313 0.074531939701487665006 -0.96602489492214460576 -0.02171127324034122924;-0.16184858247041905566 -0.42529601326819238549 -0.33638510844035707237 0.058989982519680322914 0.48926038330713828017 -0.47293511166048968208 -0.043203839001662469599 -0.42908763907553798544 0.77463770926028074904 0.65195225436858372792 0.081801060422338325862 0.31256716106229753827 0.072782491046870192997 0.14795978228195433291 0.54191872928475925963 0.09750250422705743214 -0.50197762240617171958 0.24670995004445911425 -0.32374918859870721599 0.046699087954017774738;-0.62096457432554552636 -0.1746579426714295058 0.5213839512532719711 -0.036574806346687575853 0.12649115924994441817 0.015576835352766589191 -0.055700801641663300057 -0.23306223880002677196 0.40490516720420027807 0.48108530785832998022 0.28212081640953301509 -0.49998455381660605878 0.37341014121375620816 0.62582807307832277743 -0.19474910418381374821 -0.07153274913478357977 -0.66829807088453696551 0.44493040825788326975 -0.50172026659203805554 -0.19497721253386199325;-0.38757124904610129601 0.49597799478424503539 -0.70795839975016239265 0.17382164361149127219 0.24841055531781652821 0.12835880878020622387 -0.25226508258524377171 -0.15317486428907250984 0.2572469752702599699 -0.53226808179104934116 0.073901330563526115847 -0.30860262557426271224 0.11398601930726283415 -0.31171061786442977315 0.08080553026743199363 0.1698296501539531822 -0.10854038388354253497 0.57754793212229194044 0.089541284422056485748 0.52236959947419148165;-0.31262449146467580219 0.23143363257388935295 0.2272375087244128955 -0.44730771218113801746 -0.30242395736212546176 -0.40037402633327012769 -0.26038054814060734854 -0.34291199356474810767 -0.19782215683436635278 0.39031365038898868658 -0.52403122117533185165 0.42081818812754651082 -0.12325764090573075593 0.75156676893534557493 -0.47503909702055369113 0.39966216824611544567 0.34131011458870813557 -0.30745654411691741847 0.0082397332960839671928 0.47894453311794032979;0.61540450714540895216 -0.30917407616045822216 0.27860237522914343966 -0.061708974602933605591 -0.55494828817645358576 0.72581462380688099856 -0.29873853040618875143 -0.067383490307346610715 0.80845451109679999924 0.17076147660750878865 -0.050121890966312726556 -0.21587477037436669791 0.0297172952119120308 0.33455001104063092354 -0.095147656704131375327 -0.085377106025914889509 0.13976241283150894756 0.25295127522814558896 -0.17549304246357178005 0.45321653250794191603;-0.048038154023467997955 -0.050961102199987388939 0.52221498335048832651 -0.014377483458102189792 -0.73615223182568911842 -0.58110292093837179195 0.0159185722037723347 0.26209972379270773946 -0.12800426508194673314 -0.4249878088510017915 -0.53014901946478276695 -0.42216170560266635947 -0.57052790006202880324 0.10835647451954114051 0.16493834290302977763 0.15667061140479743298 0.011863000182925225595 0.009913229592568600923 -0.54417356394792015806 0.52934909639452065733;-0.50743629859301908613 0.24311479045898934381 0.47596873321126048628 0.091642265421826060723 -0.10288385660297100221 0.84155857514000864672 -0.10236238105176449775 0.25266557446327392311 -0.4089615641256955092 0.49676267415458513765 -0.30481743312771469867 -0.53012525686867917329 0.2552139138516668071 -0.059893813201896239917 0.55677512968794384829 -0.44764920178782358073 0.020856783767466611362 0.11892640005908319822 0.10660675451575274408 -0.091384079748933977339;0.5667391636318689363 0.05180199836283860132 0.26763823468692710117 0.065128330929059813359 -0.50117806987336621649 -0.22797943593675673579 0.35809859155976203615 -0.0078557477474781034488 -0.053384814622310670928 -0.39561081679995024896 0.58235310680241858527 -0.20604827607389011868 0.020440887981044045946 -0.18860884973710478896 -0.21357373676749691338 -0.27559784067997045165 0.1126567064892369241 -0.26685487677283348251 0.42661826012495984717 -0.6262076986901420339];

% Layer 3
b3 = [1.8746896683084599555;1.8297382704749964866;-1.5434620041097544263;-1.3088737974054296398;-0.95381318210062282503;-0.75943697544649513276;-0.69984296824881409016;-0.67226947223030797396;-0.11183177376803468683;0.086117065465134187696;0.16619278261072581437;0.33530193012886616577;0.41293020619031256535;-0.77466923778540686119;0.95869016362808723297;1.0908289101581127856;-1.2665584577216209006;1.4850176225835047816;-1.9030303353676116807;-1.9269020701239834015];
LW3_2 = [-0.3274308266602556361 0.21849109670558394813 0.27126795607009912548 -0.59101399817921307367 -0.63564005558333736001 0.83342903183865313377 0.076872921040875091814 0.85449347576633494228 0.10412810738794822663 1.10974409831991494;-0.42857723057666080591 -0.83137863470849904246 0.78014115617667545433 -0.76352222650340162424 0.30220715950862936383 0.36696297864150945189 0.56817097476039724047 -0.28955899227240433635 -0.66641724807011182286 -0.50501037042897245488;0.55025414363300861886 -0.038814295945151476575 0.39569916165132473784 -0.44468318365938241943 0.76526711866122620886 -0.33503531106623046787 -0.8598560650704160091 0.65465025113354458064 0.91903861795854646655 0.41977297307272876115;0.25761947251373135126 0.70489207324728087034 -0.68910745163686593084 0.60011449774317604522 -0.89635857656768347379 -0.85699947502218876139 -0.21095356209511620382 0.010412930874359854413 0.19393752248835124941 -0.73463378935299061823;-0.091291834430157481339 -0.79180619700132093275 -0.35688491208282607792 1.173094772118114415 -0.15009237907059183592 1.0180522743804285568 0.15966682298963852382 -0.56435841983056656002 -0.057290871289594931526 0.6233092940355997591;0.10283360682620341919 -0.87432235317122786178 -0.25233973393949554742 1.2335575073271567437 -0.46047447719513129316 -0.39844220522430057185 -0.17030416217980665072 -0.95996740546286607465 0.59078215122148070026 -0.52021352643191642873;0.72966623418814924307 0.029620751340017504455 0.30464880963798524061 -0.29430925693616510896 -0.27938829067422155106 -1.012182766008997481 -0.31283638486583048577 0.64713205912009508225 -0.83332152377776624874 0.32285365578970764977;0.31750130241761637118 0.20613601530610889401 -0.15362077716783761883 -0.92621360776571259876 -0.81007870550047988978 -0.50591982899488485703 -0.61734612432883539945 -0.0027514348417143675608 0.56990097221793822868 1.0184926224439083686;0.73424969810809359583 -0.5916273385326903389 -0.515163825407328968 0.49175208860598695892 0.48878802329288567607 -0.80962771877462269554 -0.32717629345085241788 0.45850189870931196134 -0.46267983099614906628 -0.34268449438470555135;0.015534968380812438568 -0.98518462647414839495 -0.37976015285149716805 -0.88974826594878253516 0.12263567624937163347 -1.0424359355410366401 0.41296197971676029681 -0.027750457143236179069 0.34328814721242206787 0.56920474401465881442;0.1568557779986202716 0.87272808737659235412 -1.1070880837519292417 -0.25530634918252737009 0.24799841705926375934 -0.65512997672749939682 -0.16569032889366766548 -0.93108301898397727303 0.21624093110300263154 -0.063262467444361217273;0.6515612003365723881 0.64607320201244966551 -0.51653783784787554723 0.27595795308880471941 0.5419385782996234413 0.069946028447375810377 0.36817110466740604613 0.82643898686358829853 0.53364303064310847358 -0.39116379764736081137;0.59830293558500391438 -0.33469671390830318947 0.28794948094000211158 -0.27231485483863221431 -0.18247646908781853248 0.077508320276149636485 0.90261060514670010679 -0.33405526989801992421 -0.58835057189828443569 -1.2014918699797052515;-0.69690736547509091192 0.2993606275435292674 0.10716809391887380243 0.079190660050234201739 -0.0064375621265908939891 1.0964889873138987664 0.32439476531704902751 -0.6173782086045154216 -1.0270955807205819355 -0.10069366986816849496;0.70518994155696212989 -0.63626549769934881429 0.37807597588252817022 0.2322219249639834171 0.21814940027645221554 1.0389728189946902948 -0.53985107145431110443 0.49562643304115611143 -0.28035081289850549702 0.7896684642811009347;0.2807878928220144954 -0.12908837219889812697 0.83555385396081838234 0.68736048774310343212 -0.61349277747781261194 -0.32454461749678242821 1.1077600297096963367 -0.53058800321719679083 0.35620418478418341968 0.9005211818527513179;-0.70568082204001303381 0.67820952308464710345 -0.61983548437903990269 0.64691887010339077513 -0.045213039842605856622 -0.58319824562590683037 0.55147851148234350305 0.78668357313232062378 0.38044207210325797774 0.20543085359884952212;0.77550432456395235192 -0.2440314259448148615 -0.34251111724895055843 -0.47106087956574910214 0.37939662392754958109 1.0156463691776906888 -1.1043546742380470072 0.29818068626216287509 0.28576988761373101067 0.83191905389713727281;-0.54088298537294920987 0.59008562132578801229 0.19912667854596288741 -1.0102364197348780994 0.81185073980248623204 -0.54779610351459662176 0.5307959038739021862 0.92106988522087518412 0.26469074193405656148 0.00077707224747782497904;-0.57388153249120188448 0.67655374586936056769 0.29983515507510954956 0.69883492673498881498 -0.82050684877616242296 -0.63248356821503415315 -0.82034742326858123285 0.7633465292179397732 -0.34234161449405603461 -0.40305112403324327985];

% Layer 4
b4 = [0.19419936776353013963;0.68934224355398721062];
LW4_3 = [0.34815854714424526728 -0.41641878757861222615 0.74971147521655001622 0.53160889890942042424 -0.49361453117768444576 -0.79008532527122810052 0.4131334467374104813 -0.14821557925629036401 0.5003230408107179894 -0.47098715934874807454 0.76338844544838557749 0.50969687059433499421 -0.066234024479005504382 0.072931323312337759113 0.43249140046436496121 0.54781152727086201981 -0.20035218253570882818 0.10035702717559091823 -0.023484830885417456309 -1.0641331034284116086;0.63833423436037972643 -0.61650930463395703374 -0.6250462998159711514 -0.12206116593975657736 0.45260978284655345449 0.58270121232155058788 1.2091192206457435088 0.43183918779338198446 0.57140278616400763667 0.38459682387650401258 -0.069158068112794721105 0.075389475030379182741 -0.16897375604202785615 0.75171590630465612293 -0.26221466700233775349 -0.20251321693970322779 -0.068129332706833800604 0.63840817677566308319 1.0891969186938164071 -0.49411225397818758776];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.223240001976496;0.228777186864254];
y1_step1.xoffset = [0.198232152425045;2.75448934286387];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
