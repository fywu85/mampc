function [Y,Xf,Af] = nnmove_12(X,~,~)
%NNMOVE_12 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:11:30.
% 
% [Y] = nnmove_12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.40432655203162;-3.05772726649525;-1.50337830487775;-1.46639144081691;-1.47317076330138;-9.39260604806797];
x1_step1.gain = [0.701215936936036;0.342040821094694;0.707661234476445;0.774842031884718;0.660834644460766;0.119048524684758];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4058587000399938027;2.442872405128579949;-1.7963195747526250479;1.4428191028142225427;-1.0777288144046937024;-0.68164038675698779279;0.6413905353262989717;-0.74774091808837350737;0.20783590166719118075;0.083400354208997384831;-0.2439811350480328711;0.75818564753307549076;0.16652556521981617954;1.0606754209469739791;1.3265179535361273366;-1.3209717182824363135;1.2648699103965617141;-2.1343302347650556783;-2.0651549456223210477;2.3856273024181353648];
IW1_1 = [0.26223450341080811743 0.8573909398255793457 -1.4432935613398636399 -0.9042855936279681206 0.079605651608206845493 -0.84158186422701963814;-0.68543635591006779606 -0.10377217690173513864 0.085789848764476928089 -0.42589366456425703511 -1.4098065217491544399 0.59925252339789691902;0.056473245396847504551 -1.0660476352859646898 -0.024408620481763388527 0.05936044609379307474 -1.0255177789970220115 -1.1898873378421175317;-0.10958201879900872355 -0.38396253859528389762 0.57975020969067625476 1.1016006056225293719 -0.29408899932150278644 -1.1788691345818089751;0.52511503221788879969 0.10420513288483143621 1.5309512271114469328 -0.014505959603423185245 0.54581280025107337117 1.0704585887963777857;0.18008095700223844537 -0.62061199003972500332 1.0771519838127669999 1.1667109559620769677 -0.64464693713536747044 -0.12785792605961787682;-0.25056252579934551461 -1.3053346656318745023 1.240786329957336287 1.0515292968862044454 -0.69090881348258614825 -0.74557132442668727634;-0.11919586037069486439 -0.922171549857643158 -0.63618607279087036055 -0.31416107402438553375 0.2167574356264724833 0.61704093043686270015;0.4610721401039552525 0.56116985728974222436 -0.43773425917048464084 -0.23141354103697489575 -0.97301381777782147697 -1.5337247540220020348;-0.80390825552626676842 0.050266520669766598384 0.76607830035274404601 1.0567135836107757196 -1.2787733276000674554 -0.77449050870428648441;-1.378604182311140347 0.87137891654957222443 -0.35714333265983411181 1.0180020618542340305 0.72718610486011492355 0.18364596783868722407;-0.33204626005679971357 -1.0538879370852931583 -0.62005188300963720582 -0.16151719002859812879 1.1691585240861097628 0.38702025534561490527;1.1969901383767591607 0.6624414528831780169 -0.51789564329094217587 -0.54363665721454890178 -0.54491341250899272275 1.3545484741214477431;1.0355322959358586044 0.92549000681633819543 -0.057034565717974605725 0.406357863623354576 -0.015584186708024132251 1.1349670022131150837;0.63071445818206561817 -1.0485333878517042461 0.25065887605922421155 0.12484686181541246319 0.45722638067759624469 1.8081161569720369808;-0.92818256574079172072 -1.4583522379634363819 -0.14516952144581654616 0.099190735637469121255 0.22605137673216374461 -0.79194017566966423693;1.0777814061704038551 -0.63405829259856583136 0.5992762584958728489 -0.90757917460398951359 -0.3953679067906454847 -0.71128985926163768028;-0.20859223404242693833 -1.2774144695974425368 0.36280411584849681095 -0.9483225874487333229 -0.7827096795440586785 0.45478846338925926762;-0.37284445752959222142 -0.97493888039530562928 1.0892558203339302025 -0.063204267001367039902 1.0257230144398383764 1.3650377894582221838;0.50609745526837190965 0.94217295125216760088 0.92451571842095714437 0.95355053313766247047 -0.8309298374507552154 0.85420940067506534454];

% Layer 2
b2 = [1.639199022184871124;-1.3546828805171853283;-0.82064311764181729902;-0.55868264998296901513;0.27864161755286470656;-0.40220572921598707339;0.27137998417997655221;0.60932193601914852454;-1.4034392993848088249;-1.5861906640243297328];
LW2_1 = [-0.46607782816073412002 0.36042362877719053005 0.036921597226294414207 -0.32001780034501309258 -0.21766339822747582389 0.29855206601567857438 -0.33452292226937857533 0.0066586710804294596544 -0.66593537201899988265 -0.030690500293696118539 0.50806130395718429593 0.29426824577255827897 -0.46689634656386047595 0.24087245564299439304 -0.098033322900001065858 0.1762685172864950911 -0.17234065823307812004 0.149938214095861444 -0.19351122437183831959 0.49186265228142495021;0.53147000926170495649 0.21318415211316321667 -0.096252642284657283223 -0.08929348791588301304 0.37860218264480788308 0.02737677044386537667 0.28898913140053505977 -0.20178321145798439051 -0.79947494373014726943 0.18164777442887161674 0.4803166094431557398 0.42697344262509506763 0.01337069028723406397 0.031657634630012525256 0.060449934981443798065 -0.49632866363146210809 -0.18518148723977514991 0.31756330142065597455 0.52400774935458183101 -0.39744133601851155957;0.41018726887963891103 -0.58061077106550151861 -0.60079269043156613428 -0.50411200018433277581 -0.11864286264269729987 -0.26705821874782426084 -0.27537887721889919845 0.13756644397521169965 -0.24304328658704138499 -0.47871228161605294815 -0.08395473080384202591 0.45692736440530812292 -0.5898924976535134812 0.63109749541447024423 0.41742753021797895929 0.40830496221326956219 -0.23995105155970569699 -0.30533419754427204573 -0.053680935208356733712 -0.032974741387375175461;0.64185117169651184632 -0.060154254282941840848 0.035771977095526354129 0.52444220515277228944 -0.14923916432513917307 0.15361127900898668974 0.083050071698588329161 0.038342054844477890807 0.55828329624964379008 0.13360289929631041783 -0.083273723431849425158 -0.61512094157234109559 -0.14305030112520500385 -0.0032555330962488228386 -0.28672918778624406633 -0.31994671851898059955 -0.18546831916817735353 -0.17361920047965556657 -0.24294365026715433742 0.57418576818785505012;-0.11048479916375704424 0.69206411376417398262 0.26504691993382950566 0.31020184496487590575 -0.59798059402051184641 0.85971539194753443525 0.049690098456452794218 0.066727544361522714289 0.32198491995434863622 -0.66305460546144834311 -0.42807932252521274652 -0.35724996439081935229 0.12464390752450357769 -0.2927115471489523113 0.0080303164348352520235 -0.48442698460565736251 0.40950599751130323245 -0.1107061882830969457 -0.41265901666887111476 0.480740093159859605;-0.16711801701230760697 -0.65248271964574389159 -0.18387409530464079999 0.048449480270617142907 -0.13514513855147086696 0.2686871075677875198 0.22637967078609924632 -0.13552846332066342816 -0.44888955555657156227 -0.10872522510013417352 -0.031298007032505147096 0.36329706143933671036 0.023074229986581790142 0.056664081453338940864 0.30800202468626264318 0.0027698999668524723616 -0.01467630999174787329 -0.010802672639919066663 -0.19036015578820328353 -0.072740398420828855652;0.28295426758441771797 -0.56170859722800259295 -0.64022454904257253272 -0.11722046040285388768 -0.44883341386558722741 0.10828313384305850164 0.41629244905577655889 0.7218041033854393218 -0.11733223676261396451 -0.082194833906153258463 0.0097575384720497634894 0.29854595985536835911 0.21050707641625790445 -0.099816923201649393471 0.18824518129092807084 -0.036280574456600156452 -0.073184554905434018313 -0.27760745946541326434 0.3582728205337709082 -0.084743452130931928856;0.027918657361888983559 0.069049115346320216746 0.16110717418698095038 -0.069434257932796283885 0.38233532688809718225 -0.32736102409770828636 -0.51448403531044728521 -0.15086358099151053747 -0.31865882444309712174 -0.14044574453612646003 0.13902347850391350015 -0.30915432188641828182 -0.50068417146914123705 0.10235782915014800254 -0.24540032502837880179 0.0011204231068953109107 -0.023106169869771514547 -0.032199302478713887066 0.45570065524778885502 -0.26491704881293515195;-0.082543249341814006748 -0.4400547174525947236 -0.069230529872239141009 -0.63690687340125506921 0.27167035580772969094 -0.029084241577211865371 0.49335381836176006587 -0.59135863462128490653 0.50566096015057959701 -0.34239911216809770789 0.66692335433114668941 0.12463725567008307471 -0.90725752885194344 -0.34907207136384077462 -0.29498312951925709235 0.077538644712909096657 -0.00095032903608095568859 -0.01998675901322964632 0.8704750000508741925 0.32120131540049240426;-0.004736029935401664219 0.14481865627080400816 -0.049156625717426377653 0.32511138699748887149 0.56667488446221814247 -0.37580111164834867354 -0.6240774436613905074 -0.68494499956239196514 -0.053240718888773151674 0.48315775189711601678 -0.14399457200688670078 0.10886020583244591931 -0.18406048190442039769 -0.62226692694679375251 -0.036462007500318791009 -0.51859579633764518736 0.091726795303877894927 -0.23796650942966388054 0.37224604038285780128 0.4408709560132010874];

% Layer 3
b3 = [-1.891932022727817353;1.5112224168840169281;1.3508300077268717843;-1.1592407772572934643;1.3133528363976945119;0.95244760680367956951;-0.73418066055725506036;-0.48668535827148828865;0.087158205389033835409;-0.059295125981950941307;-0.043980694706059350607;-0.15404920479960260149;-0.30009520173592973968;-0.85971639400855681679;-0.76121835577780894155;-1.1752612168258109726;-1.2972166016530535249;1.5755765500151934777;-1.699957041470607777;1.9326457762348352443];
LW3_2 = [0.24666142639584426322 -0.51520275898841461082 0.96732082784868878012 -0.20769882573837211703 -0.39872816258818094548 0.25504375228011433308 0.77555989023415283778 -0.76603224187816032487 -0.38889522922987457276 0.45101025859753990366;-0.64108734840302650237 0.84406058644208392661 0.66042046005021892707 0.16261272157243183978 -0.88520310864055518074 -0.85786443105283427535 -0.27613530960789312019 0.7242433085669151005 -0.05926097170170552958 0.23718450525460632594;-0.52511636760381608102 0.58560711914506968778 0.72809088329837023945 -0.93091492183348734102 -0.64883678185097692914 -1.0832058296024333899 -0.43422126176557351851 0.044668906574519898212 0.96727072980745998354 0.57894122150610116684;0.47014735089132059231 -0.07760247696022432029 0.84277393546091483589 -0.40513560383069124882 -0.80680955763847883588 0.13259284542892871284 -0.62109924337544220041 0.46144043913304161331 -0.79559844368293153316 0.9638721121318156726;0.025739943472380157063 0.39962222162057792207 0.90419394438776889977 -0.52416127121544653367 -0.63776555328401407507 -0.90322427040886699157 0.20929559305271258629 -0.7473927679602219154 -0.97670996376131935524 0.12252305663104115507;-0.58740273889768934712 0.59219158988188125292 0.119348711019762313 -0.37209448194284444611 0.10769861083162049487 0.35477217137017252879 1.1467565363682477031 -1.0771187522200726949 0.14373124869075870613 0.096476053430399846822;0.91702928916268033888 -0.2003671842788234958 -0.66043305353515513456 -0.07956775401844583262 -0.29738795383898025682 -0.25312428596653402391 -0.89241803829617483146 0.09849289318189800857 0.3120689833693553461 0.90016424981456577559;1.0701162672656729935 -0.87478697439785713108 0.10249213376772178807 0.5262029122213583987 -0.17548249177320227044 -0.092960754344086821144 0.65490817748040452972 0.71203364219155262926 -0.48827461191552296027 0.10204912816564690181;-0.24304739323057489297 -0.22434268188390810161 0.061681062877019646185 -0.42280898226432178655 -0.32136889850989941442 -0.045605354567992306691 0.86388449541808509657 -0.21133317411796709306 -1.4043833337915208048 0.37952646246724525136;0.4881058115503387751 -0.57220457815784153688 -0.39568147502693273854 0.37239765329524349147 -0.43096414456551240812 0.20744462147885817105 -0.49046842545706942351 -0.86200921482524339723 -1.3785989978248895937 -0.39012341047921467174;0.23991314062362215087 -0.41826308116822163985 0.13043806050699535692 -0.73018631536122236003 -0.2808583972839951981 -0.91594957682106159513 -0.19381308204270633611 0.21507619351046164402 0.75514267093996201297 -0.55425386503592677379;-0.18495587494929982553 -0.36834935040941324536 0.51016537160728403499 1.0437863921228247577 0.51517137164836779295 -0.64312739075406755163 0.66943611639938616076 0.38684083920452094763 -0.87225854644085831779 0.63968206214408040999;-0.50606505555337710778 0.41890058020185011456 0.7387425725160411405 -0.65406456439658411384 -0.32119280835851071743 -0.26370313798352001955 -1.075440230966110855 0.78565327348864189005 0.1190840407518973243 0.35977782409017866616;-0.56207981146951679907 -0.32456124698984933907 -0.46768629935705191558 -0.6269602242585349261 -0.63867340611221379287 -0.33162892223797824087 -0.72892647547037436873 -0.24652494491631277151 1.0015755187718626829 0.87232195194572159647;-0.97575819700392640854 -0.82200890005263149707 0.40776735647272327467 0.016683043518493107654 0.03222942558412146552 -0.53385890786768042116 -0.035058716856388796868 -0.9649997098627620673 -0.043051866833732570228 -0.65639430578045199205;-0.12617520210801203007 1.137662678418090545 0.73219495242064236429 0.3596600974816973606 -0.75947817515062199245 0.096519763297873539809 -0.28533982277414848827 0.80021458207964046849 -0.41998102551500721136 -0.32125582484322090515;-0.69811706121395988855 -0.22410062317688966838 0.88757825515376620462 -0.8058242728585690573 -0.50590880584225284 0.029141366056152088332 -0.42712680771535876945 0.33918187698992185997 0.47308726469456824359 0.88231485490579741882;0.66116164615902395241 0.67490657159031697265 -0.029343142914214817574 -0.32724878432377779713 -0.17453377982160475645 0.9314926109346619576 -0.62362062714380650519 0.58357140940743224 -0.54832498424604081411 -0.61509050277558596775;-0.97657684927396881669 -0.56428467363080425656 -0.19106613872594604975 -0.06468027526389966142 -0.53346802960913064506 -0.73243865395728990908 -1.04531443308474703 -0.123118614879383248 -0.66840277464977115862 -0.26647695268732235485;0.025076673978406266441 0.7836035344648952794 0.61700806453556866771 -0.080589823313274841499 1.0219327001597284799 0.14271773263952980404 -0.83605621799265050775 0.902526077335986332 0.13495048981737317595 0.17890613745175013016];

% Layer 4
b4 = [-0.052849056368279696827;-0.84518693851444792742];
LW4_3 = [-0.78070736679800467606 0.032010687044219512942 0.45356232001069207715 -0.23785265131716676335 -0.16373137987496472201 0.047919612963573908482 0.33561911901503382882 0.059071788345056386316 0.90692028574301430943 -0.23514675180678057398 0.40991902766879950715 0.39371965397065733505 -0.39587597624647913319 -0.47624885847310516329 0.82918440067855980757 0.33136058389793215939 -0.41119468353291871443 -0.68428621317776938682 0.50517083441441845704 -0.26264657230310445302;0.5936963543423683376 0.32495753178085257096 -0.24305339562607999881 -0.056563692766509764132 0.72487636713334369087 0.27186405405565405857 -0.05427131513260622514 0.10912103374059564653 0.26239123656685225949 0.15515730933236615563 0.55436231668804081263 0.16088083618709100864 -0.34175404813710119623 -0.22414149272631800347 -0.57031659203176132689 0.34682172365974561767 0.090152571020574237548 0.20527361561734924766 -0.030622874707801284178 -0.20307162032514847194];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095924;0.178851631325753];
y1_step1.xoffset = [0.0999999999999996;0.31416652584394];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
