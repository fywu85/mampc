function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 26-Jun-2022 00:32:16.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.61717502386496;-2.93543929307278;-1.41902644818002;-1.79932934706044;-1.53133411450572;-5.96399313732134];
x1_step1.gain = [0.605311482852156;0.392168839107982;0.661948410850101;0.696966802812551;0.730235753916952;0.12838627801464];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.8306780393187294109;-2.5548451520830348649;1.8792877955045617089;0.55925489878281864353;1.6701221088703672724;-0.48477945254975657319;-1.8139286447964328985;-0.28199758230610388887;-0.95054062476326361963;0.21726164246581811113;0.037661755334977516096;-0.95299251680400920428;1.4029354768213921911;0.92679824905774788046;0.4038570420314083198;-1.1595425890782433687;-2.0959316069882500955;2.9662188906700666102;-1.9908333265646425136;2.976444096702892228];
IW1_1 = [-0.013058179613562200666 -0.56764159169882533185 0.45110819940295193708 0.14222840694569932607 -0.96591781856168901221 -0.69216280711278510562;0.74366044736114422786 -1.1568854167871234218 -0.61020123484781840784 -0.64447299203796470923 -0.010705814203755166514 1.4019579265776196397;-1.1670939775705420072 0.85699513479876465727 0.77376772103783553192 0.61452383479881522721 0.48795600812009731762 -0.83282787878341923982;-0.44506824448826792784 0.70588919824913454182 1.5338658729053911145 1.4286971696953840727 -0.30273568539774026176 -0.55177697663769964542;-1.4972295893227944852 -0.21849713949349475195 -0.3630372517205649463 -0.20498999504197001897 -1.2160841107891620094 -0.068828124563576467687;0.2364019762456345819 0.31172086006283566961 -0.63847530610575298216 -0.46156128767931881018 -0.60287483473467606832 -0.62645953272484722341;0.29381245081676315989 -1.3323877034946984832 0.20289520305107644482 -0.60773116780189295749 -0.17712625772810994262 1.389032694253403033;0.54291053101433794925 0.5070661925768541467 -0.43793855800620340446 -0.36396148365984298811 -0.85994417933760847195 -0.7886903199410633114;0.41265562456205578945 -0.24478340415733870761 0.39521080090914995075 0.17381148281064198735 0.48775045115586074251 0.21740282109963982027;-1.0651788139894111662 -0.41931026317776970425 0.019352384614624927595 0.16793107101409321391 1.2716220731706029401 1.0121414893011373426;0.036571063044556602339 0.11021417246847256544 -0.20882055892415216092 -0.098619266810825056968 -0.43753448777705378214 -0.66267989681156913573;-1.1306263657969486403 0.77604657042432800829 0.25522272946837198937 0.58871091093177407849 -0.9337547185999571786 -0.97110105758247589058;1.161737578760010603 0.48261354588252092235 0.27998396519006646388 0.6230554552858330597 0.98971637357111685862 0.43140665399441924244;0.88908751073360559047 -0.58987947769635595829 0.073982183489251410191 -0.22568695208772593386 0.74130063404560375684 0.886850989895930919;-0.42671433896149507659 -0.51907455641159860882 -0.44558295510059087174 -0.31161906239005221497 0.90476015734856984896 0.85217385064829542785;-0.94064755562540003364 0.41841817403657161067 -0.3523239954019478648 -0.059554258315304142712 -0.43693315522351872104 0.21858496490314388572;-1.2132713701364739034 -0.5571493510408607186 0.00038272904462646365831 -0.079208773957065506388 -1.0098289092253356358 0.56921004785794970804;0.85998348357354381655 0.33764129213822596798 -1.4935855723997859545 -1.2465840822207161498 -0.37732493787183446488 -0.85471546805457421225;-2.107432949987492421 -0.78857848717595357968 1.084125728141529077 -0.33899251553978021478 -0.16771126451115986322 -0.32067477089560930681;1.3513811281598524516 0.8809091748498584229 -1.0640097750160968371 0.088535377231238374107 0.43880102371056617372 0.50455740978771679295];

% Layer 2
b2 = [-1.5383650570307314531;-1.1202024157843768482;0.67338609427654250172;0.45493751317275155088;0.19770315157255624605;-0.48883098752031012291;-0.64861928341642904883;-0.65829649315734106718;1.549323385799907804;1.787262330608030414];
LW2_1 = [0.26550404443050945602 0.029156516297496944123 -0.41632654595024404243 -0.18464900458530880689 0.15046771905018410664 -0.3110040751447573637 0.01659344081829488074 -0.35356720928181384345 0.40833225948060353216 0.58801531211621027584 0.54997644508359611049 0.49536919145230728923 -0.26364508071597164696 0.21987024767028506833 -0.41472185896756902368 0.46142345340281942789 0.17194447070128712762 -0.37114914538215837414 0.018397292252902101156 -0.6048250817455134154;0.40094031043409433801 0.19618874436713157339 0.22550479318418201191 0.10897398642865835372 0.052578917672295930053 -0.62525132671397953832 0.14449398742762706305 0.67075850404963477391 -0.06742014613153564373 -0.23566947322461870296 -0.59660498837665698613 0.10920596171826119081 0.038553528622086337407 0.023440537991801211476 -0.6681839701674258114 0.028696403918226840585 0.020476315838727679464 0.46563211960285710855 0.016788904423488328066 0.84787291570329514911;-0.6244131772210637088 -0.27829536147803446422 0.13152995742346110242 0.010083234739084120241 -0.21156965940323221864 -0.73104940036346965915 0.26002592445334860027 -0.26179382355800956406 -0.10810713603564298113 -0.0061273860116341930318 0.51441651347302597141 -0.042688136454437974887 0.0057797588011175796835 0.041422299444078825026 1.0385769785837750678 0.10122923060217987878 -0.22079847729376167464 0.86368875314252513409 0.033094447640540737565 -0.70408036710032784189;0.022750621094775994729 -0.053888377036474741089 0.0051208763034761902583 0.014331702427004367612 -0.063247726515643518108 -0.69206970088620944903 0.048265961605046120431 -0.28055333217691791337 -0.1919812392001223611 -0.0286348517175936991 -0.4131489185777872386 -0.012365926470287696981 0.018002446609925944893 0.018896761876394541774 0.92321440187203018812 -0.0040307373805328486696 0.0623597910716701051 -0.37323834323472326879 -0.037537051347952092584 -0.072341127918515935047;0.041902962591289290295 -0.064966448671762447309 0.067935942616588987364 0.039648182966966177831 -0.0644143289282240461 0.42045825614454729324 0.09035383983307053446 0.47328313734134924706 -0.13956279273822541631 -0.10531373669688734451 0.042390234345034458197 -0.0052946037931752981676 0.019025835758092177197 -0.011861651593906291299 0.1359228870678620138 0.03565264047247724416 -0.03684711141171094495 0.22910886688359841101 0.0048879998237770869857 0.12674759494607693022;0.077020035747164317108 0.40487775583254076439 0.089516102889474133408 0.025880406207523659612 0.018090965470488860195 0.57478197832828725744 -0.024560647395143173077 0.12071068298665853236 0.028983002139434322492 -0.044000238184565346189 -0.69677854056412313888 -0.0018435231025108879226 0.0053130124323232117214 -0.025882342727560327111 0.87539807188939289251 0.040745834369565282762 -0.068764006535048161073 -0.18140712012928156271 0.023566725706743091306 0.22190058229197284767;-0.21853475257689614075 0.38818159228608822842 -0.56234644598120364645 0.6369458547632413925 0.37867875991109128941 0.19203450619844850134 0.18643432240624843721 0.79653168317756861683 0.31997217532986987898 -0.059336401918815430412 0.42915654126019814329 -0.21967471136478261551 -0.19179321082893607819 0.33325448611349933747 -0.285102706195546729 0.27376743037207385001 0.61721089011300445115 -0.53975946477694558556 0.30419714433448008517 -0.32418046915263321051;0.0093816411109506354232 -0.13314388256867076832 0.40907997501430981568 0.15556157890727642656 -0.476892580681677003 -0.097383679067322592715 0.53708288073004439855 0.10612233255194615522 -0.67253839450204744299 -0.54443328515645439403 0.072570796528226372279 -0.073635350990205544752 0.16660066873947132482 0.061944068443882518982 0.29608109628423423532 0.1560742691392670578 -0.21412486393170512833 -0.062407425724591111815 0.015010351972727774966 0.2300886887181214091;-0.39310276436206015305 -0.36435592393801441435 -0.57214838517437827115 -0.067104481064690413294 -0.14780997402186327183 0.4645488116137330703 -0.59138072806236685608 0.10682611554003888787 0.23651096879443453402 0.1100180122421707124 -0.56339315998311001454 -0.46934498830417703541 -0.076781377062803524147 -0.50625616465285483425 -0.90519054996316672401 0.22696705777678155558 -0.63764270967285374692 0.5196229712113926702 0.1762092241329804021 0.33135220832494827192;0.1752088872072841419 -0.90566845702049414424 0.40478382254827821596 -0.25921094870558952783 0.3123043859029130398 -0.95839375603231213852 0.30224714423919685213 0.2575454941524887853 0.081171404947384562245 -0.74761221025001300955 -0.2823583584858577189 -0.3859777656421125025 0.13342872747582942838 -0.18849190815028596391 -0.19932381817684780012 0.32946873272546578493 0.19737786479816524232 0.36386143179449542684 -0.16251058259403877715 -0.063293066907138081922];

% Layer 3
b3 = [-2.0397259772207512185;1.6431371619187697952;-1.5155100487016195387;-1.3775118753168065222;-0.96180781761860389967;-0.70300436978169156266;0.70925793127713099295;-0.3659203113673137886;0.14496242360719263642;0.11651078035190200188;0.12878199778629764727;-0.20996398075457775589;0.44374250952974675366;-0.45016384713580970267;-0.99233369790894476736;1.1030534398401963259;1.2982929480121963017;-1.4420895246047542582;1.5403196302926158712;-1.7882100811349554981];
LW3_2 = [0.48377065974358984812 -0.24029980930082633916 0.70720223331766507435 -0.56491230282537097107 0.053858799095529992507 -0.2879629284507506104 0.63020083453708430898 0.93297924001807885919 -0.26938773427749951317 0.67757633842493369958;-0.30489224619964921947 0.95378642504627264564 0.52858015020194204503 -0.46488462126250496009 -0.087293631051428205447 0.68139450366204312726 -0.30270158828733734202 0.22789808768847433229 0.85727721089050323844 0.89466709563571511499;0.13034147557464301204 0.44341185707513663949 0.84932012677798962574 -0.99483866845537050061 0.09504600851957982488 -0.3432796177612244537 -0.026030948272910688773 0.33492437831956756167 -0.55486825981145915243 -0.80936370036779192727;0.63166055981128754748 0.23714898507412429662 1.1642564545976641366 -0.065730396128185999971 0.10803543501493387269 0.059442491528850657789 -0.13116864002078817975 -1.1623661019606545963 0.27962543464882899658 0.71191097738295505692;-0.015141740850304395358 -0.30513428614533683048 0.57408579375129387135 -0.32511228559110744163 -0.24387040833267364937 -1.0934390780491332062 -0.44219304314582102977 0.55874791923000277638 -0.34229277020117676589 0.47750051391698505876;-0.1219592316477681182 0.71430673684330181494 0.85677158522658147799 -0.3574428997609672698 -0.67783852311223724563 -0.031076650560013803493 0.38368851737689835257 -0.61839653545582351502 -0.15076235230711831914 -0.63241235921576666179;-0.97319960337770516912 0.42276643039413946967 -0.38568078972480612787 -0.21295392667513285412 0.092803260802419379472 -0.4137816306718433701 -0.73604266479243329879 -0.40644268138152839231 0.88079773389932491945 0.78485767097912084722;0.79762962486948763008 -0.26049719603608767482 -0.228893144019662792 1.020429330473398899 -0.43840822308020838127 -0.056168771492777658239 -0.15114254612917432663 -0.99781953851714244585 0.96141764470448232149 -0.22002682286209171436;-0.49128451098323050461 -0.72425245281587657953 0.5922314980985393662 -0.25294733661994450724 1.4882084630799918834 -0.09863390678853413418 -0.0056351179150601112683 -0.63565682399014533654 0.027356115037048392424 0.45098418144463431334;-0.43575667433098419501 -0.29695746765154018565 0.83261557962185295256 -0.45175504442925767945 -0.31515558533944865172 -0.53896064485365269281 -0.066574342417906204328 -0.34242309470882797973 -0.34321383778035730039 -0.090826854637250903357;0.87847557231146788936 0.28234444146723397528 -0.96237628467802727172 0.24894054172762608568 -0.44977961397303600766 0.19996086451214134527 -0.41814098759703155483 0.31541723062968612945 0.98368549482141387497 -0.46867113307748159423;-0.35836625072420708049 -0.28201363349637759148 -0.84311364248376807762 1.0337564405023857983 -0.53463445342548543415 0.56536882334678584261 0.80822560500455864485 0.40126900682552785193 0.40571398424183863218 -0.31882847226334798396;0.82921279402532510616 -0.45049647286128691182 0.0020316529786696502051 -0.55406346011158513765 0.13927774639138765234 0.20617765930344753023 -1.0023302673401666141 -0.19465343622806219326 -0.56859469067922607799 -1.0085786921347028589;-0.66300103747958150091 0.22611483783167021788 0.36426245976850235575 0.67547003902911673112 -0.99049600400445014792 -0.76432211651588088941 0.58629621859681424478 0.63235826987752308259 -0.49148058244810538531 -0.1446900333807605854;-0.49154561537353874678 0.24115440959594655612 0.11131720751961131366 0.72458541557474531736 1.0296844334349966044 1.2002419364965319915 -0.53584391669559838789 -0.41721957522830888099 1.0431875182200194274 -0.17989806466234914417;0.82035925761190231498 -0.19390002363726216439 -0.1045017381245839927 0.35045621080087996368 -1.4625764694693716983 -0.44611075395317151271 -0.59967999048253906036 -0.060309015945590967178 0.33933127099146920269 0.95819741219964482681;0.83270322700773435898 -1.3776645394032436265 -0.56101138907229486374 -1.1719116533145468306 -0.30935690625317813218 -0.38507092111691110237 0.40044003113001119809 -0.049962649459760859194 -0.93902649492266976328 -0.5505859719207379932;-0.27014906761736900975 0.64055422269445649874 -0.51779164594117210729 -0.2627516798640715523 1.4835164723612697113 0.037866829633674777 -0.24558833357033063582 -0.11600060538016981893 0.31038368969921475982 1.17873136455974592;0.76925712601069917707 1.7344490668001091294 0.011850476659152096165 -0.61363653429931230843 0.39588721647441454943 -0.86075757252575391121 0.65904254311274068634 -0.1518108535889953481 0.19775121079265914337 0.34664225739706838736;-0.7159413649483786779 0.27183702588748515083 0.83174904560012785648 0.069045828248785856562 -0.42631847024638230836 0.71448778287672531917 -1.0095927491316225577 -0.014072206042772306828 -0.68825680285322543561 0.088010477434188896795];

% Layer 4
b4 = [0.53853118319800641345;-1.1164261650846873941];
LW4_3 = [0.09732206858184834497 -0.2025081109079569508 -0.55202900326547144072 -0.19905103344729158099 -0.011152611981665097943 -0.36902186414917187429 -0.44556805374826374821 0.071242418196914611417 0.88987606388120443768 -0.36830074889238095803 -0.77758496030432866508 -0.43617050162058085272 1.0079475636387686954 -0.1258234997424321211 0.048406654429340424672 -1.4757954667504837865 0.056760511668639025695 0.41295169410230125884 -0.050290905481716496883 -0.30611253199674498537;-0.299937263051761549 0.57263400845239276205 0.52022862717637030627 -0.43284697614245759567 -0.28105134403123888109 -0.3616666344012169354 -0.051691259462532057611 0.13325201644876921714 0.14238857047659231325 0.080134099364504066121 -0.79790006893829612533 0.39354875897989033406 0.74798751201487057028 -0.10700581961848376622 1.0821356801619619326 -0.14555077002593846958 -0.71280667593145619065 -0.067020700350236384057 -0.15278618599766013997 0.51512020713939710159];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.220818796095924;0.202501353740188];
y1_step1.xoffset = [0.0999999999999996;0.715060397219156];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
