function [Y,Xf,Af] = nnmove_03(X,~,~)
%NNMOVE_03 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:09:07.
% 
% [Y] = nnmove_03(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.40432655203162;-3.05772726649525;-1.50337830487775;-1.32632633189706;-0.882733010962612;-9.39260604806797];
x1_step1.gain = [0.997016897859808;0.39800416843654;0.707661234476445;0.819300701824441;0.821005269415222;0.161198758900714];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4008019302909824333;-2.080380479526896309;1.722953275750722657;-1.4830519690559282875;-1.173276354845265157;-1.1785010036570287006;-0.76130651915066716029;0.54399064601160029842;0.37776727288634853741;-0.40136526828048135762;0.19462749797623557502;-0.46964716541794226945;-0.83948077519343122788;-0.7382827877406296091;-1.398927670773384202;1.2623379565627708132;1.7467271773544952307;-2.0704552421960440434;2.110207218581007016;-2.494956767160159572];
IW1_1 = [1.2486409449872066801 0.17462401503964422589 0.19000315369328954485 0.71100868070467193593 1.0879017829707042786 1.3620311528143169699;0.72721287569541970264 0.99399703173112108345 -0.097042450430094476244 1.1726682584815717458 0.66634881332575524038 0.68813459275752208999;-0.87383866521978192932 -0.54312854874743998757 0.44560552708044159909 1.3444608010795038311 -1.1205894483298290965 1.176647855630281736;0.59509640443440869895 1.0631856640524115498 0.051236002867763801027 0.062534353467956951822 0.44455606022283095102 1.8221769020527680549;0.43406769593981137101 -0.21885896603775759073 1.60971154052717913 0.90147731268087383238 -0.49903167122956587631 0.48978530685991544802;1.4285495332002027258 0.061124316402042570828 0.11659535234272377924 -0.63742009306691538306 -1.1566662438670263224 -0.75523031697140197149;1.3563855257502883678 1.0509992077325356341 0.88445685369527127229 -0.50560103041437065574 -1.0035932865173413653 -0.65934333902854758147;-1.0778614131881081306 1.0391170370972246939 -0.13275834410906051097 -0.30143942774519849603 -1.3451132316087279772 0.86416262380183539449;-0.76880291980809045693 -0.4672023057227091547 -0.054028420286524436733 -1.1725055307383884795 -0.58488373703427032346 0.52945132691607998954;-0.052825418069784531305 -0.89365719571749646644 1.0539467943694542651 -1.1147161734750652418 -0.15427978757797927711 -1.1658470733258952112;0.13989436754460427004 1.1072740322184886352 -1.0715040463161378259 1.0200098414644183098 0.74041586070801779229 -0.43849045598996283513;-1.5281218633538444784 -0.21237900530802358845 0.45663251085330669454 0.04507995479997524424 0.68139364709084782046 -1.1488306111161150636;-0.46701014088473291608 0.37615581251423835241 -1.6536557873854771383 -0.88363978153065270149 0.64706888488047376029 -0.65116632870740842609;-1.1400211109556124267 1.1617012690606669523 -0.33089621424356818746 0.48277519115180717035 0.12862512162822395401 1.0992397465235326237;-1.3407806988894983569 0.046798350102634465875 0.69730719641194316427 0.65590898711607559246 -0.74048210705880945781 -1.5821659541759114376;0.5439901729547388376 0.71093872720181694458 0.73012245193801095233 0.42274346485886188374 -1.788240453578489042 -0.93772233927858872349;0.93045470006417985154 0.91833613966042526577 0.19092505351676686276 0.78538320216961177156 -0.2745962062806381887 -1.3110339445847916107;-1.2486816096133075416 0.26036898541758241032 0.6182464638029856463 0.13170595865559667215 1.7378278444275538916 0.16957804977224807952;0.32879409294357925253 -0.21179921274736923653 1.3434874118004016541 0.92339955756926150876 -0.88036234621387865484 1.2683819129685451887;-0.074002068088476744001 -1.4117861670979738875 -1.5279995640596908402 -0.74016477811402836551 -0.36793117079115439383 0.18218455655387241765];

% Layer 2
b2 = [-1.6650456021405739548;1.156609005296910464;0.83705409369654082408;-0.5742336320055816401;-0.096714203922145178249;-0.10686290301733179786;-0.43368937042180372154;-0.86278726004073658107;1.1367610486031367589;1.4592951392980713088];
LW2_1 = [0.20269103811358682443 -0.33903410214483614693 0.34382916871761393107 0.3603561385105470416 -0.006400241001184730355 0.56365558964139339526 -0.11056886054959262633 0.12094839399408378877 -0.36316601180673191429 0.081244219339847864592 -0.28618582469993469886 0.42820460637118945568 -0.25311143045678502483 -0.10553200480593653843 -0.40433086435015619386 0.12564299211832194447 -0.50333094300167136037 -0.4106579881761643902 0.032418631876222327171 -0.37116970297563478542;-0.65770802974500186533 0.46713417945326785041 0.09245234869005725109 0.33311015873241034413 0.019570235641836998541 0.02506867523562661404 0.044985662865185918613 0.088627947493579647964 -0.2415620780465943529 0.2687974400846414591 -0.19138687666524012432 0.022182321807082766574 -0.29730533744116804939 -0.65574885821064266 0.58448211049688647556 -0.56325823941282693319 0.13474662563936604109 0.037854323034471171194 -0.19552579289956631414 0.26542979320309678659;-0.047514758718529934156 -0.26720912471855262638 -0.011636913619727943039 -0.15759814237811745063 -0.43006006733942142573 0.70981113393838202175 -0.2631672924530060742 0.36078032130185899717 -0.061548808440081100024 -0.19744619344698352559 -0.18556985261669356468 -0.46003930965021622157 0.35387198291900612279 0.085434148214781735486 -0.0044261173299564252753 -0.51967881609198618431 0.085608926539634019881 0.22669535286762798609 -0.38516029425314907142 0.32638611040131304541;0.26779864676147419056 -0.35829398260945571897 0.097988649018783097189 0.12199905422939898159 0.22600969758680808375 -0.03862267053535625716 -0.54493360412320657193 -0.17926303233573001594 -0.2786763141365859453 0.15764608609277275253 0.052658956351415084352 0.062885937583004716811 -0.51301363250294063079 -0.25577046111161266806 -0.17694586988574206865 -0.49673808107416506097 -0.17910527896195926889 -0.13865420152915244878 0.29691071934362944784 -0.21101552543248186522;0.062689734657631890347 -0.42373723040459815303 -0.22284139065809294156 -0.035694615662875919804 0.057387007756375146839 -0.090397889178214174688 -0.4105154599129103854 0.046927111967491628997 0.51647698750206094687 -0.059073622625942540099 0.041583704908517454824 -0.41790021375610414411 -0.58376659238802885987 0.032700611499454509956 -0.63672704973079230495 0.52240726484289101705 0.45127751611511468521 -0.52488372322513499046 -0.51841051303322571719 -0.22355057376151127313;-0.55004797027384533248 0.26500231164360327218 0.27873867343438168964 -0.31984142735105330901 -0.13548102377347845393 0.19528681104271261582 0.19891345711518393369 0.27209065424923600807 0.24219330024013396852 0.11643558149708956029 0.3632814892060287626 -0.37381260666805399273 0.56587701592640915482 0.34365096161953373466 0.11102318941343314318 -0.19236584807097767413 0.048733919363525189661 0.11513621884441987975 0.22330583943636175825 -0.18913002555804669935;-0.2816819423702663916 0.11791037686915198379 -0.17298830500974693436 -0.50785248731721366333 -0.27560326665276607683 0.19476837433757562823 0.075930121728616378762 0.39745350890117076004 0.2113087487379676499 0.23629316646122375256 -0.074658400040743255754 0.60208404494812195473 -0.12204687245891820968 0.15593320667931406809 0.06760911364578678362 0.075517383768457901905 -0.12462944392344574296 -0.4046440263119939762 0.44496324485526467241 -0.38975951985233636687;-0.095140224257967087595 -0.15013387425073995707 -0.44755074474217887426 0.18679385421477509577 -0.29521809832385670358 -0.084771354748244778787 0.44356318892264479103 0.0072214021554844968348 0.013799093959198109952 0.55218728722938092979 -0.058364655904593235047 -0.16437906801394805423 -0.2344399084174387804 -0.095483947516520673027 0.15104494520320127515 -0.5566046556442957316 0.047822350523873582984 -0.31712971192146643951 0.5854716221401581322 -0.31834994051547216287;0.061740831911710598867 0.10367164709771474473 -0.5662487652140529848 -0.14902414077834991168 -0.58020703323279920749 0.051930056826079040722 0.40616493048382812381 0.2707920265164521223 0.092298040610294188046 0.15991191422197942318 -0.17870188720315466346 -0.014342707794760512288 -0.16235826133459782539 -0.3045725814199032877 0.67009761853242788554 0.59336799883054569538 -0.45856142143917755227 -0.22589877491469625981 0.033228222235664919837 -0.4881439981898207936;0.50599847934602593114 0.017839714066148815164 0.055603730814809577965 0.073983064142463514368 -0.094831737439850849469 0.20148942182763002196 -0.42997256696963737088 -0.51024222552034648182 0.34834890637256837875 0.12910426687690509939 -0.15772660518431327881 0.31780683625309735785 0.25308221044001716349 -0.24966537023297932785 -0.076529432934274624345 0.078243942268640565008 -0.55269580342383584082 -0.47268590244380348508 -0.13341052777427486742 0.48633759308419366452];

% Layer 3
b3 = [1.8848342277454253058;1.7264169053006903631;1.3971709526053388561;-1.266617814164563427;1.1893249251150084245;-0.81191491707715812698;0.63332884515019804983;-0.40094292658477764801;-0.32716096942569100614;0.14736498748968970829;0.046783360860776015966;0.23216995267370069134;0.43357176061378799314;-0.67935505221468639458;-0.89941249122920030601;-1.0992785648688236932;1.5007686985574748562;-1.6700912302091770467;1.6381501254455315131;-1.7127348358172262976];
LW3_2 = [-0.62449976621061364934 0.65986746548055086325 0.022655434591496978469 0.82406520736104071911 0.60813485563942570877 -0.007509855300728035532 0.45794368038193161707 0.52758563759275756144 0.79714039551124038496 0.77878173072636114327;-0.4040830455767242535 -0.38321938849585429621 0.26464526869672450049 0.51066961341965910748 0.98696844223200730362 -0.69949093730813516334 0.86683119728825874795 0.13346832740049893729 -0.65305112583646474089 0.4904389035599783786;-0.37957350913905474332 -0.32861464633070758268 0.4004591020202291074 0.64403970550579991983 -0.8105634004700296158 0.68915559350988853105 0.00077365554889609246952 -0.91788236002322998175 -0.71971469204365523531 0.62873612930193456538;0.21364423060077888938 -0.58948491707775285686 -0.057654607653508951892 1.2580258955578116353 0.1433456807927379062 0.13213779393190233646 0.67772483126697413702 -0.57950368130307328141 -0.48048120719138992518 -0.62974127249576583587;-0.45871531390558245578 0.23852248692101113425 0.76888257922069247474 -0.28394022283270792251 -0.57612331351446910421 -0.33409113809968959963 0.15290330427649048706 0.87900096829384855024 0.77093660768518890158 0.38479642762715260407;0.78713995654282375991 -0.5973792594244242693 0.03740345245518468531 -0.10639599452593744011 -0.023576388286955903689 0.83164092718822413275 -0.62100294011629164626 -0.63582739669602661436 0.87828871349501802523 0.61392107940044393644;-0.38869316624672217708 -0.71739963128229822242 -0.11026241548574519657 0.53852919297273604826 -0.23621653440048764883 -0.25751579457488293912 0.68163123373153067242 0.43654311535828316249 -1.0891305242741757819 -0.54953029052063395721;0.36118716492889341163 0.26601810022237881714 0.11541742591975559518 -0.51492589101232111304 1.1162844205842974432 -0.3762526718926745839 0.86907656813396738649 -0.49658555761485451141 0.7470241992334324399 -0.4487718738216588954;0.26641019915487246239 -0.60897827319984731975 0.78185848630057219744 -0.43239869298712302337 0.79554237153027784757 -0.17010125588402183472 -0.0072659925748204982551 0.65455763373157682672 -0.65738960309365035428 -0.32273354004704113418;-0.4737658022100582067 -0.085433231694060751682 -0.26441784672695911595 -0.59983043042355266294 0.98933340838984051846 0.9256036375881978584 -0.13006430714359504264 0.77953952388961300635 0.53303348959828944498 -0.020761854593958115056;0.71751126489923044982 0.23970490080714243475 -0.070791602434133835131 0.80625406813517586091 -0.63334253867495682311 -0.66448730749101347914 0.63573084239819843688 -0.71001588985148533784 0.40722676928259043949 0.53884697574983952961;0.31294021700527990815 -0.61981064224550619368 -0.065332025121705619708 -0.59320453185040444843 -0.92506228713981109024 0.30622024864826058455 1.0624291038957205391 0.10587621185769996446 -0.32330639730228949436 -0.49398113528535725347;0.58174471506818603572 0.21916983652032598351 0.26747197064431599278 0.4827376708995412824 -0.50118091720779955889 0.5418629579055121992 -1.062535129048951088 -0.24827785192856843821 0.85824048024130095147 0.10720379539331099938;-0.58232625386706138304 -0.84276579774350679486 -0.42128989107673192605 -0.63802036191616851024 -0.71041559305129886592 -0.39707524360060597601 0.068498517193777530565 -0.30341920061908178585 0.66507929547475308496 -0.46953777857928807871;-0.29491387859636730706 0.27447795563377674899 0.63889634401676531628 -0.16272020291408620385 0.66950836160331850255 -0.38342677353901843951 0.78024515409208783367 0.39926648597351854786 0.99908085254233780503 -0.65787967106760880664;-0.28522976637788660659 0.7139495910568798287 -0.73578118784773816063 -0.12787285251012664444 -0.64254793315689506805 0.66335940065194010096 -0.49166725691624901806 -0.67840793811456290285 -0.62490627763904416092 0.36704546843399532552;0.04650261180599745553 -0.9570573888078839353 -0.042647491447278217114 0.36304241600454378869 -0.069680836213693794767 -0.89267924176399182645 -0.33838530172553332731 0.11158449764740481502 -0.43314032303201183138 -0.51074505348503607127;-0.027213978378667492974 1.0421701156720766246 -0.07586535452492863818 -0.63518095425381904118 0.054057572732776303093 0.84443461738977665387 0.46330146047825448985 0.31783467927533043396 -0.078548222886831206568 -0.71162686615265757784;0.80699573408871216884 -0.63524346169346124213 0.022526396246910763282 0.14804056335492327134 -1.0009561859828215447 -1.006933134867919577 0.042621402360744034543 -0.57154323305824961121 0.44473842257033535663 0.044235021547513943274;-0.75282483714749826031 1.034902591974004471 0.0068360050683402891897 0.021949567516287502023 0.45219609490346529546 -0.74626188502611656705 0.92400592308392226482 -0.23941980834276258006 0.56324829412515797777 -0.29966011997274605294];

% Layer 4
b4 = [-0.22099764094878926457;-1.1439208962850804241];
LW4_3 = [1.3425268190799566348 -0.26847491799005901436 0.00054377838885101299066 0.71137189815780144109 0.39556323851930480506 0.59406699666416629135 -0.34636181207099331347 0.26005809900096493736 0.24690651612089803413 0.27441470855692645658 0.014665171833010809052 0.16636575885055274182 0.48097323341286285503 0.26951654940175190367 -0.44476939410998034274 0.061882465429392831402 -0.32325438867070593885 -0.23718656366736021179 -0.43741008412462156763 0.37038649492948261255;0.40698498743105343545 -0.25260040960017421385 0.40283757809935438754 0.36215442523619972848 0.50288082323115002037 -0.019765202743329438745 -0.85361433917647044911 -0.2738110678530520925 0.40408967700124776012 -0.21816187962650387955 -0.23680810611777300401 -0.27224161232740329286 -0.67812760837384744583 -0.42851506425446456161 -0.23005110350490964866 -0.57467044694816937778 0.56728675903183078955 0.18180086463762099025 -0.23829322418767559522 -0.42183569870234011168];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.223240001976496;0.228777186864254];
y1_step1.xoffset = [0.198232152425045;2.75448934286387];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
