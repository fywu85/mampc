function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2022 03:22:45.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 4xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.56979564277478;-1.30490266637008;-0.563612661938743;-1.30082039987417;-0.477463491463658;-0.345789308086296;-0.456124161375581;-1.85436538017275;-0.364051010090564;-1.66674140702448;-0.645412690014965;-0.295907880808792];
x1_step1.gain = [1.78446518510531;0.753836270955817;1.68590753899442;0.761914471229483;2.26742524653581;3.62762843969451;2.06682454863913;0.5896627770093;2.36146501631361;0.663851844085104;1.41721499548231;3.66792002962172];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4951984349146747455;0.57464823921090746328;1.8718858980312174101;-0.68949243364596246586;-0.23136285624314828491;0.1797056699718017625;-1.4666202493694506792;-1.0193621514729460653;0.18076865798969327104;-0.22163887790199773842;0.73108190144158380352;-0.4105827500995539725;1.2388751610508141887;1.110923026296538163;-1.8956405050134423895;1.4196356619610661642;-0.77066488673468369619;0.55415639389386195379;1.3318435674514363942;1.8866190278828369742];
IW1_1 = [-0.27914716934894473477 -0.043074248189426234124 0.38632291479613256602 0.050327594684371201872 -0.02910508158728535022 0.30772321481926706577 -1.5676973630110573321 -1.0855302845694008163 0.5895414107334848719 -0.026434136915417495717 -0.87682290698623988057 -0.55428528725333769955;-0.41333987103463404322 0.47854833837052618284 0.23952286729271471399 0.74957998332396080787 0.024516663349304638336 -0.15380663428073307331 0.20276137191276022431 -0.15048175555181952934 0.85029770200342214004 0.13984551325529182009 -0.31708207512675445905 -0.09200775166054903087;-1.1680149439292506486 0.068367708938470481139 0.3513444189825659647 0.70895813268667617901 -0.72626568301947558304 1.0703994249510180303 0.52914198730019046391 -0.22857267855255616884 -0.023518996063137377617 -1.1558614700637197537 -0.2746692220121122463 -2.1686248651673665222;-0.32137566894005381579 0.052357804353878503734 0.22072573473120801757 -0.32335146613782439484 -0.73413167765615305882 -0.31374587361764638693 0.26659614897506583864 0.83153834808384174959 -0.68857692968579864434 -0.27641019889099072149 -1.1844863068405266926 -0.093545538704716574285;0.81766229487022534794 -0.75435165175424456763 0.0030530117389787475579 -0.7894402751097455706 0.24119256758262436202 -1.729015167905147532 -0.212637703483971513 -0.023864377360597519712 0.75736455641147248929 0.8238091436729862993 -0.11562032402360486461 -0.0052177926456130827026;-0.29246030410919021669 -0.56545351377171604312 0.34947958941570389513 0.28911135578770374988 1.15442395476728632 0.35184167834736906899 0.41438215003336559272 0.088859951266966552552 -0.30302439288980420606 -0.95204686653010406339 -0.033340894198062479004 -1.0237769951937458757;1.1497440674424790341 0.012455806258437233242 -0.45354474088593837999 0.50796861533619297457 1.0064645734132000587 -1.128007728522455011 0.79905829301803121822 -0.24225613344563973195 0.60733769283207705847 -0.55694394890258569486 -0.39618967063756149738 0.8025793275322761211;0.35489354634313063919 -0.086287614465430276245 -0.20309742168009442542 0.78322324454720981812 0.52958504610472945107 0.010136025737212530501 0.40148511609047288218 -0.55952073272800106896 1.0466147643222949437 0.17492082151747362362 0.68985010673424485006 0.75625477462566337294;0.13949447389738700576 0.83438792562885288895 -0.86773382206656002325 -0.568003815856437555 -0.070087178057619131666 -0.35854865303118871322 1.0073997504389300417 -0.53318283549687583989 1.2971050949904265881 0.64469313345414136496 0.36712949896772856251 -0.80818975503500456448;0.038303582599963990896 0.42927578059252197162 -0.06589271353309381074 -0.30797925283709892685 1.0230135139142715328 1.0511585862645340672 1.1633211865990120693 -0.079943510462807829131 -0.021366009079768790574 0.76856914692142075385 1.7203187457586077702 0.030873990195758090754;-0.075389715989680916586 -0.29492612089690500854 0.54651169842552593803 -0.4445801873149387573 -0.53302436240158934666 -1.0416128846284560261 0.25189763763921424466 0.072894136078324817118 1.6353710721459326916 -0.21669354669732843188 0.21125355026434394778 0.45840475327924840032;0.23631254715484822926 0.44435722480207323626 0.2753189577492999307 0.58987957297336146567 0.11714156818438435648 0.13447102005396310842 -0.055810750764875648178 -0.85015633116791688995 0.93653318964227316723 -0.19219231574855527578 -0.88062912938038551136 0.98239645348698401151;0.13035341129727628928 -0.17503256616499288101 -0.2364066834954413332 0.63311323862760549019 -0.66964115589981021426 -0.42355606159064584926 -0.19386403649054789744 -1.0155771719451285318 -0.99309997947921380135 -1.3426415231912129933 0.90750855131400198772 1.0666997305571113142;0.35219296228018937001 1.4919158824438423228 0.20648236818395637737 -0.3090635760396603926 -0.11680062981092623198 -0.086835455549648180029 -1.1624542144522305165 0.25184698451603521052 0.96856094072862664035 1.0234584866880580556 0.00722013075810638838 0.18639608526740589212;-1.0809757405568596322 -0.2098315335537528914 0.4900116668291754074 -1.1121418438250836314 -1.0390981015259799225 1.0442036772825098456 0.69892079653428185182 -0.73748987215009387253 -0.16440819329708097896 1.0517075937665765206 -0.38670192662748176238 0.25725009327682146765;0.637877987158746107 0.19915743277720671101 0.71232886580981491509 -0.0028919783389135828716 0.0058500715408413145324 -0.020021668028845876486 0.37227444837158146784 -0.57841544671730060756 0.55465403866895346408 -0.66344976447858827751 0.49781669998265876131 -0.60845506732646037484;-1.0710353628074025245 -0.15620448906074213546 0.64835988731629279336 -0.28194829983230879078 0.23272973060613724727 -0.049329789953877635489 -0.55812851763286630558 -0.42761789476353101458 -0.71804660655112106937 0.16916936999706605471 0.63977173559084543619 0.14969526323174561777;0.047854624751534603766 -0.19877273091697800211 -0.1898559160878443286 0.25566191987095665539 -0.50792580120527397458 -0.91322626672176243634 0.2122485329831922396 0.99307073031841064381 -0.69513146786574309122 -0.17568069621058327034 0.59880204844510731554 0.17835423015813708925;0.56302495771213034725 0.40543686193500372283 -0.93260464953471811089 0.22035606869882651271 -0.36679160753732426015 -0.060862881837244059424 0.37623897201862743778 0.34890915015134360555 -1.1359051054050224305 0.20140870715802436375 0.18805340703975989558 -0.52238638987707286532;-0.41896839006916958281 -0.081678965099544059703 -0.071879191383705895446 -1.049982581563072559 -1.3548785477291500623 -0.008884893537795934132 0.060653187942389219511 -0.21430956147677435175 0.73761132173732779638 0.75289970354979962597 -0.35676904992652613835 -0.95845332785115888719];

% Layer 2
b2 = [-1.5384435908442646301;1.7930455470539163887;0.80082843290893124255;1.0448536873313365447;-0.041019239988001603148;-0.24656867414731767352;-0.64229084789420587409;-0.93883235053802616132;1.1391328867787038348;2.4635769374469349557];
LW2_1 = [-0.49335578842570387836 0.28869408082648423397 0.54650729094170524824 -0.54194474311147422529 0.28175619802621809651 -0.35834828248092448488 -0.28563001654171304988 1.0856825404536230018 -0.54544646796743556649 0.82877417471072323263 0.51619905657360409812 -0.24181098015103807963 0.15249881899882489211 1.0991364960458800404 -0.15382346971185850704 -0.22139403259966716764 -0.88732658400137154331 0.30475699545605955398 0.12937077984161357569 -0.10833433698979585968;-0.26948708298860518662 -0.17837509410364763007 -0.4154067237620429065 0.87119636452871729304 -0.541147486124259669 -0.53582612596264622695 -0.31857799482520865464 -0.060557581040413775708 0.28793432785174127853 0.098607011453686888025 0.30486482410194837289 -0.23065949305362687394 0.14532546928991080248 -0.84091712078492708571 0.5820089616584790404 -0.12174274044494749758 -0.011102138230253306983 0.050122117866046395074 -0.1554134555388101413 -0.42993561500594978941;0.096241107356084251712 -0.49344775823585945718 0.92850628748205887852 -0.35868408627759412743 -0.94258015205614043008 -0.13399267292526112483 0.28500259943235900506 0.15451598332878324626 0.060280107148142914042 -0.33036296195225833827 0.5731796551600156775 -0.73833719052253554693 -0.37321475332868719876 0.88486082675332178304 0.5869430839327781646 -0.85541459290056032216 -0.10346966614089191105 -0.12678903969951144104 -0.16406459160343470072 -0.42888629067957512175;-1.0987897928958103577 -0.17744832412256028586 -0.47985405829440180847 -0.56968571036877502234 -0.37750181778223917961 0.61480610854578066071 -0.059800854123241903304 0.23478714621608978708 -0.57685201045553557986 -0.38070743015703667478 -0.50062971952190304936 0.31185637247683756224 1.3902455912399342974 -0.44496532969500746102 0.10118622882050411216 0.51896218288056250589 0.89606817336978550337 -0.31315263283822314389 0.68420704534001752783 0.046640427316214899678;-0.42108682546591080786 -0.83703177038178111502 -0.91902968279663932449 1.4479878338617429012 -1.1408075072611747469 -0.090504823117190658088 0.26005263879841755692 -0.4158581045121814701 -0.6017364635569727449 -0.40819244717758945695 -0.60765473253561419487 -0.52090424351040209849 0.61261463774284841133 0.49575276072518026371 0.6846046216899613901 0.93018153075465448421 0.5268775511382696175 1.4841061118471490232 0.7667396851210136477 0.6530273516307911752;0.47801151126710200723 -0.37945313661759993984 -0.40389845728939771652 0.11732764896537030419 0.093555530198513286999 -0.3820654067004415344 -0.39288249345391851319 0.55650629022291364656 0.86777655080301674406 -0.46359579539014439398 0.2082464965487527131 -0.80575913359422091098 0.52207176549659017883 -0.24546552753666989188 -0.83709836942669479942 0.42587853999420738349 0.44390500821863820846 -0.17090510684328261148 -0.19971470425365228651 -0.13743343914791950056;-0.39155341292850415202 0.13642887600055098041 -0.19692773458048515312 0.63575885868138737322 -0.43830885599010427356 -0.71568758646535168833 0.29590867910630697102 -0.21913148201866033959 -0.79545596312287347729 0.51689678530668869971 0.13961997655003696717 -0.34355789022033494939 1.1723971630936451671 -0.11789641544578323418 0.62304504389039083723 0.47095870352270818859 1.1646867970588730135 -0.38366798027602144749 -0.48339935033014636012 0.41102625577511825439;0.61192970480543174006 0.030075875295247026658 -1.3564181828083730075 1.202728167349018662 -1.0498268972805926413 -0.62479583319963416521 -0.45695886330310675483 0.10895405195622176464 0.49452278901421853341 0.46299080243739598739 -0.054642865802409609777 -0.74082884461461850911 -0.075619759092536306677 0.46521591732136119424 0.43676563041092419937 0.10339771435899090812 -1.1752159681817242465 -0.6097183874663019143 -0.41291275905575391958 0.63070858936413620732;0.95867013298715419989 0.12273412524745422325 -0.53976890864229520872 -0.20789842938569200181 -0.20655073699886969396 -0.97329026667378992776 0.43003751175334453682 0.88265617164583165533 0.23637811742019948502 0.82987773060662894942 0.29603320390519227701 0.65876916487949277457 -0.52507994761789755778 0.70734014406734935232 -0.16668303225431049808 -0.60573298713453915809 0.089126683898233416414 -0.17727117091024457984 0.60316553772122050159 0.0045273255566331991814;0.65993656476228501617 -0.092965945744733824441 0.49376217085187079636 0.71460047802871728972 -0.36573989589934946531 -0.87219400061700658178 0.59882839841100599099 0.1264549815444470926 -0.24655641869984729064 0.18618226706339596754 0.08194780085985317597 -0.67186370201170275696 -0.6482780133604058026 -0.61086486424095787218 0.77426023796269605182 0.64882344967328065 -0.25979415492078655747 -0.019566593649663743121 -0.84405534010980176607 -0.14203102457979327466];

% Layer 3
b3 = [-1.7818873029170989586;2.0948585135755948272;1.2077557816212844966;0.1498303235993818372;0.861439708891369893;0.62236643696693461081;0.028746783158936143471;-1.2868600302937123203;1.0758694377021855715;-2.1529175745535904518];
LW3_2 = [0.77100035679881839812 0.64441490644868726356 -0.60486268472448867506 1.0242213985452108815 -0.52521906713241539588 0.34946437320049983377 -0.27811974041057080376 0.71336360172560686621 -1.0063762911521305643 0.77187297558761724936;-0.73633600425780076915 0.36649095957798361045 -0.42189116215203459337 0.11562037143332129507 -0.016495043568017408314 0.95770616057086810358 0.82098323169584863646 1.5206798081325203498 0.12149985385458057785 1.1671083296748334668;-0.45227618690861287609 -0.81575098498865372676 -0.56716435285756716667 -0.032447864912805914062 0.14243208510239876996 -0.30322607763392944724 0.36956944592242646497 -0.48512487534361026231 -0.45415004908246991988 -0.04047250998166544711;-0.87622629418879882657 -0.45789679507642822021 -0.25606287026162694032 -0.039084895480130547873 0.15262603696995816205 -0.6516578684927781806 -0.7781802006324690657 -0.13402836309554680416 0.37183342625953152982 0.28614308800245330522;0.25745808869827396803 0.63186472771468704668 0.47997715830971021678 0.16086129339220264778 0.065766587004414442386 -0.090800356882370994449 -0.35310406502699531739 0.056610505455143317333 -0.84062233652050089017 0.089638162408668037306;0.43314660481070493825 1.1642342050594822744 0.066175045791085213009 -1.0081190815540930217 -0.086105444466159225536 -0.28181426757954436413 -1.0958439101799442028 -0.082356833306783894244 -0.58662108504651400143 0.15025637414101672418;0.54036972393678917026 -0.61258720838428692979 0.35121457417365453679 0.11472928296870800458 -0.26571211958360274608 0.23318917374987765956 -0.59881454686216595285 0.72982472218357608007 -0.14664565192566864082 0.62221970094388590056;0.031221772375405486277 0.36838910254380136111 -0.29927045539206753588 -0.043616080271790098888 0.0094977567094059987818 0.87867567073945285205 0.2204496932366026285 -0.33303139301952427997 0.031248758016472262533 0.29383100671203088439;1.1565628297887848852 -0.20882039869993873626 0.40423702860300630979 -1.12550409569692067 0.14522388205325176269 -0.25019548186376466825 -0.7226057898683621028 0.20914978954394958244 0.80990202624410834176 0.68534457027709372312;-0.81257394716348907426 -0.19472557741001925158 0.020230416439071953472 0.031640010533130452641 -0.10569812712298645718 0.21000524572053838601 -0.097828649768088998817 -0.12210626658003208289 0.57792257243962230628 0.79191387889366660069];

% Layer 4
b4 = [2.1552410408610835901;1.1505417006968772231;-1.5946494450337302951;-1.1299242147387666968;1.4553787802271687113;-1.1779138975806553447;1.0365478396350435997;1.4587886201959079369;0.77788091388795099768;-0.77702918973986379036;-0.69427549515042674688;0.11493864647935156387;-0.91112852874425265259;-1.192425828495052853;1.0755007696987941568;-1.7038925369936726018;0.80253428861407538619;1.2693403679463790557;-1.5117439348830248314;2.0908308328687805755];
LW4_3 = [-0.70799539794776988888 0.43677797477797081216 0.55399911547318692051 1.007849003359174489 0.64043870322049312183 0.63966861451125467397 0.29848066293791647441 0.32540073209492231809 -0.44933472625081760654 -0.45007218567022877487;-0.68450928884174377931 1.1568306420763754261 0.99849385675493151915 -0.80453182202706474691 -1.1113745086912525384 0.21863904077859935837 -0.24997051095024752643 0.23362157310735401361 1.0123195916813461093 -0.21401843648973367662;0.45090180971243487562 1.2114965457088033851 0.92492916428022620146 -0.015417606636205670109 -0.79229196442912086518 0.56928802701840308664 -0.03752779058917145999 1.4801508280734563261 -0.25540539681310875375 0.15392825910301830006;0.50757500643631425774 0.32322023356751494738 -1.2018594458100790856 0.094828991183575378487 1.0021618859845666805 0.15223439721990064677 1.2479642673274438103 -1.335323255714295998 0.4406576055920366497 0.97721663966908445254;-1.0338737043279895289 -0.48285204665783421074 -0.30298885675786479954 -0.35479954358267962178 -0.49550178314333748197 -0.27077013236008551367 0.72619184480417742211 0.40183643249011546938 -0.47546412856731273822 -0.42123551917430746006;0.88594231899837083688 -0.68780310369104613599 -0.34454378398554424967 0.85907166920040789471 -0.82557142997993449018 -0.49788542273968910967 -0.78018502347018836574 0.024436572239774474735 0.30929360646725390094 0.43850782581137065508;-0.27698068801967734576 -0.68789368335705725066 0.34932045019593160884 -0.28278743248073912042 -0.57129632301555088869 -0.047966467079466362788 -0.69873530863216937181 -1.4142963591943424895 -1.1117851549537702827 -0.42410733189033728019;-0.44346863983993417557 0.17409825832063230422 0.70252409981682462092 -0.82290819883249810562 -0.27356482331861331492 -1.2272326490825937739 -0.54415054778520532963 -0.78734060327465427154 0.66870703383058527347 0.099316103342598244241;-1.7602853418179198464 -0.29807796845656625573 -0.89023023497871478504 -0.33602512929729982938 1.3199547407349518924 -0.29093690884690426302 -0.66336890635561440721 -0.85667134052395521593 -1.1237790437260026799 0.0037094430279074538936;-1.0126144689972016444 -0.1809435626534425523 0.36862982405912902983 0.17633027776187873426 0.014038001059074576432 -0.35688514874735122184 0.029018954793407353288 0.30961254059226056556 -0.30211613515182583756 -0.35523536951981071752;1.3753764730138775541 -0.95014691113447269366 -0.078108669906644584424 0.28204011184764365971 0.40234400063300884698 -0.21136587196281692025 -0.17068846566225009953 -0.44456664751307578554 0.62942849278516588285 -1.8635227070321969123;-0.056189187810974636217 -0.47580475615920547749 0.0025135080704405121654 0.22487735778535289377 -0.91221197823590238762 0.5421540821391825915 -0.46733931731550559796 -0.26407168252087359628 0.61510563880523660973 0.12798481645873707735;-1.0442414048824808503 -1.0648577634916098766 0.3072195042625566197 0.92809503023009276568 -0.83923337400650854789 0.87581442583370716637 -1.0018742332717578414 0.52306701320936477284 0.7246695763394076506 0.57410799124290379236;-0.078791931346304133754 -0.6666194251802330939 -0.96551265008446207627 1.0547294594157552439 -0.35356390937914261574 0.71565970724222982557 0.34767702199786199024 -1.1688341542269189421 0.50131424044212125057 0.078797189312246523896;0.6863526496586462855 1.6036791477176612908 0.90243305983219490596 -0.32327614851686453656 -0.57986268837279120181 -0.012096425984033393891 -0.29873951525805952922 0.37677278633128530316 0.0074991511992673724751 0.57289320814054878195;-0.026609181033180318715 1.223670271380438157 0.090785830427418126587 -0.92599192934372931418 0.35238862223642941629 -0.53172153062225946396 1.2623512322386569728 -0.11449512519589796766 0.80725845997299938706 0.72709793826009250228;0.4961737464173698875 0.84979337560433720888 1.2581047373783080801 -1.0507671252498140824 0.51754512207621783393 0.13290348587408096215 -0.46417130350976315567 -1.4391220292684749893 -1.0327490962214067594 1.0208907795217521119;0.79956891994851053695 0.7642630224459593391 -0.94555453588146143318 1.0108498710815365662 -1.033794289702086644 0.75017955435463012925 0.29214537228181020057 -0.74938361596620395311 0.69206070501739858081 -0.59731071098837762445;0.64389668256266041624 -1.5654996738938187217 -1.3813794385140547583 -0.12374123669226116951 0.075440556580132323017 -0.043076446652328827247 0.832794898933713168 -0.23087247345435907286 -0.31998190942520227109 -0.32497819161644658781;-0.00076965419784603256691 0.56118229739173164372 -0.63489246143486133267 0.51961457440769331928 0.7882093843795483501 -0.063966965320214244639 -0.065925898447832462224 0.28575295817630275153 0.30626260237874441961 -1.0311697424024111047];

% Layer 5
b5 = [-0.43382296107804430019;-1.2458034290935822153;0.40871264319444500224;0.4562392979936807369];
LW5_4 = [-0.65466943106665342889 0.60036976710754008657 0.50633349996086984834 0.24778311226248983523 0.7847922284525873371 -0.33387924141334068828 -0.077745576149946787892 0.13811734577467463247 0.14495009049483670305 -0.53013087854312601621 0.15144377053388097254 0.9838212348141256447 -0.11091124308922475916 -0.51183146213860342133 0.094004547837408317101 0.08159797157915778254 -0.07696429345557537216 -0.55764884804949543806 -0.58055621080138186674 -0.31799866492832207232;-1.4323675317365467397 0.91891138352697110392 -0.92371981722608054177 -0.09884850462700885132 0.55158990153764941855 -0.043650663451050994435 -0.2135260997033925634 0.37998036621818936931 -0.46838444430952608233 -0.11722180705352894248 -0.42666007454337273597 -0.70464987275680535106 0.44342124797732823671 0.11358303348159989876 -0.32467970706431814598 -0.34908314207338014823 0.17604306890826323939 0.53089957857767666738 -0.90740156889028622533 -0.60912479423355481156;-0.040091854432620956106 -0.60985376945410829652 -0.55533266979221340698 0.079094162856609279144 -0.091148334167050260035 0.006228905971522638238 -0.33762564152607932311 0.19532440393561970038 0.31154671454250937312 -0.080151645360596102119 0.044159840479269713009 -0.61490111349661213946 0.2862984598340650999 -0.28942324633268240452 -0.003594712651892498223 -0.54200982006580034067 -0.32192050873631616881 -0.20904561343358668557 0.811238848761756004 0.54171030682119569732;0.52243424718708530996 0.7404254554733222804 0.23871835829173163046 0.10312067158858155558 -0.12029912685071598999 1.3601880777127859368 -0.3775211293349250985 -1.0298517434032146145 0.67017285368061041417 -0.039556982172577692669 0.27524713344050422137 0.067212800704616521008 0.2246228531779590476 -0.111564600124522878 -0.11158983668598271288 -0.1860714258240733221 0.53001263824637256938 0.36915710260548917354 0.010616942277064046057 0.1878477252775297146];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.0512947217543748;0.041876790299613;0.0466288911323017;0.0499501412370409];
y1_step1.xoffset = [155.319492107924;145.966854132823;151.602030744214;149.168780509199];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = tansig_apply(repmat(b4,1,Q) + LW4_3*a3);
    
    % Layer 5
    a5 = repmat(b5,1,Q) + LW5_4*a4;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a5,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(5,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
